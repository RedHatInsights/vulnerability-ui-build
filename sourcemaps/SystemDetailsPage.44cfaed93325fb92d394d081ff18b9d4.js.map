{"version":3,"file":"js/SystemDetailsPage.d37534d323dc19da37e2.js","mappings":"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","sources":["webpack:///./src/Components/SmartComponents/SystemDetailsPage/SystemDetails.js","webpack:///./src/Store/Reducers/SystemDetailsPageStore.js","webpack:///./src/Components/SmartComponents/SystemDetailsPage/SystemDetailsPage.js"],"sourcesContent":["import React from 'react';\nimport propTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { ConnectedSystemCves } from '../SystemCves/SystemCves';\nimport { EmptyStateExcludedSystem } from '../../PresentationalComponents/EmptyStates/EmptyStates';\n\nconst SystemDetails = ({ entity, isOptOut, optOutSystemHandler, loaded }) => {\n    return entity && loaded && isOptOut ? (\n        <EmptyStateExcludedSystem buttonAction={() => optOutSystemHandler(false)} />\n    ) : (\n        <ConnectedSystemCves\n            entity={{ id: entity?.id, display_name: entity?.display_name }}\n            allowedCveActions={['EDIT_STATUS', 'REMEDIATE']}\n            showHeaderLabel\n            setPageTitle\n        />\n    );\n};\n\nSystemDetails.propTypes = {\n    entity: propTypes.object,\n    isOptOut: propTypes.bool,\n    loaded: propTypes.bool,\n    optOutSystemHandler: propTypes.func\n};\n\nfunction mapStateToProps({ entityDetails: { entity, opt_out: isOptOut, loaded } }) {\n    return {\n        entity,\n        isOptOut,\n        loaded\n    };\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        null\n    )(SystemDetails)\n);\n","import React from 'react';\nimport SystemDetails from '../../Components/SmartComponents/SystemDetailsPage/SystemDetails';\nimport { FETCH_SYSTEM_DETAILS } from '../ActionTypes';\n\nexport const initialState = {\n    loaded: false\n};\n\nexport const systemDetailsPageStore = (INVENTORY_ACTION_TYPES, optOutSystemHandler) => (state = initialState, action) => {\n    switch (action.type) {\n        case FETCH_SYSTEM_DETAILS + '_FULFILLED':\n            return {\n                ...state,\n                ...action.payload.data\n            };\n        case INVENTORY_ACTION_TYPES.LOAD_ENTITY_FULFILLED:\n            return {\n                ...state,\n                loaded: true,\n                activeApps: [\n                    {\n                        title: 'Vulnerabilities',\n                        name: 'vulnerabilities',\n                        component: () => <SystemDetails optOutSystemHandler={optOutSystemHandler} />\n                    }\n                ]\n            };\n        case INVENTORY_ACTION_TYPES.LOAD_ENTITY_REJECTED:\n            return {\n                ...state,\n                loaded: true,\n                activeApps: [\n                    {\n                        title: 'Vulnerabilities',\n                        name: 'vulnerabilities',\n                        component: () => <SystemDetails />\n                    }\n                ]\n            };\n        default:\n            return state;\n    }\n};\n","import { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { addNotification, clearNotifications } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport propTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect, useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { fetchSystemDetails, optOutSystemsAction } from '../../../Store/Actions/Actions';\nimport { systemDetailsPageStore } from '../../../Store/Reducers/SystemDetailsPageStore';\nimport ReducerRegistry from '../../../Utilities/ReducerRegistry';\nimport Header from '../../PresentationalComponents/Header/Header';\nimport { injectIntl } from 'react-intl';\nimport { PATHS, ReadOnlyNotification } from '../../../Helpers/constants';\nimport messages from '../../../Messages';\n\nimport { AppInfo, DetailWrapper, InventoryDetailHead } from '@redhat-cloud-services/frontend-components/Inventory';\n\nconst InventoryDetail = ({ fetchSystemDetails, systemDetails = {}, optOutSystem, match, addNotification, intl, errors }) => {\n    const dispatch = useDispatch();\n\n    const inventoryId = match.params.inventoryId;\n\n    useEffect(() => {\n        fetchSystemDetails(inventoryId);\n    }, [fetchSystemDetails, inventoryId]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearNotifications());\n        };\n    }, [dispatch]);\n\n    const notifications = systemName => ({\n        exclude: {\n            success: {\n                variant: 'success',\n                title: intl.formatMessage(messages.notificationExcludeSuccess, { count: 1, systemName })\n            },\n            failure: {\n                variant: 'danger',\n                autoDismiss: false,\n                title: intl.formatMessage(messages.notificationExcludeFailureTitle, { count: 1, systemName }),\n                description: intl.formatMessage(messages.notificationDetailExcludeFailureBody, { count: 1 })\n            }\n        },\n        include: {\n            success: {\n                variant: 'success',\n                title: intl.formatMessage(messages.notificationIncludeSuccessTitle, { count: 1, systemName }),\n                description: intl.formatMessage(messages.notificationIncludeSuccessBody, { count: 1 })\n            },\n            failure: {\n                variant: 'danger',\n                autoDismiss: false,\n                title: intl.formatMessage(messages.notificationIncludeFailureTitle, { count: 1, systemName }),\n                description: intl.formatMessage(messages.notificationDetailIncludeFailureBody, { count: 1 })\n            }\n        }\n    });\n\n    const handleOptOutSystem = toExclude => {\n        optOutSystem(inventoryId, toExclude).then(() => {\n            const systemName = systemDetails.entity.display_name;\n\n            fetchSystemDetails(inventoryId);\n            addNotification(toExclude\n                ? notifications(systemName).exclude.success\n                : notifications(systemName).include.success);\n        }).catch(error => {\n            const systemName = systemDetails.entity.display_name;\n\n            addNotification(error.status === '503' ? ReadOnlyNotification : toExclude\n                ? notifications(systemName).exclude.failure\n                : notifications(systemName).include.failure);\n        });\n    };\n\n    const { opt_out: isOptOut = false, entity, loaded } = systemDetails;\n\n    return (\n        <DetailWrapper>\n            <Header\n                title=\"\"\n                breadcrumbs={[\n                    {\n                        title: PATHS.systemsPage.title,\n                        to: PATHS.systemsPage.to,\n                        loaded: true\n                    },\n                    {\n                        title: entity?.display_name || intl.formatMessage(messages.invalidSystem),\n                        isActive: true,\n                        loaded\n                    }\n                ]}\n            >\n                {!errors && (\n                    <InventoryDetailHead\n                        onLoad={({ mergeWithEntities, mergeWithDetail, INVENTORY_ACTION_TYPES }) => {\n                            ReducerRegistry.register({\n                                ...mergeWithEntities(),\n                                ...mergeWithDetail(systemDetailsPageStore(INVENTORY_ACTION_TYPES, handleOptOutSystem))\n                            });\n                        }}\n                        hideBack\n                        actions={\n                            entity && [\n                                isOptOut\n                                    ? {\n                                        title: intl.formatMessage(messages.inventoryKebabOptionsResume),\n                                        onClick: () => handleOptOutSystem(false)\n                                    }\n                                    : {\n                                        title: intl.formatMessage(messages.inventoryKebabOptionsExclude),\n                                        onClick: () => handleOptOutSystem(true)\n                                    }\n                            ]\n                        }\n                    />\n                )}\n            </Header>\n            <Main>\n                <AppInfo optOutSystemHandler={handleOptOutSystem} />\n            </Main>\n        </DetailWrapper>\n    );\n};\n\nInventoryDetail.propTypes = {\n    fetchSystemDetails: propTypes.func,\n    systemDetails: propTypes.object,\n    optOutSystem: propTypes.func,\n    match: propTypes.object,\n    addNotification: propTypes.func,\n    intl: propTypes.any,\n    errors: propTypes.object\n};\n\nfunction mapStateToProps(state) {\n    return {\n        errors: state.SystemCvesStore.cveList.payload.errors,\n        systemDetails: state.entityDetails\n    };\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        optOutSystem: (system, toExclude) => dispatch(optOutSystemsAction([system], toExclude)),\n        fetchSystemDetails: system => dispatch(fetchSystemDetails(system)),\n        addNotification: notification => dispatch(addNotification(notification))\n    };\n};\n\nexport default withRouter(\n    injectIntl(\n        connect(\n            mapStateToProps,\n            mapDispatchToProps\n        )(InventoryDetail)\n    )\n);\n"],"names":["SystemDetails","entity","isOptOut","optOutSystemHandler","loaded","buttonAction","id","display_name","allowedCveActions","showHeaderLabel","setPageTitle","propTypes","withRouter","connect","entityDetails","opt_out","initialState","InventoryDetail","fetchSystemDetails","systemDetails","optOutSystem","match","addNotification","intl","errors","dispatch","useDispatch","inventoryId","params","useEffect","clearNotifications","notifications","systemName","exclude","success","variant","title","formatMessage","messages","count","failure","autoDismiss","description","include","handleOptOutSystem","toExclude","then","error","status","ReadOnlyNotification","DetailWrapper","Header","breadcrumbs","PATHS","to","isActive","InventoryDetailHead","onLoad","mergeWithEntities","mergeWithDetail","INVENTORY_ACTION_TYPES","ReducerRegistry","state","action","type","FETCH_SYSTEM_DETAILS","payload","data","LOAD_ENTITY_FULFILLED","activeApps","name","component","LOAD_ENTITY_REJECTED","systemDetailsPageStore","hideBack","actions","onClick","Main","AppInfo","injectIntl","SystemCvesStore","cveList","system","optOutSystemsAction","notification"],"sourceRoot":""}