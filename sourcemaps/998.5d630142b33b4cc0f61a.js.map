{"version":3,"sources":["webpack:///./src/Store/Reducers/InventoryEntitiesReducer.js"],"names":["initialState","columns","rows","entities","selectedRows","modifyInventory","state","loaded","hasPatchAccess","some","patchAccess","nameColumn","restColumns","lastSeenColumn","find","key","tagsColumn","props","width","transforms","sortable","nowrap","cellTransforms","mergedColumns","splice","SYSTEMS_ADVISORY_COLUMN","map","row","selected","id","inventoryEntitiesReducer","action","type","ActionTypes","selectRows","isOpen","payload"],"mappings":"44BAKO,IAAMA,EAAe,CACxBC,QAAS,GACTC,KAAM,GACNC,SAAU,GACVC,aAAc,IAGlB,SAASC,EAAgBJ,EAASK,GAK9B,GAJKA,EAAMF,eACPE,EAAMF,aAAe,IAGrBE,EAAMC,OAAQ,CACd,IAAIC,EAAiBF,EAAMJ,KAAKO,MAAK,qBAAGC,eAExC,UAAmCT,GAA9BU,EAAL,KAAoBC,EAApB,WACIC,EAAiBP,EAAML,QAAQa,MAAK,kBAAqB,YAArB,EAAGC,OACvCC,EAAaV,EAAML,QAAQa,MAAK,kBAAqB,SAArB,EAAGC,OACvCC,EAAa,CAAC,EAAD,KAAMA,GAAN,IAAkBC,MAAO,CAAEC,MAAO,OAC/CL,EAAiB,CAAC,EAAD,KACVA,GADU,IAEbM,WAAY,CAACC,IAAUC,MACvBC,eAAgB,CAACD,MACjBJ,MAAO,CAAEC,MAAO,OAGpB,IAAIK,EAAgB,CAACZ,GAAJ,eAAmBK,IAAnB,OAAkCJ,IAAlC,OAAkDC,IAMnE,OAJIL,GACAe,EAAcC,OAAO,EAAG,EAAGC,MAG/B,OACOnB,GADP,IAEIL,QAASsB,EACTrB,KAAMI,EAAMJ,KAAKwB,KAAI,SAAAC,GAAG,cACjBA,GADiB,IAEpBC,UAAyC,IAA/BtB,EAAMF,aAAauB,EAAIE,WAK7C,OAAOvB,EAGJ,IAAMwB,EAA2B,SAAC7B,GAAD,OAAa,WAAkC,IAAjCK,EAAiC,uDAAzBN,EAAc+B,EAAW,uCACnF,OAAQA,EAAOC,MACX,IAAK,0BACD,OAAO3B,EAAgBJ,EAASK,GACpC,KAAK2B,KACD,OAAOC,QAAW5B,EAAOyB,GAC7B,IAAK,aACD,cACOzB,GADP,IAEIJ,KAAMI,EAAMJ,KAAKwB,KAAI,SAAAC,GAAG,cACjBA,GADiB,IAEpBQ,OAAQR,EAAIE,KAAOE,EAAOK,QAAQP,GAAKE,EAAOK,QAAQD,OAASR,EAAIQ,cAG/E,IAAK,wBACD,OAAOnC,EACX,QACI,OAAOM","file":"js/998.5cb169de15ee57f0938f.js","sourcesContent":["import { nowrap, sortable } from '@patternfly/react-table';\nimport { SYSTEMS_ADVISORY_COLUMN } from '../../Helpers/constants';\nimport { selectRows } from './reducersHelper';\nimport * as ActionTypes from '../ActionTypes';\n\nexport const initialState = {\n    columns: [],\n    rows: [],\n    entities: [],\n    selectedRows: {}\n};\n\nfunction modifyInventory(columns, state) {\n    if (!state.selectedRows) {\n        state.selectedRows = {};\n    }\n\n    if (state.loaded) {\n        let hasPatchAccess = state.rows.some(({ patchAccess }) => patchAccess);\n\n        let [nameColumn, ...restColumns] = columns;\n        let lastSeenColumn = state.columns.find(({ key }) => key === 'updated');\n        let tagsColumn = state.columns.find(({ key }) => key === 'tags');\n        tagsColumn = [{ ...tagsColumn, props: { width: 10 } }];\n        lastSeenColumn = [{\n            ...lastSeenColumn,\n            transforms: [sortable, nowrap],\n            cellTransforms: [nowrap],\n            props: { width: 20 }\n        }];\n\n        let mergedColumns = [nameColumn, ...tagsColumn, ...restColumns, ...lastSeenColumn];\n\n        if (hasPatchAccess) {\n            mergedColumns.splice(3, 0, SYSTEMS_ADVISORY_COLUMN);\n        }\n\n        return {\n            ...state,\n            columns: mergedColumns,\n            rows: state.rows.map(row => ({\n                ...row,\n                selected: state.selectedRows[row.id] === true\n            }))\n        };\n    }\n\n    return state;\n}\n\nexport const inventoryEntitiesReducer = (columns) => (state = initialState, action) => {\n    switch (action.type) {\n        case 'LOAD_ENTITIES_FULFILLED':\n            return modifyInventory(columns, state);\n        case ActionTypes.SELECT_ENTITY:\n            return selectRows(state, action);\n        case 'EXPAND_ROW':\n            return {\n                ...state,\n                rows: state.rows.map(row => ({\n                    ...row,\n                    isOpen: row.id === action.payload.id ? action.payload.isOpen : row.isOpen\n                }))\n            };\n        case 'CLEAR_INVENTORY_STORE':\n            return initialState;\n        default:\n            return state;\n    }\n};\n"],"sourceRoot":""}