{"version":3,"sources":["webpack:///./src/Store/Selectors/CVESelectors.js","webpack:///./src/Store/Reducers/InventoryEntitiesReducer.js","webpack:///./src/Components/SmartComponents/Systems/Systems.js","webpack:///./src/Components/SmartComponents/Systems/Systems.scss?4fb1","webpack:///./src/Components/SmartComponents/Systems/Systems.scss"],"names":["sCveDetailsPage","createSelector","state","CVEStore","cveDetails","createCveDetailsPage","sExposedSystemsTable","cve","affectedSystemsByCVE","createExposedSystemsTable","sAllSystems","SystemsStore","createSystemsListTable","init","columns","rows","entities","modifyInventory","getSelectedFunc","loaded","selected","lastSeenColumn","filter","key","item","insights_id","map","has","id","selectEntities","myRows","slice","inventoryEntitiesReducer","action","type","row","isOpen","payload","Systems","props","downloadReport","format","opt_out","fetchSystems","data_format","page","page_size","Number","MAX_SAFE_INTEGER","then","response","data","JSON","stringify","downloadFile","Date","toISOString","apply","config","setState","sendRequest","fetchData","createUrlParams","allParams","params","allowedParams","Object","keys","forEach","undefined","includes","queryString","qs","history","push","addFilter","param","value","newFilter","doOptOut","systems","size","optOutSystems","addNotification","variant","title","intl","formatMessage","messages","systemsExcludedNotification","count","systemsResumedNotificationTitle","description","systemsResumedNotificationBody","Set","onSelect","Array","isArray","add","selectMultiple","getSelected","handleFilterChange","debounce","meta","handleRefresh","perPage","per_page","total_items","inventory","current","onRefreshData","handleOptOut","handleKebabToggle","isKebabOpen","handleKebabSelect","React","createRef","InventoryCmp","removeListener","systemsColumnHeaderName","composed","systemsColumnHeaderCveCount","selectListener","middlewareListener","addNew","on","callback","selectAllListener","queryObject","parse","this","location","search","show_irrelevant","show_all","fetchInventory","nextProps","isLoading","insights","loadInventory","react","reactRouterDom","reactCore","reactIcons","pfReactTable","inventoryConnector","mergeWithEntities","mergeWithDetail","ReducerRegistry","register","getStore","InventoryTable","items","attributes","cve_count","rest","inventory_id","kebabOptions","kebabItemExcludeSystemAnalysis","isDisabled","kebabItemToggleExcludeSystemDisplay","kebabItemDownloadJSON","length","kebabItemDownloadCSV","showBreadcrumb","ref","hasCheckbox","total","onRefresh","actions","systemTableRowActions","className","selectedItems","selectorHandler","selectRows","fetchResource","ops","placeholder","searchFilterByName","dropdownItems","filterValues","filterCategories","filterSystemName","Component","propTypes","func","dataShape","object","any","injectIntl","withRouter","connect","dispatch","setHeader","header","options","status","optOutSystemsAction","notification","ids","content","module","i","transform","locals","exports"],"mappings":"icAGA,IAIaA,EAAkBC,yBAC3B,CAH2B,SAAAC,GAAK,OAAIA,EAAMC,SAASC,aAInDC,KAESC,EAAuBL,yBAChC,CAT+B,SAACC,EAAOK,GAAR,O,6UAAA,IAAsBL,EAAMC,SAASK,qBAArC,CAA2DD,UAU1FE,KAGSC,EAAcT,yBACvB,CAb2B,SAAAC,GAAK,OAAIA,EAAMS,eAc1CC,M,qpBCjBG,IAAMC,EAAO,CAChBC,QAAS,GACTC,KAAM,GACNC,SAAU,IAId,SAASC,EAAgBH,EAASZ,EAAOgB,GAErC,GAAIhB,EAAMiB,OAAQ,CACd,IAAMC,EAAWF,IACXG,EAAiBnB,EAAMY,QAAQQ,OAAO,kBAAqB,YAArB,EAAGC,MAC/C,YACOrB,EADP,CAEIa,KAAMb,EAAMa,KAAKO,OAAO,SAAAE,GAAI,OAAIA,EAAKC,cAAaC,IAAI,SAAAF,GAAI,YAAUA,EAAV,CAAgBJ,SAAUA,EAASO,IAAIH,EAAKI,QACtGd,QAAS,GAAF,WACAA,GAAW,IADX,IAEAO,GAAkB,OAKjC,OAAOnB,EAGX,SAAS2B,EAAe3B,EAAOgB,GAC3B,IAAME,EAAWF,IACXY,EAAS5B,EAAMa,KAAKgB,QAS1B,OARe,EAAH,GACL7B,EADK,CAERa,KAAMe,EACLJ,IAAI,SAAAF,GAED,OADiB,EAAH,GAASA,EAAT,CAAeJ,SAAUA,EAASO,IAAIH,EAAKI,UAO9D,IAAMI,EAA2B,SAAClB,EAASM,GAAV,OAAuB,WAA0B,IAAzBlB,EAAyB,uDAAjBW,EAAMoB,EAAW,uCACrF,OAAQA,EAAOC,MACX,IAAK,0BACD,OAAOjB,EAAgBH,EAASZ,EAAOkB,GAC3C,IAAK,2BACD,OAAOS,EAAe3B,EAAOkB,GACjC,IAAK,aACD,YACOlB,EADP,CAEIa,KAAMb,EAAMa,KAAKW,IAAI,SAACS,GAAD,YACdA,EADc,CAEjBC,OAAQD,EAAIP,KAAOK,EAAOI,QAAQT,GAAKK,EAAOI,QAAQD,OAASD,EAAIC,aAI/E,QACI,OAAOlC,M,8kCCnBboC,G,YAaF,WAAYC,GAAO,0BACf,4BAAMA,KA+CVC,eAAiB,SAAAC,GAAU,MACK,EAAKvC,MAAzBwC,EADe,EACfA,QAASpB,EADM,EACNA,OACTe,EAAYM,YAAa,CAC7BD,UACApB,SACAsB,YAAaH,EACbI,KAAM,EACNC,UAAWC,OAAOC,mBALdX,QAORA,GACIA,EAAQY,KAAK,YAAwB,IAAfC,EAAe,EAArBC,KACNA,EAAkB,SAAXV,EAAoBW,KAAKC,UAAUH,GAAYA,EAC5D,OAAOI,uBAAaH,EAAD,mBAAkB,IAAII,MAAOC,eAAiBf,MA5D1D,EAmFnBgB,MAAQ,WAAiB,IAAhBC,EAAgB,uDAAP,GACd,EAAKC,SAAL,MAAmB,EAAKzD,MAAxB,GAAkCwD,GAAU,EAAKE,cApFlC,EAuFnBA,YAAc,YAEVC,EADsB,EAAKtB,MAAnBsB,WACE,GAAD,GAAM,EAAK3D,QACpB,EAAK4D,gBAAgB,EAAK5D,QA1FX,EA6FnB4D,gBAAkB,SAAAC,GACd,IAAMC,EAAS,GAAH,GAAQD,GACdE,EAAgB,CAAC,SAAU,OAAQ,aACzCC,OAAOC,KAAKJ,GAAWK,QACnB,SAAA7C,GAAG,YACkB8C,IAAhBL,EAAOzC,IAAsC,KAAhByC,EAAOzC,KAAgB0C,EAAcK,SAAS/C,KAAwB,IAAhByC,EAAOzC,YACpFyC,EAAOzC,KAEtB,IAAMgD,EAAcC,IAAGnB,UAAUW,GACjC,EAAKzB,MAAMkC,QAAQC,KAAK,IAAMH,IAtGf,EAyGnBI,UAAY,SAACC,EAAOC,EAAO3C,GACvB,IAAI4C,EAEAA,EADS,UAAT5C,GAA8B,aAAV0C,EACR,OAAGA,EAAQC,GAEX,EAAK3E,MAAM0E,GAAX,OAAuBA,EAAvB,UAAkC,EAAK1E,MAAM0E,GAA7C,YAAuDC,IAAvD,OAAsED,EAAQC,GAG9F,EAAKpB,MAAL,MAAgBqB,EAAhB,CAA2BjC,KAAM,MAjHlB,EAoHnBkC,SAAW,SAACC,GACJA,EAAQC,KAAO,GACf,EAAK1C,MAAM2C,cAAcF,GAAU,EAAK9E,MAAMwC,SAASO,KAAK,WACxD,EAAKV,MAAMsB,UAAX,MAA0B,EAAKG,SAA/B,CAAyCnB,KAAM,MACxB,IAAvB,EAAK3C,MAAMwC,QACL,EAAKH,MAAM4C,gBAAgB,CACzBC,QAAS,UACTC,MAAO,EAAK9C,MAAM+C,KAAKC,cACnBC,IAASC,4BACT,CAAEC,MAAOV,EAAQC,MAAQ,MAG/B,EAAK1C,MAAM4C,gBAAgB,CACzBC,QAAS,UACTC,MAAO,EAAK9C,MAAM+C,KAAKC,cACnBC,IAASG,gCACT,CAAED,MAAOV,EAAQC,MAAQ,IAE7BW,YAAa,EAAKrD,MAAM+C,KAAKC,cAAcC,IAASK,kCAE5D,EAAKlC,SAAS,CAAEvC,SAAU,IAAI0E,SAxIvB,EA6InBC,SAAW,SAAC1D,GACR,IAAIjB,GACCiB,EAAQc,MAAQ6C,MAAMC,QAAQ5D,EAAQc,MACvC/B,EAAW,IAAI0E,IAAIzD,EAAQc,OAE3B/B,EAAW,EAAKlB,MAAMkB,SACtBiB,EAAQc,KAAK/B,SAAWA,EAAS8E,IAAI7D,EAAQc,KAAKvB,IAAMR,EAAQ,OAAQiB,EAAQc,KAAKvB,KAGzF,EAAK+B,SAAS,CAAEvC,YAAY,EAAKmB,MAAM4D,iBAtJxB,EAyJnBC,YAAc,WACV,OAAO,EAAKlG,MAAMkB,UA1JH,EA6JnB4C,OAAS,WAAM,MACkC,EAAK9D,MAClD,MAAO,CAAEoB,OAFE,EACHA,OACSoB,QAFN,EACKA,QACUG,KAFf,EACcA,KACOC,UAFrB,EACoBA,YA9JhB,EAkKnBuD,mBAAqBC,IAAS,SAAAzB,GAAS,IAE3B/B,EADS,EAAKP,MAAMyC,QAApBuB,KACAzD,UACR,EAAKW,MAAM,CAAEnC,OAAQuD,EAAO/B,YAAWD,KAAM,KAC9C,KAtKgB,EAwKnB2D,cAAgB,YAAiC,IAA9B3D,EAA8B,EAA9BA,KAAgB4D,EAAc,EAAxBC,SACbH,EAAS,EAAKhE,MAAMyC,QAApBuB,KACA1C,EAAc,EAAKtB,MAAnBsB,UACR,GAAI0C,EAAK1D,OAASA,GAAQ0D,EAAKzD,YAAc2D,EAAS,CAClD,IAAM/C,EAAS,CACXb,OACAC,UAAW2D,GAAWF,EAAKzD,UAC3BxB,OAAQ,EAAKpB,MAAMoB,OACnBoB,QAAS,EAAKxC,MAAMwC,SAExBmB,EAAUH,GACV,EAAKI,gBAAgBJ,GAGrB6C,EAAKI,aAAeF,GAAW,EAAKG,UAAUC,SAC9C,EAAKD,UAAUC,QAAQC,cAAc,CAAEjE,OAAM6D,SAAUD,EAASA,aAvLrD,EA2LnBM,aAAe,WACX,EAAKpD,SAAS,CACVjB,SAAU,EAAKxC,MAAMwC,QACrBtB,SAAU,IAAI0E,IACdjD,KAAM,GACP,EAAKe,cAhMO,EAmMnBoD,kBAAoB,SAAAC,GAChB,EAAKtD,SAAS,CACVsD,iBArMW,EAyMnBC,kBAAoB,WAChB,EAAKvD,SAAS,CACVsD,aAAc,EAAK/G,MAAM+G,eAzM7B,EAAKL,UAAYO,IAAMC,YACvB,EAAKlH,MAAQ,CACTmH,aAAc,kBAAM,4CACpB/F,YAAQ+C,EACRiD,eAAgB,aAChBxG,QAAS,CACL,CACIS,IAAK,eACL8D,MAAO,EAAK9C,MAAM+C,KAAKC,cAAcC,IAAS+B,yBAC9CC,SAAU,CAAC,mBAAoB,iBAEnC,CACIjG,IAAK,YACL8D,MAAO,EAAK9C,MAAM+C,KAAKC,cAAcC,IAASiC,+BAGtD/E,SAAS,EACTuE,aAAa,EACbS,eAAgBC,IAAmBC,OAAO,CACtCC,GAAI,gBACJC,SAAU,SAAAzF,GAAO,OAAI,EAAK0D,SAAS1D,MAEvC0F,kBAAmBJ,IAAmBC,OAAO,CACzCC,GAAI,kBACJC,SAAU,SAAAzF,GAAO,OAAI,EAAK0D,SAAS1D,MAEvCjB,SAAU,IAAI0E,KA5BH,E,uEAkCf,IAAMkC,EAAcxD,IAAGyD,MAAMC,KAAK3F,MAAM4F,SAASC,QACjDJ,EAAYK,gBAAkD,SAAhCL,EAAYK,gBACtCL,EAAYK,kBACZL,EAAYM,cAAWjE,GAG3B6D,KAAKK,iBACLL,KAAKzE,MAAL,MAAgBuE,M,4CAGEQ,GAClB,OAAQA,EAAUxD,QAAQyD,Y,qJAoB+CC,SAASC,cAAc,CAC5FC,MAAOzB,IACP0B,iBACAC,YACAC,aACAC,iB,gBALIC,E,EAAAA,mBAAoBC,E,EAAAA,kBAAmBC,E,EAAAA,gBAO/CC,IAAgBC,SAAhB,MACOH,EAAkBlH,YAAyBkG,KAAKhI,MAAMY,QAASoH,KAAK9B,cAD3E,GAEO+C,MAGPjB,KAAKvE,SAAS,CACV0D,aAAc4B,EAAmBG,IAAgBE,YAAYC,iBAEjErB,KAAKhI,MAAMoH,iB,0HA+HN,aAC4BY,KAAKhI,MAA9BmH,EADH,EACGA,aAAc/F,EADjB,EACiBA,OADjB,EAEkB4G,KAAK3F,MAAMyC,QAA1B7B,EAFH,EAEGA,KAAMoD,EAFT,EAESA,KACRiD,EAAQrG,EAAKzB,IAAI,SAAAF,GAAQ,MACIA,EAAKiI,WAA5BC,EADmB,EACnBA,UAAcC,EADK,qBAE3B,WACID,UAAYnD,EAAK7D,QAAW,WAAegH,EAC3C9H,GAAIJ,EAAKiI,WAAWG,cACjBD,KAILE,EAAe,CACjBC,YAA+B,kBAAM,EAAK/E,SAAS,EAAK7E,MAAMkB,WAAW8G,KAAKhI,MAAMwC,QAAS,CACzFqH,YAAa7B,KAAK9B,cAAcnB,OAEpC+E,YAAoC9B,KAAKnB,aAAcmB,KAAKhI,MAAMwC,SAClEuH,YAAsB/B,KAAK1F,eAAgB,CAAEuH,WAA4B,IAAhB5G,EAAK+G,SAC9DC,YAAqBjC,KAAK1F,eAAgB,CAAEuH,WAA4B,IAAhB5G,EAAK+G,UAEjE,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAqBE,gBAAgB,IACrC,kBAAC,OAAD,KACI,kBAAC/C,EAAD,CACIgD,IAAKnC,KAAKtB,UACV0D,YAA6B,IAAhBnH,EAAK+G,OAClBrH,KAAM0D,EAAK1D,KACX0H,MAAOhE,EAAKI,YACZF,QAASF,EAAKzD,UACd0H,UAAWtC,KAAK1B,cAChBgD,MAAOA,EACPiB,QAASC,aAAsBxC,KAAKnD,SAAUmD,KAAKhI,MAAMwC,UAGzD,kBAAC,IAAD,CAAciI,UAAU,mBACpB,kBAAC,IAAD,KACI,kBAAC,IAAD,CACIC,cAAe1C,KAAKhI,MAAMkB,SAC1ByJ,gBAAiB3C,KAAK3F,MAAMuI,WAC5BtB,MAAOtB,KAAK3F,MAAMyC,QAClB+F,cAAe,SAAAC,GAAG,OAAIrI,YAAa,GAAD,GAAM,EAAKqB,SAAX,GAAwBgH,QAIlE,kBAAC,IAAD,KACI,kBAAC,IAAD,CACIC,YAAa/C,KAAK3F,MAAM+C,KAAKC,cAAcC,IAAS0F,oBACpDrG,MAAOvD,EACPmC,MAAOyE,KAAKzE,SAIpB,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAW0H,cAAetB,MAGlC,kBAAC,eAAD,CAAcc,UAAU,iCACpB,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CACIS,aAAclD,KAAKlE,SACnBqH,iBAAkB,CAACC,KACnB7H,MAAOyE,KAAKzE,kB,GA3R9B0D,IAAMoE,WAAtBjJ,GACKkJ,UAAY,CACf3H,UAAW2H,IAAUC,KACrBzG,QAAS0G,IACTxG,cAAesG,IAAUC,KACzBtG,gBAAiBqG,IAAUC,KAC3BX,WAAYU,IAAUC,KACtBtF,eAAgBqF,IAAUC,KAC1BhH,QAAS+G,IAAUG,OACnBxD,SAAUqD,IAAUG,OACpBrG,KAAMkG,IAAUI,KA8STC,uBACXC,YACIC,kBAnBR,SAAyB7L,GACrB,MAAO,CACH8E,QAAStE,YAAYR,KAIF,SAAA8L,GACvB,MAAO,CACHC,UAAW,SAAAC,GAAM,OAAIF,EAASC,YAAUC,KACxCrI,UAAW,SAAAsI,GAAO,OAAIH,EAASrJ,YAAawJ,KAC5CjH,cAAe,SAACF,EAASoH,GAAV,OAAqBJ,EAASK,YAAoBrH,EAASoH,KAC1EjH,gBAAiB,SAAAmH,GAAY,OAAIN,EAAS7G,0BAAgBmH,KAC1DxB,WAAY,SAACjG,EAAO0H,GAAR,OAAgBP,EAASnK,YAAegD,EAAO0H,KAC3DpG,eAAgB,kBAAM6F,EAAS,CAAE9J,KAAM,gCAMvC6J,CAGEzJ,O,qBCjWV,IAAIkK,EAAU,EAAQ,MAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAOhE,IAAIL,EAAU,CAAC,KAAM,EAErB,eAPIQ,EAQJ,gBAAqBtI,GAER,EAAQ,GAAR,CAAmEmI,EAASL,GAEtFK,EAAQI,SAAQH,EAAOI,QAAUL,EAAQI,S,sBCjBlCH,EAAOI,QAAU,EAAQ,GAAR,EAA+D,IAKlFnI,KAAK,CAAC+H,EAAOC,EAAI,+dAAge","file":"js/Systems.js","sourcesContent":["import { createSelector } from 'reselect';\nimport { createCveDetailsPage, createExposedSystemsTable, createSystemsListTable } from '../../Helpers/CVEHelper';\n\nconst cveListWithSystemsSelector = (state, cve) => ({ ...state.CVEStore.affectedSystemsByCVE, cve });\nconst systemsListAllSelector = state => state.SystemsStore;\nconst cveDetailsPageSelector = state => state.CVEStore.cveDetails;\n\nexport const sCveDetailsPage = createSelector(\n    [cveDetailsPageSelector],\n    createCveDetailsPage\n);\nexport const sExposedSystemsTable = createSelector(\n    [cveListWithSystemsSelector],\n    createExposedSystemsTable\n);\n\nexport const sAllSystems = createSelector(\n    [systemsListAllSelector],\n    createSystemsListTable\n);\n","// Initial State\nexport const init = {\n    columns: [],\n    rows: [],\n    entities: []\n};\n// Reducer\n\nfunction modifyInventory(columns, state, getSelectedFunc) {\n    // If a system does not have insights_id, it means it was deleted from inventory but somehow survived in Vuln backend\n    if (state.loaded) {\n        const selected = getSelectedFunc();\n        const lastSeenColumn = state.columns.filter(({ key }) => key === 'updated');\n        return {\n            ...state,\n            rows: state.rows.filter(item => item.insights_id).map(item => ({ ...item, selected: selected.has(item.id) })),\n            columns: [\n                ...columns || [],\n                ...lastSeenColumn || []\n            ]\n        };\n    }\n\n    return state;\n}\n\nfunction selectEntities(state, getSelectedFunc) {\n    const selected = getSelectedFunc();\n    const myRows = state.rows.slice();\n    const retval = {\n        ...state,\n        rows: myRows\n        .map(item => {\n            const newValue =  { ...item, selected: selected.has(item.id) };\n            return newValue;\n        })\n    };\n    return retval;\n}\n\nexport const inventoryEntitiesReducer = (columns, selected) => (state = init, action) => {\n    switch (action.type) {\n        case 'LOAD_ENTITIES_FULFILLED':\n            return modifyInventory(columns, state, selected);\n        case 'SELECT_MULTIPLE_ENTITIES':\n            return selectEntities(state, selected);\n        case 'EXPAND_ROW':\n            return {\n                ...state,\n                rows: state.rows.map((row) => ({\n                    ...row,\n                    isOpen: row.id === action.payload.id ? action.payload.isOpen : row.isOpen\n                }))\n            };\n\n        default:\n            return state;\n    }\n};\n","import * as reactCore from '@patternfly/react-core';\nimport { Page, ToolbarGroup, ToolbarItem } from '@patternfly/react-core';\nimport * as reactIcons from '@patternfly/react-icons';\nimport * as pfReactTable from '@patternfly/react-table';\nimport { Main, TableToolbar } from '@redhat-cloud-services/frontend-components';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications';\nimport { downloadFile } from '@redhat-cloud-services/frontend-components-utilities/files/helpers';\nimport debounce from 'lodash/debounce';\nimport propTypes from 'prop-types';\nimport qs from 'query-string';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport * as reactRouterDom from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport { dataShape } from '../../../Helpers/MiscHelper';\nimport { fetchSystems, optOutSystemsAction, setHeader, selectEntities } from '../../../Store/Actions/Actions';\nimport { inventoryEntitiesReducer } from '../../../Store/Reducers/InventoryEntitiesReducer';\nimport { sAllSystems } from '../../../Store/Selectors/CVESelectors';\nimport ReducerRegistry, { middlewareListener } from '../../../Utilities/ReducerRegistry';\nimport VulnerabilityHeader from '../VulnerabilityHeader/VulnerabilityHeader';\nimport BaseKebab from '../../PresentationalComponents/DownloadReportKebab/BaseKebab';\nimport {\n    kebabItemDownloadCSV,\n    kebabItemDownloadJSON,\n    kebabItemToggleExcludeSystemDisplay,\n    kebabItemExcludeSystemAnalysis\n} from '../../PresentationalComponents/DownloadReportKebab/KebabItems';\nimport './Systems.scss';\nimport SelectAllCheckbox from '../../PresentationalComponents/SelectAllCheckbox';\nimport { filterSystemName } from '../../../Helpers/constants';\nimport FilterChips  from '../../PresentationalComponents/Filters/FilterChips';\nimport SearchFilter  from '../../PresentationalComponents/Filters/SearchFilter';\nimport messages from '../../../Messages';\nimport { injectIntl } from 'react-intl';\nimport { systemTableRowActions } from '../../../Helpers/CVEHelper';\n/*eslint camelcase: 0*/\n\nclass Systems extends React.Component {\n    static propTypes = {\n        fetchData: propTypes.func,\n        systems: dataShape,\n        optOutSystems: propTypes.func,\n        addNotification: propTypes.func,\n        selectRows: propTypes.func,\n        selectMultiple: propTypes.func,\n        history: propTypes.object,\n        location: propTypes.object,\n        intl: propTypes.any\n    };\n\n    constructor(props) {\n        super(props);\n        this.inventory = React.createRef();\n        this.state = {\n            InventoryCmp: () => <div>Loading...</div>,\n            filter: undefined,\n            removeListener: () => { },\n            columns: [\n                {\n                    key: 'display_name',\n                    title: this.props.intl.formatMessage(messages.systemsColumnHeaderName),\n                    composed: ['facts.os_release', 'display_name']\n                },\n                {\n                    key: 'cve_count',\n                    title: this.props.intl.formatMessage(messages.systemsColumnHeaderCveCount)\n                }\n            ],\n            opt_out: false,\n            isKebabOpen: false,\n            selectListener: middlewareListener.addNew({\n                on: 'SELECT_ENTITY',\n                callback: payload => this.onSelect(payload)\n            }),\n            selectAllListener: middlewareListener.addNew({\n                on: 'SELECT_ENTITIES',\n                callback: payload => this.onSelect(payload)\n            }),\n            selected: new Set()\n        };\n    }\n\n    componentDidMount() {\n\n        const queryObject = qs.parse(this.props.location.search);\n        queryObject.show_irrelevant = queryObject.show_irrelevant === 'true';\n        if (queryObject.show_irrelevant) {\n            queryObject.show_all = undefined;\n        }\n\n        this.fetchInventory();\n        this.apply({ ...queryObject });\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return !nextProps.systems.isLoading;\n    }\n\n    downloadReport = format => {\n        const { opt_out, filter } = this.state;\n        const { payload } = fetchSystems({\n            opt_out,\n            filter,\n            data_format: format,\n            page: 1,\n            page_size: Number.MAX_SAFE_INTEGER\n        });\n        payload &&\n            payload.then(({ data: response }) => {\n                const data = format === 'json' ? JSON.stringify(response) : response;\n                return downloadFile(data, `systems-${new Date().toISOString()}`, format);\n            });\n    };\n\n    async fetchInventory() {\n        const { inventoryConnector, mergeWithEntities, mergeWithDetail } = await insights.loadInventory({\n            react: React,\n            reactRouterDom,\n            reactCore,\n            reactIcons,\n            pfReactTable\n        });\n        ReducerRegistry.register({\n            ...mergeWithEntities(inventoryEntitiesReducer(this.state.columns, this.getSelected)),\n            ...mergeWithDetail()\n        });\n\n        this.setState({\n            InventoryCmp: inventoryConnector(ReducerRegistry.getStore()).InventoryTable\n        });\n        this.state.removeListener();\n    }\n\n    apply = (config = {}) => {\n        this.setState({ ...this.state, ...config }, this.sendRequest);\n    };\n\n    sendRequest = () => {\n        const { fetchData } = this.props;\n        fetchData({ ...this.state });\n        this.createUrlParams(this.state);\n    }\n\n    createUrlParams = allParams => {\n        const params = { ...allParams };\n        const allowedParams = ['filter', 'page', 'page_size'];\n        Object.keys(allParams).forEach(\n            key =>\n                (params[key] === undefined || params[key] === '' || !allowedParams.includes(key) || params[key] === false) &&\n                delete params[key]\n        );\n        const queryString = qs.stringify(params);\n        this.props.history.push('?' + queryString);\n    };\n\n    addFilter = (param, value, type) => {\n        let newFilter;\n        if (type === 'radio' || param === 'show_all') {\n            newFilter = { [param]: value };\n        } else {\n            newFilter = this.state[param] ? { [param]: `${this.state[param]},${value}` } : { [param]: value };\n        }\n\n        this.apply({ ...newFilter, page: 1 });\n    };\n\n    doOptOut = (systems) => {\n        if (systems.size > 0) {\n            this.props.optOutSystems(systems, !this.state.opt_out).then(() => {\n                this.props.fetchData({ ...this.params(), page: 1 });\n                this.state.opt_out === false\n                    ? this.props.addNotification({\n                        variant: 'success',\n                        title: this.props.intl.formatMessage(\n                            messages.systemsExcludedNotification,\n                            { count: systems.size || 0 }\n                        )\n                    })\n                    : this.props.addNotification({\n                        variant: 'success',\n                        title: this.props.intl.formatMessage(\n                            messages.systemsResumedNotificationTitle,\n                            { count: systems.size || 0 }\n                        ),\n                        description: this.props.intl.formatMessage(messages.systemsResumedNotificationBody)\n                    });\n                this.setState({ selected: new Set() });\n            });\n        }\n    };\n\n    onSelect = (payload) => {\n        let selected;\n        if (!payload.data || Array.isArray(payload.data)) {\n            selected = new Set(payload.data);\n        } else {\n            selected = this.state.selected;\n            payload.data.selected ? selected.add(payload.data.id) : selected.delete(payload.data.id);\n        }\n\n        this.setState({ selected }, this.props.selectMultiple);\n    };\n\n    getSelected = () => {\n        return this.state.selected;\n    };\n\n    params = () => {\n        const { filter, opt_out, page, page_size } = this.state;\n        return { filter, opt_out, page, page_size };\n    };\n\n    handleFilterChange = debounce(value => {\n        const { meta } = this.props.systems;\n        const { page_size } = meta;\n        this.apply({ filter: value, page_size, page: 1 });\n    }, 400);\n\n    handleRefresh = ({ page, per_page: perPage }) => {\n        const { meta } = this.props.systems;\n        const { fetchData } = this.props;\n        if (meta.page !== page || meta.page_size !== perPage) {\n            const config = {\n                page,\n                page_size: perPage || meta.page_size,\n                filter: this.state.filter,\n                opt_out: this.state.opt_out\n            };\n            fetchData(config);\n            this.createUrlParams(config);\n        }\n\n        if (meta.total_items <= perPage && this.inventory.current) {\n            this.inventory.current.onRefreshData({ page, per_page: perPage, perPage });\n        }\n    };\n\n    handleOptOut = () => {\n        this.setState({\n            opt_out: !this.state.opt_out,\n            selected: new Set(),\n            page: 1\n        }, this.sendRequest);\n    };\n\n    handleKebabToggle = isKebabOpen => {\n        this.setState({\n            isKebabOpen\n        });\n    };\n\n    handleKebabSelect = () => {\n        this.setState({\n            isKebabOpen: !this.state.isKebabOpen\n        });\n    };\n\n    render() {\n        const { InventoryCmp, filter } = this.state;\n        const { data, meta } = this.props.systems;\n        const items = data.map(item => {\n            const { cve_count, ...rest } = item.attributes;\n            return {\n                cve_count: (meta.opt_out && 'Excluded') || cve_count,\n                id: item.attributes.inventory_id,\n                ...rest\n            };\n        });\n\n        const kebabOptions = [\n            kebabItemExcludeSystemAnalysis(() => this.doOptOut(this.state.selected), this.state.opt_out, {\n                isDisabled: !this.getSelected().size\n            }),\n            kebabItemToggleExcludeSystemDisplay(this.handleOptOut, this.state.opt_out),\n            kebabItemDownloadJSON(this.downloadReport, { isDisabled: data.length === 0 }),\n            kebabItemDownloadCSV(this.downloadReport, { isDisabled: data.length === 0 })\n        ];\n        return (\n            <Page>\n                <VulnerabilityHeader showBreadcrumb={false} />\n                <Main>\n                    <InventoryCmp\n                        ref={this.inventory}\n                        hasCheckbox={data.length !== 0}\n                        page={meta.page}\n                        total={meta.total_items}\n                        perPage={meta.page_size}\n                        onRefresh={this.handleRefresh}\n                        items={items}\n                        actions={systemTableRowActions(this.doOptOut, this.state.opt_out)}\n                    >\n\n                        <ToolbarGroup className=\"systems-toolbar\">\n                            <ToolbarItem>\n                                <SelectAllCheckbox\n                                    selectedItems={this.state.selected}\n                                    selectorHandler={this.props.selectRows}\n                                    items={this.props.systems}\n                                    fetchResource={ops => fetchSystems({ ...this.params(), ...ops })}\n                                />\n                            </ToolbarItem>\n\n                            <ToolbarItem>\n                                <SearchFilter\n                                    placeholder={this.props.intl.formatMessage(messages.searchFilterByName)}\n                                    value={filter}\n                                    apply={this.apply}\n                                />\n                            </ToolbarItem>\n\n                            <ToolbarItem>\n                                <BaseKebab dropdownItems={kebabOptions} />\n                            </ToolbarItem>\n                        </ToolbarGroup>\n                        <TableToolbar className=\"pf-u-pl-0 system-filter-chips\">\n                            <ToolbarGroup>\n                                <ToolbarItem>\n                                    <FilterChips\n                                        filterValues={this.params()}\n                                        filterCategories={[filterSystemName]}\n                                        apply={this.apply}\n                                    />\n                                </ToolbarItem>\n                            </ToolbarGroup>\n                        </TableToolbar>\n                    </InventoryCmp>\n                </Main>\n            </Page>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        systems: sAllSystems(state)\n    };\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setHeader: header => dispatch(setHeader(header)),\n        fetchData: options => dispatch(fetchSystems(options)),\n        optOutSystems: (systems, status) => dispatch(optOutSystemsAction(systems, status)),\n        addNotification: notification => dispatch(addNotification(notification)),\n        selectRows: (value, ids) => dispatch(selectEntities(value, ids)),\n        selectMultiple: () => dispatch({ type: 'SELECT_MULTIPLE_ENTITIES' })\n    };\n};\n\nexport default injectIntl(\n    withRouter(\n        connect(\n            mapStateToProps,\n            mapDispatchToProps\n        )(Systems)\n    )\n);\n\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/sass-loader/lib/loader.js??ref--5-2!./Systems.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/sass-loader/lib/loader.js??ref--5-2!./Systems.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/sass-loader/lib/loader.js??ref--5-2!./Systems.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".systems-toolbar > div {\\n  margin-right: var(--pf-global--spacer--sm); }\\n\\n.space-between-toolbar-items {\\n  justify-content: space-between;\\n  flex-wrap: nowrap; }\\n  .space-between-toolbar-items > div {\\n    flex-wrap: nowrap; }\\n\\n.vulnerability-toolbar-spacing {\\n  justify-content: flex-start; }\\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\\n    margin-right: var(--pf-global--spacer--sm); }\\n\\n.system-filter-chips {\\n  order: 6;\\n  flex-basis: 100%; }\\n\", \"\"]);\n\n// exports\n"],"sourceRoot":""}