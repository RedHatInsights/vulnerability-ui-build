{"version":3,"file":"js/SystemDetailsPage.1665523123816.0a82f06c09e371475842.js","mappings":"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","sources":["webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Inventory/InventoryLoadError.js","webpack:///./src/Components/SmartComponents/SystemDetailsPage/SystemDetails.js","webpack:///./src/Store/Reducers/SystemDetailsPageStore.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Inventory/DetailWrapper.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Inventory/InventoryDetailHead.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Inventory/AppInfo.js","webpack:///./src/Components/SmartComponents/SystemDetailsPage/SystemDetailsPage.js"],"sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useEffect } from 'react';\nvar InventoryLoadError = function (_a) {\n    var component = _a.component, props = __rest(_a, [\"component\"]);\n    useEffect(function () {\n        console.error(\"Unable to load inventory component. Failed to load \".concat(component, \".\"), props);\n    }, []);\n    return (React.createElement(\"div\", null,\n        React.createElement(\"h1\", null, \"Unable to load inventory component\"),\n        React.createElement(\"h2\", null,\n            \"Failed to load \",\n            component),\n        React.createElement(\"code\", null, \"More info can be found in browser console output.\")));\n};\nexport default InventoryLoadError;\n//# sourceMappingURL=InventoryLoadError.js.map","import React from 'react';\nimport propTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport { ConnectedSystemCves } from '../SystemCves/SystemCves';\nimport {\n    EmptyStateExcludedSystem,\n    NotAuthorized\n} from '../../PresentationalComponents/EmptyStates/EmptyStates';\nimport { Spinner } from '@redhat-cloud-services/frontend-components/Spinner';\nimport { intl } from '../../../Utilities/IntlProvider';\nimport messages from '../../../Messages';\nimport { PERMISSIONS } from '../../../Helpers/constants';\nimport { useRbac } from '../../../Helpers/Hooks';\n\nconst SystemDetails = ({ optOutSystemHandler }) => {\n    const { entity, loaded, opt_out: isOptOut } = useSelector(state => state.entityDetails) ?? {};\n\n    const [[\n        canExport,\n        canReadVulnerabilityResults,\n        canEditPairStatus,\n        canReadExcluded\n    ], isRbacLoading] = useRbac([\n        PERMISSIONS.basicReporting,\n        PERMISSIONS.readVulnerabilityResults,\n        PERMISSIONS.setPairStatus,\n        PERMISSIONS.readExcluded]\n    );\n\n    if (isRbacLoading) {\n        return <Spinner centered />;\n    } else if (canReadVulnerabilityResults) {\n        if (entity && loaded && isOptOut) {\n            if (canReadExcluded) {\n                return <EmptyStateExcludedSystem buttonAction={() => optOutSystemHandler(entity.display_name, false)} />;\n            } else {\n                return <NotAuthorized title={intl.formatMessage(messages.notAuthorizedNoAccessForSystem)} />;\n            }\n        } else {\n            return <ConnectedSystemCves\n                entity={{ id: entity?.id, display_name: entity?.display_name }}\n                showHeaderLabel\n                setPageTitle\n                canExport={canExport}\n                canEditPairStatus={canEditPairStatus}\n            />;\n        }\n    } else {\n        return <NotAuthorized />;\n    }\n};\n\nSystemDetails.propTypes = {\n    optOutSystemHandler: propTypes.func\n};\n\nexport default SystemDetails;\n","import React from 'react';\nimport SystemDetails from '../../Components/SmartComponents/SystemDetailsPage/SystemDetails';\nimport { FETCH_SYSTEM_DETAILS } from '../ActionTypes';\n\nexport const initialState = {\n    loaded: false\n};\n\nexport const systemDetailsPageStore = (\n    INVENTORY_ACTION_TYPES, optOutSystemHandler\n) => (state = initialState, action) => {\n    switch (action.type) {\n        case FETCH_SYSTEM_DETAILS + '_FULFILLED':\n            return {\n                ...state,\n                ...action.payload.data\n            };\n        case INVENTORY_ACTION_TYPES.LOAD_ENTITY_FULFILLED:\n            return {\n                ...state,\n                loaded: true,\n                activeApps: [\n                    {\n                        title: 'Vulnerabilities',\n                        name: 'vulnerabilities',\n                        component: () => <SystemDetails\n                            optOutSystemHandler={optOutSystemHandler}\n                        />\n                    }\n                ]\n            };\n        case INVENTORY_ACTION_TYPES.LOAD_ENTITY_REJECTED:\n            return {\n                ...state,\n                loaded: true,\n                activeApps: [\n                    {\n                        title: 'Vulnerabilities',\n                        name: 'vulnerabilities',\n                        component: () => <SystemDetails />\n                    }\n                ]\n            };\n        default:\n            return state;\n    }\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { ScalprumComponent } from '@scalprum/react-core';\nimport { useHistory } from 'react-router-dom';\nimport { useStore } from 'react-redux';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport InventoryLoadError from './InventoryLoadError';\nimport classNames from 'classnames';\nvar BaseDetailWrapper = function (props) {\n    var history = useHistory();\n    var store = useStore();\n    var Cmp = props.component;\n    return (React.createElement(Cmp, { className: classNames(props.className, 'inventory') },\n        React.createElement(Suspense, { fallback: props.fallback },\n            React.createElement(ScalprumComponent, __assign({ history: history, store: store, appName: \"inventory\", module: \"./DetailWrapper\", scope: \"inventory\", ErrorComponent: React.createElement(InventoryLoadError, __assign({ component: \"InventoryDetailHead\", history: history, store: store }, props)), ref: props.innerRef }, props)))));\n};\nBaseDetailWrapper.propTypes = {\n    fallback: PropTypes.node,\n    innerRef: PropTypes.object,\n    component: PropTypes.string,\n    className: PropTypes.string,\n};\nvar DetailWrapper = React.forwardRef(function (props, ref) { return React.createElement(BaseDetailWrapper, __assign({ innerRef: ref }, props)); });\nDetailWrapper.propTypes = {\n    fallback: PropTypes.node,\n    component: PropTypes.string,\n    className: PropTypes.string,\n};\nDetailWrapper.defaultProps = {\n    fallback: (React.createElement(Bullseye, { className: \"pf-u-p-lg\" },\n        React.createElement(Spinner, { size: \"xl\" }))),\n    component: 'section',\n};\nexport default DetailWrapper;\n//# sourceMappingURL=DetailWrapper.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { ScalprumComponent } from '@scalprum/react-core';\nimport { useHistory } from 'react-router-dom';\nimport { useStore } from 'react-redux';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport InventoryLoadError from './InventoryLoadError';\nimport classNames from 'classnames';\nvar BaseInventoryDetailHead = function (props) {\n    var history = useHistory();\n    var store = useStore();\n    var Cmp = props.component;\n    return (React.createElement(Cmp, { className: classNames(props.className, 'inventory') },\n        React.createElement(Suspense, { fallback: props.fallback },\n            React.createElement(ScalprumComponent, __assign({ history: history, store: store, appName: \"inventory\", module: \"./InventoryDetailHead\", scope: \"inventory\", ErrorComponent: React.createElement(InventoryLoadError, __assign({ component: \"InventoryDetailHead\", history: history, store: store }, props)), ref: props.innerRef }, props)))));\n};\nBaseInventoryDetailHead.propTypes = {\n    fallback: PropTypes.node,\n    innerRef: PropTypes.object,\n    component: PropTypes.string,\n    className: PropTypes.string,\n};\nvar InventoryDetailHead = React.forwardRef(function (props, ref) { return React.createElement(BaseInventoryDetailHead, __assign({ innerProps: ref }, props)); });\nInventoryDetailHead.propTypes = {\n    fallback: PropTypes.node,\n    component: PropTypes.string,\n    className: PropTypes.string,\n};\nInventoryDetailHead.defaultProps = {\n    fallback: (React.createElement(Bullseye, { className: \"pf-u-p-lg\" },\n        React.createElement(Spinner, { size: \"xl\" }))),\n    component: 'section',\n};\nexport default InventoryDetailHead;\n//# sourceMappingURL=InventoryDetailHead.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { ScalprumComponent } from '@scalprum/react-core';\nimport { useHistory } from 'react-router-dom';\nimport { useStore } from 'react-redux';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport InventoryLoadError from './InventoryLoadError';\nimport classNames from 'classnames';\nvar BaseAppInfo = function (props) {\n    var history = useHistory();\n    var store = useStore();\n    var Cmp = props.component;\n    return (React.createElement(Cmp, { className: classNames(props.className, 'inventory') },\n        React.createElement(Suspense, { fallback: props.fallback },\n            React.createElement(ScalprumComponent, __assign({ history: history, store: store, appName: \"inventory\", module: \"./AppInfo\", scope: \"inventory\", ErrorComponent: React.createElement(InventoryLoadError, __assign({ component: \"InventoryDetailHead\", history: history, store: store }, props)), ref: props.innerRef }, props)))));\n};\nBaseAppInfo.propTypes = {\n    fallback: PropTypes.node,\n    innerRef: PropTypes.object,\n    component: PropTypes.string,\n    className: PropTypes.string,\n};\nvar AppInfo = React.forwardRef(function (props, ref) { return React.createElement(BaseAppInfo, __assign({ innerRef: ref }, props)); });\nAppInfo.propTypes = {\n    fallback: PropTypes.node,\n    component: PropTypes.string,\n    className: PropTypes.string,\n};\nAppInfo.defaultProps = {\n    fallback: (React.createElement(Bullseye, { className: \"pf-u-p-lg\" },\n        React.createElement(Spinner, { size: \"xl\" }))),\n    component: 'section',\n};\nexport default AppInfo;\n//# sourceMappingURL=AppInfo.js.map","import { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { addNotification, clearNotifications } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouteMatch } from 'react-router-dom';\nimport { fetchSystemDetails, optOutSystemsAction } from '../../../Store/Actions/Actions';\nimport { systemDetailsPageStore } from '../../../Store/Reducers/SystemDetailsPageStore';\nimport ReducerRegistry from '../../../Utilities/ReducerRegistry';\nimport Header from '../../PresentationalComponents/Header/Header';\nimport { useIntl } from 'react-intl';\nimport {\n    NotAuthorizedNotification,\n    PATHS,\n    PERMISSIONS,\n    ReadOnlyNotification\n} from '../../../Helpers/constants';\nimport messages from '../../../Messages';\n\nimport { AppInfo, DetailWrapper, InventoryDetailHead } from '@redhat-cloud-services/frontend-components/Inventory';\nimport { useRbac } from '../../../Helpers/Hooks';\n\nconst InventoryDetail = () => {\n    const dispatch = useDispatch();\n    const match = useRouteMatch();\n    const intl = useIntl();\n\n    const { entity, loaded, opt_out: isOptOut } = useSelector(state => state.entityDetails) ?? {};\n    const errors = useSelector(({ SystemCvesStore }) => SystemCvesStore.cveList.payload.errors);\n\n    const [[canSetExcludedIncluded]] = useRbac([PERMISSIONS.setExcludedIncluded]);\n\n    const inventoryId = match.params.inventoryId;\n\n    useEffect(() => {\n        dispatch(fetchSystemDetails(inventoryId));\n    }, [dispatch, inventoryId]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearNotifications());\n        };\n    }, [dispatch]);\n\n    const notifications = systemName => ({\n        exclude: {\n            success: {\n                variant: 'success',\n                title: intl.formatMessage(messages.notificationExcludeSuccess, { count: 1, systemName })\n            },\n            failure: {\n                variant: 'danger',\n                autoDismiss: false,\n                title: intl.formatMessage(messages.notificationExcludeFailureTitle, { count: 1, systemName }),\n                description: intl.formatMessage(messages.notificationDetailExcludeFailureBody, { count: 1 })\n            }\n        },\n        include: {\n            success: {\n                variant: 'success',\n                title: intl.formatMessage(messages.notificationIncludeSuccessTitle, { count: 1, systemName }),\n                description: intl.formatMessage(messages.notificationIncludeSuccessBody, { count: 1 })\n            },\n            failure: {\n                variant: 'danger',\n                autoDismiss: false,\n                title: intl.formatMessage(messages.notificationIncludeFailureTitle, { count: 1, systemName }),\n                description: intl.formatMessage(messages.notificationDetailIncludeFailureBody, { count: 1 })\n            }\n        }\n    });\n\n    const handleOptOutSystem = (systemName, toExclude) => {\n        dispatch(optOutSystemsAction([inventoryId], toExclude)).then(() => {\n            dispatch(fetchSystemDetails(inventoryId));\n            dispatch(addNotification(toExclude\n                ? notifications(systemName).exclude.success\n                : notifications(systemName).include.success));\n        }).catch(error => {\n            dispatch(addNotification(\n                error.status === '503' ? ReadOnlyNotification :\n                    error.status === '403' ? NotAuthorizedNotification :\n                        toExclude\n                            ? notifications(systemName).exclude.failure\n                            : notifications(systemName).include.failure));\n        });\n    };\n\n    return (\n        <DetailWrapper>\n            <section className=\"inventory\">\n                <Header\n                    title=\"\"\n                    breadcrumbs={[\n                        {\n                            title: PATHS.systemsPage.title,\n                            to: PATHS.systemsPage.to,\n                            loaded: true\n                        },\n                        {\n                            title: entity?.display_name || intl.formatMessage(messages.invalidSystem),\n                            isActive: true,\n                            loaded\n                        }\n                    ]}\n                >\n                    {!errors && (\n                        <InventoryDetailHead\n                            onLoad={({ mergeWithEntities, mergeWithDetail, INVENTORY_ACTION_TYPES }) => {\n                                ReducerRegistry.register({\n                                    ...mergeWithEntities(),\n                                    ...mergeWithDetail(systemDetailsPageStore(\n                                        INVENTORY_ACTION_TYPES, handleOptOutSystem\n                                    ))\n                                });\n                            }}\n                            hideBack\n                            actions={\n                                entity && canSetExcludedIncluded && [\n                                    isOptOut\n                                        ? {\n                                            title: intl.formatMessage(messages.inventoryKebabOptionsResume),\n                                            onClick: () => handleOptOutSystem(entity?.display_name, false)\n                                        }\n                                        : {\n                                            title: intl.formatMessage(messages.inventoryKebabOptionsExclude),\n                                            onClick: () => handleOptOutSystem(entity?.display_name, true)\n                                        }\n                                ]\n                            }\n                        />\n                    )}\n                </Header>\n            </section>\n            <Main>\n                <AppInfo optOutSystemHandler={handleOptOutSystem} />\n            </Main>\n        </DetailWrapper>\n    );\n};\n\nexport default InventoryDetail;\n"],"names":["_a","component","props","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","__rest","useEffect","console","error","concat","SystemDetails","optOutSystemHandler","useSelector","state","entityDetails","entity","loaded","isOptOut","opt_out","useRbac","PERMISSIONS","canExport","canReadVulnerabilityResults","canEditPairStatus","canReadExcluded","Spinner","centered","buttonAction","display_name","title","intl","messages","id","showHeaderLabel","setPageTitle","propTypes","initialState","__assign","assign","n","arguments","apply","this","BaseDetailWrapper","history","store","Cmp","className","Suspense","fallback","ScalprumComponent","appName","module","scope","ErrorComponent","InventoryLoadError","ref","innerRef","DetailWrapper","defaultProps","Bullseye","size","BaseInventoryDetailHead","InventoryDetailHead","innerProps","BaseAppInfo","AppInfo","dispatch","useDispatch","match","useRouteMatch","useIntl","errors","SystemCvesStore","cveList","payload","canSetExcludedIncluded","inventoryId","params","fetchSystemDetails","clearNotifications","notifications","systemName","exclude","success","variant","formatMessage","count","failure","autoDismiss","description","include","handleOptOutSystem","toExclude","optOutSystemsAction","then","addNotification","status","ReadOnlyNotification","NotAuthorizedNotification","Header","breadcrumbs","PATHS","to","isActive","onLoad","mergeWithEntities","mergeWithDetail","INVENTORY_ACTION_TYPES","ReducerRegistry","action","type","FETCH_SYSTEM_DETAILS","data","LOAD_ENTITY_FULFILLED","activeApps","name","LOAD_ENTITY_REJECTED","systemDetailsPageStore","hideBack","actions","onClick","Main"],"sourceRoot":""}