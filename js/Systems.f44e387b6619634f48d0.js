"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[743],{75584:(e,t,r)=>{r.r(t),r.d(t,{default:()=>oe});var n=r(42646),o=r(8281),a=r(4942),s=r(84506),l=r(77865),c=r.n(l),i=r(86896),u=r(30893),f=r(14494),p=r(45697),d=r.n(p),m=r(74806),b=r(5977),y=r(29648),v=r(83594),g=r(49629),O=r(95351),h=r(15248),w=r(62215),P=r(87462),j=r(15861),Z=r(45987),S=r(87757),E=r.n(S),D=r(3968),R=r(71478),k=r(43198),_=r(62598),x=r(6208),F=r(37450),C=["filters","params","reportData","buttonProps","label"];function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(e){var t=e.filters,r=e.params,a=e.reportData,s=void 0===a?{}:a,f=e.buttonProps,p=e.label,d=(0,Z.Z)(e,C),m=(0,i.Z)(),b=(0,l.useState)(!1),v=(0,n.Z)(b,2),g=v[0],O=v[1],h=(0,F.lm)(),S=function(e){return(0,y.F3)(e,x.tp.systemsReportRestPages)},M=function(){var e=(0,j.Z)(E().mark((function e(){var n,a,l,c,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),h({msg:m.formatMessage(u.Z.customReportNotificationSystem)}),e.next=4,(0,R.vk)(I(I({},r),w.Z.defaultParams));case 4:return n=e.sent,a=n.data,l=n.meta,c=(0,k.Z)({data:a.splice(0,x.tp.systemsReportFirstPage),meta:l,filters:t,intl:m}),i=S(a),O(!1),e.abrupt("return",[c].concat((0,o.Z)(i.map((function(e,t){return(0,_.Z)({data:e,page:t,intl:m,header:s&&s.header})})))));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c().createElement("div",null,c().createElement(D.o6,(0,P.Z)({},d,{label:g?m.formatMessage(u.Z.loading):m.formatMessage(p),asyncFunction:M,buttonProps:I({component:"button"},f),reportName:m.formatMessage(u.Z.systemPDFReportName),type:"",fileName:"".concat(w.Z.filename("system-list"),".pdf"),allPagesHaveTitle:!1,size:"A4",orientation:"landscape"})))};N.defaultProps={label:u.Z.kebabExportAsPDF},N.propTypes={filters:d().oneOfType([d().array,d().object]),params:d().object,reportData:d().object,buttonProps:d().object,label:d().oneOfType([d().array,d().object])};const T=N;var B=r(41489),A=r(89421),H=r(32132);const V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.excluded,n=function(t){e({excluded:t.length>0?null==t?void 0:t.join(","):void 0,page:1})};return{label:H.N.formatMessage(u.Z.filterSystemsIncludedInAnalysis),type:A.Yu.checkbox,urlParam:"excluded",filterValues:{onChange:function(e,t){n(t)},items:x._9.map((function(e){return{label:e.label,value:e.value}})),value:(null==r?void 0:r.length)>0?null==r?void 0:r.split(","):void 0}}};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(e){var t=e.selectedRows,r=e.totalSelectedRows,o=e.intl,a=e.parameters,s=e.systems,i=e.methods,f=(0,l.useState)(!1),p=(0,n.Z)(f,2),d=p[0],m=p[1],b=i.apply,y=i.handleSelect,P=i.doOptOut,j=(0,l.useMemo)((function(){var e=null==s?void 0:s.data.filter((function(e){return!0===t[e.id]}));return{selectedExcluded:e.some((function(e){return!0===e.opt_out})),selectedIncluded:e.some((function(e){return!1===e.opt_out}))}}),[t,s]),Z=["",{label:o.formatMessage(u.Z.systemKebabExcludeAnalysis,{count:r}),onClick:function(){return P(null,!0)},props:{isDisabled:!r||!j.selectedIncluded}},{label:o.formatMessage(u.Z.systemKebabIncludeAnalysis,{count:r}),onClick:function(){return P(null,!1)},props:{isDisabled:!r||!j.selectedExcluded}}],S=(0,F.ZS)({rawData:s,selectedRows:t,totalSelectedRows:r,handleSelect:y,fetchResource:function(e){return(0,v.ip)(U(U({},a),e))}});return c().createElement(l.Fragment,null,c().createElement(g.Z,{className:"vuln-systems-primary-toolbar",bulkSelect:S,actionsConfig:{actions:Z,kebabToggleProps:{isDisabled:!r||0===s.meta.total_items},dropdownProps:{ouiaId:"toolbar-actions"}},filterConfig:{items:[(0,O.Z)("filter",u.Z.systemsSearchName,u.Z.searchFilterByName,a.filter,b),V(b,a)]},activeFiltersConfig:{filters:(0,h.DU)(a),onDelete:function(e,t,r){return(0,h.vH)(t,i.apply,r,x.Sy)},deleteTitle:o.formatMessage(u.Z.resetFilters),showDeleteButton:!(0,h.Yy)(a,x.Sy,x.D2)},exportConfig:U({isDisabled:0===s.meta.total_items,extraItems:[(0,B.Ec)(d,m)],ouiaId:"export"},(0,h.HV)({downloadReport:function(e){var t=U({},a);w.Z.exec(v.lc,t,e,"system-list")}}))}),d&&c().createElement(T,{showButton:!1,params:a,filters:(0,h.DU)(a),onSuccess:function(){return m(!1)}}))};q.propTypes={systems:y.nE,parameters:d().object,selectedRows:d().array,totalSelectedRows:d().number,methods:d().shape({doOptOut:d().func,apply:d().func,handleSelect:d().func}),intl:d().any};const z=(0,b.EN)((0,m.ZP)(q));var Y=r(83296),L=r(86350),W=r(43003),G=r(75115),J=r(57998),Q=r(33739),X=r(66123),$=r(14112),ee=r(75863),te=r(12140);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const oe=function(){var e=c().createRef(),t=(0,f.useDispatch)(),r=(0,i.Z)(),a=(0,y.H1)(x.IV),p=(0,n.Z)(a,2),d=p[0],m=p[1],b=(0,f.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.rows)||[]}),f.shallowEqual),g=(0,f.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.total})),O=(0,f.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRows)||{}})),h=Object.keys(O).length||0,w=(0,f.useSelector)((function(e){return e.SystemsPageStore.params}),f.shallowEqual),P=(0,f.useSelector)((function(e){return e.SystemsPageStore.error})),j=P.hasError,Z=P.errorCode;(0,l.useEffect)((function(){return function(){t((0,v.re)()),t((0,v.r5)())}}),[t]);var S=function(e){return t((0,v.SF)(e))};(0,l.useEffect)((function(){return S(d)}),[]),(0,te.Z)((function(){return m(ne({},w))}),[w]);var E=(0,F.a9)({selectedRows:O,totalSelectedRows:h,onRefreshInventory:function(){return t((0,v.r5)()),e.current.onRefreshData({page:1})}}),D=(0,l.useMemo)((function(){return D?D++:0}),[]),k=(0,F.U)(R.vk,m);return c().createElement(l.Fragment,null,c().createElement(G.Z,{title:r.formatMessage(u.Z.systemsHeader),showBreadcrumb:!1}),c().createElement(L.Z,null,c().createElement(l.Fragment,null,j?c().createElement(X.Z,{code:Z}):c().createElement(Q.Z,{disableDefaultColumns:!0,onLoad:function(e){var t=e.mergeWithEntities;Y.Z.register(ne({},t((0,J.K)(x.Bi))))},tableProps:{isStickyHeader:!0,canSelectAll:!1,actionResolver:(null==b?void 0:b.length)>0&&function(e){return(0,W.zs)(e,E)},variant:ee.B.compact},showTagModal:!0,isFullView:!0,ref:e,autoRefresh:!0,customFilters:{vulnerabilityParams:ne({},w)},hasCheckbox:0!==(null==b?void 0:b.length),columnCounter:D,columns:function(e){return function(e){var t=(0,s.Z)(x.Bi),r=t[0],n=t.slice(1),a=e.find((function(e){return"updated"===e.key})),l=e.find((function(e){return"tags"===e.key}));return l=ne(ne({},l),{},{props:{width:10,isStatic:!0}}),a=ne(ne({},a),{},{transforms:[$.P8],cellTransforms:[$.P8],props:{width:20}}),[r,l].concat((0,o.Z)(n),[a])}(e)},getEntities:k,hideFilters:{all:!0}},c().createElement(z,{parameters:w,systems:{data:b,meta:{total_items:g}},selectedRows:O,totalSelectedRows:h,methods:{doOptOut:E,apply:S,handleSelect:function(e){return t((0,v.hd)(e))}},actions:!0})))))}}}]);
//# sourceMappingURL=../sourcemaps/Systems.b6b5857e3b9e2708fb5d.js.map