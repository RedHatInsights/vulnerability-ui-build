"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[743],{75584:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ae});var n=r(4942),o=r(29439),a=r(77865),s=r.n(a),l=r(86896),c=r(30893),i=r(28216),u=r(45697),f=r.n(u),p=r(74806),d=r(5977),m=r(29648),b=r(83594),v=r(49629),y=r(95351),g=r(15248),O=r(62215),w=r(87462),h=r(93433),Z=r(15861),P=r(45987),D=r(87757),j=r.n(D),S=r(3968),E=r(71478),R=r(43198),C=r(62598),k=r(6208),M=r(37450),_=["filters","params","reportData","buttonProps","label"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=function(e){var t=e.filters,r=e.params,n=e.reportData,i=void 0===n?{}:n,u=e.buttonProps,f=e.label,p=(0,P.Z)(e,_),d=(0,l.Z)(),b=(0,a.useState)(!1),v=(0,o.Z)(b,2),y=v[0],g=v[1],D=(0,M.lm)(),F=(0,o.Z)(D,2),I=F[0],N=F[1],T=k.tp.systemsReportRestPages,B=k.tp.systemsReportFirstPage;(0,a.useEffect)((function(){g(!0),I({msg:d.formatMessage(c.Z.notificationReportDownloadStart)})}),[]);var A=function(e){return(0,m.F3)(e,T)},H=function(){var e=(0,Z.Z)(j().mark((function e(){var n,o,a,s,l;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,E.vk)(x(x({},r),O.Z.defaultParams));case 3:a=e.sent,n=a.data,o=a.meta,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(0),N(),I({variant:"danger",autoDismiss:!1,msg:d.formatMessage(c.Z.notificationReportDownloadFailureTitle),description:d.formatMessage(c.Z.notificationReportDownloadFailureBody)}),e.abrupt("return",[]);case 13:return s=(0,R.Z)({data:n.splice(0,B),meta:o,filters:t,intl:d}),l=A(n),g(!1),N(),I({variant:"success",msg:d.formatMessage(c.Z.notificationReportDownloadSuccess)}),e.abrupt("return",[s].concat((0,h.Z)(l.map((function(e,t){return(0,C.Z)({data:e,page:t,intl:d,header:i&&i.header})})))));case 19:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return s().createElement("div",null,s().createElement(S.o6,(0,w.Z)({},p,{fallback:null,label:y?d.formatMessage(c.Z.loading):d.formatMessage(f),asyncFunction:H,buttonProps:x({component:"button"},u),reportName:d.formatMessage(c.Z.systemPDFReportName),type:"",fileName:"".concat(O.Z.filename("system-list"),".pdf"),allPagesHaveTitle:!1,size:"A4",orientation:"landscape"})))};I.defaultProps={label:c.Z.kebabExportAsPDF},I.propTypes={filters:f().oneOfType([f().array,f().object]),params:f().object,reportData:f().object,buttonProps:f().object,label:f().oneOfType([f().array,f().object])};const N=I;var T=r(41489),B=r(44612),A=r(32132);const H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.excluded,n=function(t){e({excluded:t.length>0?null==t?void 0:t.join(","):void 0,page:1})};return{label:A.N.formatMessage(c.Z.filterSystemsIncludedInAnalysis),type:B.Y.checkbox,urlParam:"excluded",filterValues:{onChange:function(e,t){n(t)},items:k._9.map((function(e){return{label:e.label,value:e.value}})),value:(null==r?void 0:r.length)>0?null==r?void 0:r.split(","):void 0}}};var U=r(83215),V=r(92162);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=function(e){var t=e.selectedRows,r=e.selectedRowsCount,n=e.selectedRowsRawData,l=e.intl,u=e.parameters,f=e.rawData,p=e.methods,d=(0,a.useState)(!1),m=(0,o.Z)(d,2),w=m[0],h=m[1],Z=p.apply,P=p.handleSelect,D=p.doOptOut,j=p.setColumnModalOpen,S=(0,i.I0)(),E=(0,a.useMemo)((function(){return{selectedExcluded:n.some((function(e){return!0===e.opt_out})),selectedIncluded:n.some((function(e){return!1===e.opt_out}))}}),[n]),R=["",{label:l.formatMessage(c.Z.systemKebabExcludeAnalysis,{count:r}),onClick:function(){return D(t,null==n?void 0:n[0].display_name,!0)},props:{isDisabled:!r||!E.selectedIncluded}},{label:l.formatMessage(c.Z.systemKebabIncludeAnalysis,{count:r}),onClick:function(){return D(t,null==n?void 0:n[0].display_name,!1,t)},props:{isDisabled:!r||!E.selectedExcluded}},{label:l.formatMessage(c.Z.columnManagementModalTitle),onClick:function(){return j(!0)}}],C=(0,M.ZS)({rawData:f,selectedRows:t,selectedRowsCount:r,handleSelect:P,fetchResource:function(e){return(0,b.ip)(K(K({},u),e))}});return s().createElement(a.Fragment,null,s().createElement(v.Z,{className:"vuln-systems-primary-toolbar",bulkSelect:C,actionsConfig:{actions:R,dropdownProps:{ouiaId:"toolbar-actions"}},filterConfig:{items:[(0,y.Z)("filter",c.Z.systemsSearchName,c.Z.searchFilterByName,u.filter,Z),H(Z,u),(0,V.Z)(u.rhel_version,Z)]},activeFiltersConfig:{filters:(0,g.DU)(u),onDelete:function(e,t,r){return(0,g.vH)(t,p.apply,r,k.Sy)},deleteTitle:l.formatMessage(c.Z.resetFilters),showDeleteButton:!(0,g.Yy)(u,k.Sy,k.D2)},exportConfig:K({isDisabled:0===f.meta.totalItems,extraItems:[(0,T.Ec)(w,h)],ouiaId:"export"},(0,g.HV)({downloadReport:function(e){var t=K({},u);O.Z.exec(b.lc,t,e,"system-list",(function(e){return S((0,U.wN)(e))}),(function(){return S((0,U.L1)())}))}}))}),w&&s().createElement(N,{showButton:!1,params:u,filters:(0,g.DU)(u),onSuccess:function(){return h(!1)}}))};L.propTypes={rawData:m.nE,parameters:f().object,selectedRows:f().array,selectedRowsCount:f().number,selectedRowsRawData:f().array,methods:f().shape({doOptOut:f().func,apply:f().func,handleSelect:f().func,setColumnModalOpen:f().func}),intl:f().any};const Y=(0,d.EN)((0,p.ZP)(L));var W=r(83296),q=r(86350),G=r(43003),J=r(75115),Q=r(15768),X=r(33739),$=r(66123),ee=r(75863),te=r(24788),re=r(66761);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ae=function(){var e=s().createRef(),t=(0,i.I0)(),r=(0,l.Z)(),n=(0,m.H1)(k.IV),u=(0,o.Z)(n,2),f=u[0],p=u[1],d=(0,i.v9)((function(e){var t=e.entities;return(null==t?void 0:t.rows)||[]}),i.wU),v=(0,i.v9)((function(e){var t=e.entities;return null==t?void 0:t.total})),y=(0,i.v9)((function(e){var t=e.entities;return null==t?void 0:t.meta})),g=(0,i.v9)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRows)||{}})),O=(0,i.v9)((function(e){var t=e.entities;return null==t?void 0:t.selectedRowsCount})),w=(0,i.v9)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRowsRawData)||[]})),h=(0,i.v9)((function(e){var t=e.entities;return(null==t?void 0:t.loaded)||!1})),Z=(0,i.v9)((function(e){return e.SystemsPageStore.params}),i.wU),P=(0,i.v9)((function(e){return e.SystemsPageStore.error})),D=P.hasError,j=P.errorCode,S=(0,i.v9)((function(e){return e.SystemsPageStore.columns})),R=(0,a.useState)(!1),C=(0,o.Z)(R,2),_=C[0],F=C[1];(0,a.useEffect)((function(){return function(){t((0,b.re)()),t((0,b.r5)())}}),[t]);var x=function(e){return t((0,b.SF)(e))};(0,a.useEffect)((function(){return x(f)}),[]),(0,a.useEffect)((function(){return p(oe(oe({},Z),y))}),[p,Z,y]);var I=(0,M.a9)((function(){return t((0,b.r5)()),e.current.onRefreshData({page:1})})),N=(0,M.U)(E.vk,{}),T=(0,a.useState)(0),B=(0,o.Z)(T,2),A=B[0],H=B[1];return(0,a.useEffect)((function(){return H(A+1)}),[S]),s().createElement(a.Fragment,null,s().createElement(re.Z,{appliedColumns:S,applyColumns:function(e){return t((0,b.Ce)(e))},isModalOpen:_,setModalOpen:F}),s().createElement(J.Z,{title:r.formatMessage(c.Z.vulnerabilitySystemsHeader),showBreadcrumb:!1}),s().createElement(q.Z,null,D?s().createElement($.Z,{code:j}):s().createElement(X.Z,{disableDefaultColumns:!0,onLoad:function(e){var t=e.mergeWithEntities;W.Z.register(oe({},t((0,Q.K)(S),oe({page:Number(Z.page||1),perPage:Number(Z.page_size||20)},Z.sort&&{sortBy:{key:Z.sort.replace(/^-/,""),direction:Z.sort.match(/^-/)?"desc":"asc"}}))))},tableProps:{isStickyHeader:!0,canSelectAll:!1,actionResolver:v>0&&function(e){return(0,G.zs)(e,I)},variant:ee.B.compact},showTagModal:!0,isFullView:!0,ref:e,autoRefresh:!0,customFilters:{vulnerabilityParams:oe({},Z)},columnsCounter:A,columns:function(e){return t=e,S.filter((function(e){var t;return null!==(t=e.isShown)&&void 0!==t?t:e.isShownByDefault})).map((function(e){return oe(oe({},t.find((function(t){var r=t.key;return e.key===r}))),e)}));var t},getEntities:N,hideFilters:{all:!0},noSystemsTable:s().createElement(te.UE,null)},s().createElement(Y,{parameters:Z,rawData:{data:d,meta:{totalItems:v},isLoaded:h},selectedRows:g,selectedRowsCount:O,selectedRowsRawData:w,methods:{doOptOut:I,apply:x,handleSelect:function(e){return t((0,b.hd)(e))},setColumnModalOpen:F},actions:!0}))))}}}]);
//# sourceMappingURL=../sourcemaps/Systems.5de836f1e0fd6757f8d070b0745a3884.js.map