(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[602],{39602:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(67154),a=r.n(n),s=r(87757),o=r.n(s),i=r(319),c=r.n(i),u=r(59713),p=r.n(u),l=r(48926),f=r.n(l),b=r(63038),m=r.n(b),v=r(6479),d=r.n(v),y=r(25558),g=r.n(y),_=r(45697),h=r.n(_),P=r(86896),O=r(58141),j=r(92339),D=r(81815),Z=r(18623),k=r(58504),w=r(7255),F=r(64739),N=r(59912),R=r(89736),x=r(94949),E=r(25098);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(e){var t=e.filters,r=e.params,n=e.reportData,s=void 0===n?{}:n,i=e.buttonProps,u=e.isReportDynamic,p=void 0!==u&&u,l=e.label,b=d()(e,["filters","params","reportData","buttonProps","isReportDynamic","label"]),v=(0,P.Z)(),_=(0,y.useState)(!1),h=m()(_,2),M=h[0],T=h[1],C=(0,y.useState)(!1),A=m()(C,2),H=A[0],U=A[1],W=(0,E.l)(),z=function(e){return(0,D.F3)(e,N.tp.otherPages,!0)},L=function(){var e=f()(o().mark((function e(){var n,a,i,u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),W({msg:v.formatMessage(Z.Z.customReportNotificationCve)}),e.next=4,(0,j.dH)(S(S(S({},r),F.Z.defaultParams),{},{sort:r.sort||"-cvss_score",affecting:"true,false"}));case 4:if(n=e.sent,a=n.data,i=n.meta,!s||!s.userNotes){e.next=11;break}return e.next=10,insights.chrome.auth.getUser();case 10:u=e.sent;case 11:return a=a.map((function(e){var t;return S(S({},e),{},{attributes:S(S({},e.attributes),{},{status:N.Em.find((function(t){return t.value===e.attributes.status_id.toString()})).label,business_risk:N.eF.find((function(t){return t.value===e.attributes.business_risk_id.toString()})).label,impact:(null===(t=N.cv[e.attributes.impact])||void 0===t?void 0:t.title)||v.formatMessage(Z.Z.impactListUnknown),cvss_score:parseFloat(e.attributes.cvss3_score||e.attributes.cvss2_score).toFixed(1)})})})),U((function(){var e,t=a.some((function(e){return e.attributes.rules.length>0}));return p?t&&s&&(null===(e=s.header)||void 0===e?void 0:e.includes("rule_presence")):t})),l=(0,k.Z)({data:a.splice(0,s.userNotes?N.tp.firstPageWithNote:N.tp.firstPageWithoutNote),meta:i,filters:t,intl:v,isReportDynamic:p,reportData:s,user:u,type:"cves"}),f=z(a),T(!1),e.abrupt("return",[l].concat(c()(f.map((function(e,t){return(0,w.Z)({data:e,page:t,intl:v,header:s&&s.header,type:"cves",isReportDynamic:p})})))));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g().createElement("div",null,g().createElement(O.o6,a()({},b,{label:M?v.formatMessage(Z.Z.loading):v.formatMessage(l),asyncFunction:L,buttonProps:S({component:"button"},i),reportName:p?s.reportTitle:v.formatMessage(Z.Z.cvePDFReportName),type:"",fileName:"".concat(F.Z.filename(p?"reports":""),".pdf"),allPagesHaveTitle:!1,size:"A4",orientation:"landscape",footer:H&&g().createElement(R.xv,{style:x.Z.footer},v.formatMessage(Z.Z.customReportFooter))})))};T.defaultProps={label:Z.Z.kebabExportAsPDF},T.propTypes={filters:h().oneOfType([h().array,h().object]),params:h().object,reportData:h().object,buttonProps:h().object,label:h().oneOfType([h().array,h().object]),isReportDynamic:h().bool};const C=T}}]);
//# sourceMappingURL=602.114f9cb50b4b907c2be3.js.map