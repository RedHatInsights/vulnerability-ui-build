"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[662],{66516:(t,e,n)=>{n.d(e,{Z:()=>S});var i=n(29439),s=n(93149),a=n(83115),r=n(59775),u=n(49739),o=n(83826),c=n(43547),l=n(79851),f=n(35224),d=n(34512),v=n(91290),m=n(45697),y=n.n(m),p=n(77865),_=n.n(p),h=n(71478),g=n(91709),Z=n(74806),E=n(30893),b=function(t){var e=t.cveList,n=t.updateRef,m=t.inventoryList,y=t.intl,Z=t.type,b=(0,g.fj)(A()),S=b.JustificationInput,j=b.justification,P=b.setJustification,k=b.setProps,M=(0,p.useState)(function(){switch(Z){case"systemsExposed":if(m.every((function(t){return t.status_id===e[0].status_id&&t.justification===e[0].justification})))return!0;break;case"systemDetail":var t=e.every((function(t,e,n){return t.status_id===n[0].status_id&&t.justification===n[0].justification})),n=e.every((function(t){return t.status_id===t.cve_status_id&&t.justification===t.cve_justification}));if(t&&n)return!0}return!1}()),x=(0,i.Z)(M,2),C=x[0],I=x[1],w=(0,g.Hb)(L()),N=w.StatusSelect,R=w.statusId,T=w.setStatusId,D=w.setProps,U=m.map((function(t){return t.id||t.inventory_id})),O=m.map((function(t){return t.display_name}));function L(){switch(Z){case"systemsExposed":return C?e[0].status_id:m.every((function(t,e,n){return t.status_id===n[0].status_id}))?m[0].status_id:"0";case"systemDetail":return C?e.every((function(t,e,n){return t.cve_status_id===n[0].cve_status_id}))?e[0].cve_status_id:"0":e.every((function(t,e,n){return t.status_id===n[0].status_id}))?e[0].status_id:"0"}}function A(){switch(Z){case"systemsExposed":return C?e[0].justification:m.every((function(t,e,n){return t.justification===n[0].justification}))&&m[0].justification||"";case"systemDetail":return C?e.every((function(t,e,n){return t.cve_justification===n[0].cve_justification}))&&e[0].cve_justification||"":e.every((function(t,e,n){return t.justification===n[0].justification}))&&e[0].justification||""}}(0,p.useEffect)((function(){D({isDisabled:C,ouiaId:"status-select"}),k({disabled:C}),T(L()),P(A())}),[C,D,k]);var B={variant:"success",title:"systemsExposed"===Z?y.formatMessage(E.Z.notificationSystemStatusUpdateSuccessful,{count:m.length||0,systemName:O[0]}):y.formatMessage(E.Z.notificationStatusUpdateSuccessful,{count:e.length||0})},J={variant:"danger",autoDismiss:!1,title:y.formatMessage(E.Z.notificationStatusUpdateFailureTitle),description:y.formatMessage(E.Z.notificationStatusUpdateFailureBody)},F=y.formatMessage(E.Z.cvePairStatusModalTitle,{count:U.length*e.length});return _().createElement(g.ZP,{items:e,onSave:function(){var t=e.map((function(t){return t.id})),i=C?{cve:t,inventory_id:U}:{status_id:parseInt(R),cve:t,status_text:j,inventory_id:U};return(0,h.cr)(i).then(n)},onSuccessNotification:B,onFailureNotification:J,title:F,ouiaId:"status-modal"},_().createElement(u.K,{hasGutter:!0},function(){switch(Z){case"systemsExposed":return m.some((function(t,e,n){return t.status_id!==n[0].status_id}));case"systemDetail":return e.some((function(t,e,n){return t.status_id!==n[0].status_id}))}}()&&_().createElement(o.v,null,_().createElement(c.b,{variant:"warning",isInline:!0,title:y.formatMessage(E.Z.cvePairStatusModalAlert)})),_().createElement(o.v,null,y.formatMessage(E.Z.cvePairStatusModalSelected,{cveCount:e.length||0,cveId:e[0].id,systemCount:m.length||0,systemName:O[0],b:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _().createElement("b",null,e)}})),_().createElement(o.v,null,_().createElement(a.l,{key:"key"},_().createElement(r.c,{fieldId:"overall"},_().createElement(l.P,null,_().createElement(d.J,null,_().createElement(s.X,{label:y.formatMessage(E.Z.cvePairStatusModalUseOverallCheckbox),id:"alt-form-checkbox-1",name:"alt-form-checkbox-1",isChecked:C,onChange:function(t){return I(t)}})),_().createElement(d.J,null,_().createElement(f.u,{content:y.formatMessage(E.Z.cvePairStatusModalUseOverallTooltip)},_().createElement(v.ZP,{className:"pf-u-ml-xs",color:"var(--pf-global--Color--200)",style:{verticalAlign:"0"}}))))),N,S))))};b.propTypes={cveList:y().array,updateRef:y().func,inventoryList:y().array,intl:y().any,type:y().oneOf(["systemsExposed","systemDetail"])};const S=(0,Z.ZP)(b)},16493:(t,e,n)=>{n.d(e,{Z:()=>S});var i=n(29439),s=n(93433),a=n(15671),r=n(43144),u=n(60136),o=n(82963),c=n(61120),l=n(77865),f=n.n(l),d=n(45697),v=n.n(d),m=n(83215),y=n(84914),p=n(16712),_=n(36873),h=n(14494),g=n(30893),Z=n(44012),E=n(29648);var b=function(t){(0,u.Z)(d,t);var e,n,l=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,c.Z)(e);if(n){var s=(0,c.Z)(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return(0,o.Z)(this,t)});function d(){var t,e;(0,a.Z)(this,d);for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return(0,o.Z)(e,(t=e=l.call.apply(l,[this].concat(r)),e.baseIssueTemplate=function(t,e){return{id:"vulnerabilities:".concat(t),description:t,systems:[e]}},e.remediationProvider=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[].concat(t),u=[].concat(n),o=[];if(a&&1===r.length&&(o=u.reduce((function(t,n){var i,a=n.id,r=n.cve,u=n.rule,o=e.baseIssueTemplate(r,a);return u&&(o.id="".concat(o.id,":").concat(null==u||null===(i=u.rule)||void 0===i?void 0:i.rule_id)),[].concat((0,s.Z)(t),[o])}),[]),o=(0,E.X8)(o,"systems")),!a&&1===(null==u?void 0:u.length)){var c=(0,i.Z)(u,1),l=c[0];o=r.reduce((function(t,n){var i=n.id,a=n.rules,r=e.baseIssueTemplate(i,l);return null!=a&&a.rule_id&&(r.id="".concat(r.id,":").concat(a.rule_id)),[].concat((0,s.Z)(t),[r])}),[])}return!(!r.length||!u.length)&&{issues:o}},t))}return(0,r.Z)(d,[{key:"shouldComponentUpdate",value:function(t){return t.cves!==this.props.cves||t.systems!==this.props.systems}},{key:"render",value:function(){var t=this,e=this.props,n=e.cves,i=e.systems,s=e.manyRules,a=e.addNotification;return f().createElement("div",null,f().createElement(y.Z,{dataProvider:function(){return t.remediationProvider(n,i,s)},isDisabled:0===n.length||0===i.length,onRemediationCreated:function(t){return a(t.getNotification())}},f().createElement(p.ZP,{size:"sm",color:"var(--pf-global--BackgroundColor--100)"}),"Â ",f().createElement(Z.Z,g.Z.remediateLabel)))}}]),d}(l.Component);b.propTypes={cves:v().oneOfType([v().array,v().string]),systems:v().oneOfType([v().array,v().string]),addNotification:v().func,manyRules:v().bool};const S=(0,h.connect)(null,(function(t){return{addNotification:function(e){return t((0,m.wN)(e))}}}))((0,_.Z)(b))}}]);
//# sourceMappingURL=../sourcemaps/662.85cf2b3cc14b9ec98bf0.js.map