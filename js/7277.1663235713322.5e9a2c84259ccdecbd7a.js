(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[7277],{39994:(e,t,n)=>{"use strict";n.d(t,{d3:()=>de,QE:()=>me,ZP:()=>ve});var r=n(45987),o=n(4942),a=n(29439),c=n(77865),i=n.n(c),s=n(40306),l=n(45697),u=n.n(l),d=n(30893),p=n(87462),m=n(93433),f=n(3351),v=n(22860),y=n(6934),b=n(75863),g=n(81739),E=n(22167),h=n(29648),O=n(5938),S=n(24788);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e){var t,n=e.context,r=e.header,o=e.entity,a=e.canSelect,s=n.cves,l=n.methods,u=n.selectedCves,p=n.expandedRows,P=n.canEditPairStatus;null!=s&&null!==(t=s.meta)&&void 0!==t&&t.patch_access||(r=r.filter((function(e){return"advisory"!==e.key})));var Z=!s.data||0===s.data.length,x=Z?[]:s.data.map((function(e){return u.find((function(t){return t.id===e.id}))&&C(C({},e),{},{selected:!0})||e})).map((function(e,t){var n=t%2==0?p.find((function(t){return t.id===e.id}))||!1:{isOpen:void 0};return C(C({},e),{},{isOpen:n&&n.isOpen})})),w=[{key:"collapse"}].concat((0,m.Z)(a?[{key:"checkbox"}]:[]),(0,m.Z)(r));return s.isLoading?i().createElement(g.Z,{colSize:6,rowSize:20,variant:b.B.compact}):i().createElement(c.Fragment,null,i().createElement(f.i,{isStickyHeader:!0,canCollapseAll:!1,canSelectAll:!1,"aria-label":"Vulnerability CVE table",cells:r,rows:Z?[{heightAuto:!0,cells:[{props:{colSpan:8},title:i().createElement(S.lP,{secondParagraph:d.Z.emptyStateThisSystemShouldHaveCVEs})}]}]:x,onSelect:a&&!Z?function(e,t,r){var o=n.systemCVEs,a=n.methods,c=o.payload.data[r/2];a.selectCves(t,c)}:void 0,actionResolver:!Z&&P&&function(e,t){return(0,E.k8)(l,o,t.rowIndex)},sortBy:Z?void 0:(0,h.hO)(w,s.meta.sort),onCollapse:Z?void 0:function(e,t,r){return function(e,t,r){var o=n.cves,a=n.methods,c=n.isAllExpanded,i=o.data[t]&&o.data[t].id;a.openCves(r,[i],c)}(0,t,r)},onSort:Z?void 0:function(e,t,n){return(0,h.L6)(t,n,w,s.meta.sort,l.apply)},gridBreakPoint:"grid-lg",ouiaId:"cves-table",variant:b.B.compact},i().createElement(c.Fragment,null,i().createElement(y.x,null),i().createElement(v.R,null))),i().createElement(O.Z,{meta:s.meta,apply:l.apply}))};Z.propTypes={context:u().any,header:u().array,entity:u().string,canSelect:u().bool};const x=function(e){return i().createElement(de.Consumer,null,(function(t){return i().createElement(Z,(0,p.Z)({context:t},e))}))};var w=n(74806),j=n(29558),_=n(28216),k=n(78733),T=n(52064),D=n(49739),M=n(83826),I=n(68340),A=n(68774),R=n(62215),B=n(66516),H=n(7092),L=n(93400),V=n(54728),F=n(95859),z=n(26410),N=n(90960),K=n(95351),q=n(16369),G=n(35938),J=n(54534),Q=n(1792),U=n(63368),X=n(15248);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(e){var t,n=e.entity,r=e.intl,o=e.context,a=e.canExport,s=e.customAction,l=e.canSelect,u=e.canManageColumns,p=e.filters,f=o.cves,v=o.systemCVEs,y=o.parameters,b=o.methods,g=o.selectedCves,E=o.isAllExpanded,h=o.canEditPairStatus,O=y.filter,S=y.advisory,P=null!==(t=null==g?void 0:g.length)&&void 0!==t?t:0,C=g.filter((function(e){return e.attributes.remediation===k.sF})),Z=(0,c.useMemo)((function(){return(0,L.Z)({selectedItems:g,selectorHandler:b.selectCves,items:f,rawItems:v,fetchResource:function(e){return b.fetchResource(W(W({},y),e))},multiRow:!0})}),[g,f,v,y,b]),x=[""].concat((0,m.Z)(h?[{label:r.formatMessage(d.Z.editStatus),onClick:function(){return b.showStatusModal(g,!0)},props:{isDisabled:!P}}]:[]),(0,m.Z)(u?[{label:r.formatMessage(d.Z.columnManagementModalTitle),onClick:function(){return b.setColumnModalOpen(!0)}}]:[])),w=[(0,K.Z)("filter",d.Z.cve,d.Z.searchFilterByCveID,O,b.apply),(0,q.Z)(b.apply,y),(0,J.Z)(b.apply,y),(0,N.Z)(b.apply,y),(0,z.Z)(b.apply,y),(0,G.Z)(b.apply,y),(0,F.Z)(b.apply,y),(0,Q.Z)(b.apply,y),(0,K.Z)("advisory",d.Z.advisory,d.Z.searchFilterByAdvisory,S,b.apply),(0,U.Z)(b.apply,y)];return i().createElement(V.Z,{pagination:{isDisabled:0===f.meta.total_items,itemCount:f.meta.total_items||0,page:f.meta.page||1,perPage:f.meta.page_size||1,ouiaId:"pagination-top",onSetPage:function(e,t){return(0,X.A6)(e,t,b.apply)},onPerPageSelect:function(e,t){return(0,X.lO)(e,t,b.apply)}},dedicatedAction:s?"function"==typeof s?s(f):s:n&&i().createElement(H.Z,{isDisabled:0===g.length,systems:n,cves:C}),actionsConfig:{actions:x,dropdownProps:{ouiaId:"toolbar-actions"}},bulkSelect:l&&{count:P,items:Z.items,isDisabled:0===f.meta.total_items&&0===P,checked:Boolean(P),ouiaId:"bulk-select",onSelect:function(){return Z.handleOnCheckboxChange()}},filterConfig:{items:p?w.filter((function(e){return p.includes(e.key)})):w},activeFiltersConfig:{filters:(0,X.DU)(y),onDelete:function(e,t){return(0,X.vH)(t,b.apply)},deleteTitle:r.formatMessage(d.Z.resetFilters)},exportConfig:a&&W({isDisabled:0===f.meta.total_items,ouiaId:"export"},(0,X.HV)(b)),expandAll:{isAllExpanded:E,onClick:function(){var e=o.cves,t=o.methods,n=o.isAllExpanded,r=!n,a=n?[]:e.data.filter((function(e){return e.id})).map((function(e){return e.id}));t.openCves(r,a,!n)},isDisabled:0===f.meta.total_items}})};Y.defaultProps={totalNumber:0,apply:function(){},downloadReport:function(){}},Y.propTypes={entity:u().string,context:u().object,intl:u().any,canExport:u().bool,customAction:u().oneOf([u().node,u().func]),canSelect:u().bool,canManageColumns:u().bool,filters:u().arrayOf(u().string)};const ee=(0,w.ZP)((function(e){return i().createElement(de.Consumer,null,(function(t){return i().createElement(Y,(0,p.Z)({context:t},e))}))}));var te=n(66123),ne=n(83215),re=n(14938),oe=n(52017);const ae=function(e){var t=e.titleText,n=void 0===t?"This system isnâ€™t connected to Insights yet":t,r=e.bodyText,o=void 0===r?"To get started, activate the Insights client for this system.":r,a=e.buttonText,c=void 0===a?"Learn how to activate the Insights client":a;return i().createElement(re.EmptyState,null,i().createElement(re.EmptyStateIcon,{icon:oe.DisconnectedIcon}),i().createElement(re.Title,{headingLevel:"h5",size:"lg"},n),i().createElement(re.EmptyStateBody,null,o),i().createElement(re.Button,{variant:"primary",component:"a",href:"http://access.redhat.com/products/cloud_management_services_for_rhel#getstarted",target:"_blank",rel:"noopener noreferrer",className:"pf-u-mt-lg"},c))};var ce=n(66761),ie=["id","attributes"],se=["customItnlProvider","customIntlProvider"];function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=(0,c.createContext)({}),pe=function(e){var t,n,o=e.entity,l=e.intl,u=e.showHeaderLabel,p=e.setPageTitle,m=e.canExport,f=e.customAction,v=e.canSelect,y=e.canEditPairStatus,b=e.canManageColumns,g=e.defaultColumns,E=e.filters,O=e.linkToCustomerPortal,S=(0,_.I0)(),P=(0,c.useState)((function(){return function(){return null}})),C=(0,a.Z)(P,2),Z=C[0],w=C[1],j=(0,c.useState)(!0),H=(0,a.Z)(j,2),L=H[0],V=H[1],F=(0,c.useState)(!1),z=(0,a.Z)(F,2),N=z[0],K=z[1],q=(0,_.v9)((function(e){return e.SystemCvesStore.cveList})),G=(0,_.v9)((function(e){return e.SystemCvesStore.parameters})),J=(0,_.v9)((function(e){return e.SystemCvesStore.columns})),Q=(0,_.v9)((function(e){return e.SystemCvesStore.selectedCves})),U=(0,_.v9)((function(e){return e.SystemCvesStore.expandedRows})),X=(0,_.v9)((function(e){return e.SystemCvesStore.isAllExpanded})),$=(0,c.useMemo)((function(){return(0,T.l3)(o.id,q,J,O)}),[q,o.id,J]),W=(0,h.H1)(k.kO),Y=(0,a.Z)(W,2),re=Y[0],oe=Y[1],se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,h.pX)(e);S((0,s.KV)(t))};return(0,c.useEffect)((function(){if(se(re),g){var e=g.map((function(e){return k.Vm.find((function(t){return t.key===e}))}));S((0,s.ke)(e))}}),[]),(0,c.useEffect)((function(){L?(p&&(document.title="".concat(o.display_name,"\n                - ").concat(l.formatMessage(d.Z.systemsHeader)," - ").concat(l.formatMessage(d.Z.pageTitleSuffix))),V(!1)):(S((0,s.E8)(ue(ue({},G),{},{system:o.id}))),oe(ue({},G)))}),[G]),(0,c.useEffect)((function(){return function(){S((0,s.jS)())}}),[S]),q.payload.errors?(t=q.payload.errors.status,n=parseInt(t),o.insights_id?i().createElement(te.Z,{code:n}):i().createElement(ae,{titleText:l.formatMessage(d.Z.notConnectedTitleText),bodyText:l.formatMessage(d.Z.notConnectedBodyText),buttonText:l.formatMessage(d.Z.notConnectedButtonText)})):i().createElement(de.Provider,{value:{cves:$,systemCVEs:q,parameters:G,selectedCves:Q,expandedRows:U,isAllExpanded:X,canEditPairStatus:y,methods:{apply:se,downloadReport:function(e){var t=ue(ue({},G),{},{system:o.id});R.Z.exec(s.E8,t,e,"system-cves",(function(e){return S((0,ne.wN)(e))}),(function(){return S((0,ne.L1)())}))},selectCves:function(e,t){S((0,s.TT)(t))},openCves:function(e,t,n){S((0,s.pJ)({isOpen:e,cves:t,isAllExpanded:n}))},showStatusModal:function(e,t){var n=e.map((function(e){var t=e.id,n=e.attributes;return ue({id:t,cve_status_id:n.cve_status_id,status_id:n.status_id,justification:n.status_text,cve_justification:n.cve_status_text},(0,r.Z)(e,ie))}));w((function(){return function(){return i().createElement(B.Z,{cveList:n,updateRef:function(){V(!0),S((0,s.jS)()),(0,h.$)(t?ue(ue({},$.meta),{},{page:1}):$.meta,G,se)},inventoryList:[{id:o.id,display_name:o.display_name}],type:"systemDetail"})}}))},setColumnModalOpen:K,fetchResource:function(e){return(0,s.E8)(ue(ue({},e),{},{system:o.id}))}}}},i().createElement(Z,null),i().createElement(ce.Z,{appliedColumns:J,applyColumns:function(e){return S((0,s.ke)(e))},isModalOpen:N,setModalOpen:K}),i().createElement(D.K,{hasGutter:!0},u&&i().createElement(M.v,null,i().createElement(A.D,null,i().createElement(I.x,{component:I.q.h2},l.formatMessage(d.Z.cvesHeader)))),i().createElement(M.v,null,i().createElement(ee,{entity:o.id,canExport:m,customAction:f,canSelect:v,canManageColumns:b,filters:E}))),i().createElement(x,{header:J.filter((function(e){var t;return null!==(t=e.isShown)&&void 0!==t?t:e.isShownByDefault})),entity:o.id,canSelect:v}))};pe.defaultProps={allowedCveActions:[],showHeaderLabel:!1,setPageTitle:!1,canSelect:!0,canManageColumns:!0,canEditPairStatus:!0,linkToCustomerPortal:!1},pe.propTypes={entity:u().object,intl:u().any,showHeaderLabel:u().bool,setPageTitle:u().bool,canExport:u().bool,customAction:u().oneOf([u().node,u().func]),canSelect:u().bool,canEditPairStatus:u().bool,canManageColumns:u().bool,defaultColumns:u().arrayOf(u().string),filters:u().arrayOf(u().string),linkToCustomerPortal:u().bool};var me=(0,w.ZP)(pe),fe=function(e){var t=e.customItnlProvider,n=e.customIntlProvider,o=(0,r.Z)(e,se),a=t||n?j.Z:c.Fragment;return i().createElement(a,(t||n)&&{locale:navigator.language.slice(0,2),messages:d.Z},i().createElement(me,o))};fe.propTypes={customItnlProvider:u().bool,customIntlProvider:u().bool,customRouter:u().bool},fe.defaultProps={customItnlProvider:!1,customIntlProvider:!1,customRouter:!1};const ve=4174==n.j?fe:null},69199:(e,t,n)=>{var r=n(89881),o=n(98612);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}}}]);
//# sourceMappingURL=../sourcemaps/7277.17ab00141cd95650d6c551355c6a2c6a.js.map