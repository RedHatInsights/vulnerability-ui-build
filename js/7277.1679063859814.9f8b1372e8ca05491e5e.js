(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[7277],{39994:(e,t,n)=>{"use strict";n.d(t,{d3:()=>fe,QE:()=>ve,ZP:()=>be});var r=n(45987),o=n(4942),a=n(29439),i=n(77865),s=n.n(i),c=n(40306),l=n(45697),u=n.n(l),d=n(30893),p=n(87462),f=n(93433),m=n(3351),v=n(22860),y=n(6934),b=n(75863),g=n(81739),h=n(22167),O=n(29648),E=n(5938),P=n(24788);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e){var t,n=e.context,r=e.header,o=e.entity,a=e.canSelect,c=n.cves,l=n.methods,u=n.selectedCves,p=n.expandedRows,S=n.canEditPairStatus;null!=c&&null!==(t=c.meta)&&void 0!==t&&t.patch_access||(r=r.filter((function(e){return"advisory"!==e.key})));var Z=!c.data||0===c.data.length,x=Z?[]:c.data.map((function(e){return u.find((function(t){return t.id===e.id}))&&C(C({},e),{},{selected:!0})||e})).map((function(e,t){var n=t%2==0?p.find((function(t){return t.id===e.id}))||!1:{isOpen:void 0};return C(C({},e),{},{isOpen:n&&n.isOpen})})),j=[{key:"collapse"}].concat((0,f.Z)(a?[{key:"checkbox"}]:[]),(0,f.Z)(r));return c.isLoading?s().createElement(g.Z,{colSize:6,rowSize:20,variant:b.B.compact}):s().createElement(i.Fragment,null,s().createElement(m.i,{isStickyHeader:!0,canCollapseAll:!1,canSelectAll:!1,"aria-label":"Vulnerability CVE table",cells:r,rows:Z?[{heightAuto:!0,cells:[{props:{colSpan:8},title:s().createElement(P.lP,{secondParagraph:d.Z.emptyStateThisSystemShouldHaveCVEs})}]}]:x,onSelect:a&&!Z?function(e,t,r){var o=n.systemCVEs,a=n.methods,i=o.payload.data[r/2];a.selectCves(t,i)}:void 0,actionResolver:!Z&&S&&function(e,t){return(0,h.k8)(l,o,t.rowIndex)},sortBy:Z?void 0:(0,O.hO)(j,c.meta.sort),onCollapse:Z?void 0:function(e,t,r){return function(e,t,r){var o=n.cves,a=n.methods,i=n.isAllExpanded,s=o.data[t]&&o.data[t].id;a.openCves(r,[s],i)}(0,t,r)},onSort:Z?void 0:function(e,t,n){return(0,O.L6)(t,n,j,c.meta.sort,l.apply)},gridBreakPoint:"grid-lg",ouiaId:"cves-table",variant:b.B.compact},s().createElement(i.Fragment,null,s().createElement(y.x,null),s().createElement(v.R,null))),s().createElement(E.Z,{meta:c.meta,apply:l.apply}))};Z.propTypes={context:u().any,header:u().array,entity:u().string,canSelect:u().bool};const x=function(e){return s().createElement(fe.Consumer,null,(function(t){return s().createElement(Z,(0,p.Z)({context:t},e))}))};var j=n(74806),_=n(29558),w=n(28216),k=n(78733),T=n(52064),D=n(49739),M=n(83826),I=n(68340),A=n(68774),R=n(62215),B=n(66516),L=n(7092),H=n(93400),F=n(54728),V=n(95859),z=n(26410),N=n(90960),q=n(95351),K=n(16369),G=n(35938),J=n(54534),Q=n(1792),U=n(63368),X=n(15248);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(e){var t,n=e.entity,r=e.intl,o=e.context,a=e.canExport,c=e.customAction,l=e.canSelect,u=e.canManageColumns,p=e.filters,m=o.cves,v=o.systemCVEs,y=o.parameters,b=o.methods,g=o.selectedCves,h=o.isAllExpanded,O=o.canEditPairStatus,E=y.filter,P=y.advisory,S=null!==(t=null==g?void 0:g.length)&&void 0!==t?t:0,C=g.filter((function(e){return e.remediation===k.sF})),Z=(0,i.useMemo)((function(){return(0,H.Z)({selectedItems:g,selectorHandler:b.selectCves,items:m,rawItems:v,fetchResource:function(e){return b.bulkFetchResource(W(W({},y),e))},multiRow:!0})}),[g,m,v,y,b]),x=[""].concat((0,f.Z)(O?[{label:r.formatMessage(d.Z.editStatus),onClick:function(){return b.showStatusModal(g,!0)},props:{isDisabled:!S}}]:[]),(0,f.Z)(u?[{label:r.formatMessage(d.Z.columnManagementModalTitle),onClick:function(){return b.setColumnManagementModalOpen(!0)}}]:[])),j=[(0,q.Z)("filter",d.Z.cve,d.Z.searchFilterByCveID,E,b.apply),(0,K.Z)(b.apply,y,[],{isDynamic:!1,dropdownItems:k.rM.filter((function(e){return e.value!==k.Zm}))}),(0,J.Z)(b.apply,y),(0,N.Z)(b.apply,y),(0,z.Z)(b.apply,y),(0,G.Z)(b.apply,y),(0,V.Z)(b.apply,y),(0,Q.Z)(b.apply,y),(0,q.Z)("advisory",d.Z.advisory,d.Z.searchFilterByAdvisory,P,b.apply),(0,U.Z)(b.apply,y)];return s().createElement(F.Z,{pagination:{isDisabled:0===m.meta.total_items,itemCount:m.meta.total_items||0,page:m.meta.page||1,perPage:m.meta.page_size||1,ouiaId:"pagination-top",onSetPage:function(e,t){return(0,X.A6)(e,t,b.apply)},onPerPageSelect:function(e,t){return(0,X.lO)(e,t,b.apply)}},dedicatedAction:c?"function"==typeof c?c(m):c:n&&s().createElement(L.Z,{isDisabled:0===g.length,systems:n,cves:C}),actionsConfig:{actions:x,dropdownProps:{ouiaId:"toolbar-actions"}},bulkSelect:l&&{count:S,items:Z.items,isDisabled:0===m.meta.total_items&&0===S,checked:Boolean(S),ouiaId:"bulk-select",onSelect:function(){return Z.handleOnCheckboxChange()}},filterConfig:{items:p?j.filter((function(e){return p.includes(e.key)})):j},activeFiltersConfig:{filters:(0,X.DU)(y),onDelete:function(e,t){return(0,X.vH)(t,b.apply)},deleteTitle:r.formatMessage(d.Z.resetFilters)},exportConfig:a&&W({isDisabled:0===m.meta.total_items,ouiaId:"export"},(0,X.HV)(b)),expandAll:{isAllExpanded:h,onClick:function(){var e=o.cves,t=o.methods,n=o.isAllExpanded,r=!n,a=n?[]:e.data.filter((function(e){return e.id})).map((function(e){return e.id}));t.openCves(r,a,!n)},isDisabled:0===m.meta.total_items}})};Y.defaultProps={totalNumber:0,apply:function(){},downloadReport:function(){}},Y.propTypes={entity:u().string,context:u().object,intl:u().any,canExport:u().bool,customAction:u().oneOf([u().node,u().func]),canSelect:u().bool,canManageColumns:u().bool,filters:u().arrayOf(u().string)};const ee=(0,j.ZP)((function(e){return s().createElement(fe.Consumer,null,(function(t){return s().createElement(Y,(0,p.Z)({context:t},e))}))}));var te=n(66123),ne=n(83215),re=n(85893),oe=n(35356),ae=n(56989),ie=function(){return ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ie.apply(this,arguments)};const se=function(e){var t=e.titleText,n=void 0===t?"This system isnâ€™t connected to Insights yet":t,r=e.bodyText,o=void 0===r?"To get started, activate the Insights client for this system.":r,a=e.buttonText,i=void 0===a?"Learn how to activate the Insights client":a;return(0,re.jsxs)(oe.EmptyState,{children:[(0,re.jsx)(oe.EmptyStateIcon,{icon:ae.DisconnectedIcon}),(0,re.jsx)(oe.Title,ie({headingLevel:"h5",size:"lg"},{children:n})),(0,re.jsx)(oe.EmptyStateBody,{children:o}),(0,re.jsx)(oe.Button,ie({variant:"primary",component:"a",href:"http://access.redhat.com/products/cloud_management_services_for_rhel#getstarted",target:"_blank",rel:"noopener noreferrer",className:"pf-u-mt-lg"},{children:i}))]})};var ce=n(37450),le=["id","cve_status_id","status_id","status_text","cve_status_text"],ue=["customItnlProvider","customIntlProvider"];function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=(0,i.createContext)({}),me=function(e){var t,n,o=e.entity,l=e.intl,u=e.showHeaderLabel,p=e.setPageTitle,f=e.canExport,m=e.customAction,v=e.canSelect,y=e.canEditPairStatus,b=e.canManageColumns,g=e.defaultColumns,h=e.filters,E=e.linkToCustomerPortal,P=(0,w.I0)(),S=(0,i.useState)((function(){return function(){return null}})),C=(0,a.Z)(S,2),Z=C[0],j=C[1],_=(0,i.useState)(!0),L=(0,a.Z)(_,2),H=L[0],F=L[1],V=(0,w.v9)((function(e){return e.SystemCvesStore.cveList})),z=(0,w.v9)((function(e){return e.SystemCvesStore.parameters})),N=(0,w.v9)((function(e){return e.SystemCvesStore.columns})),q=(0,w.v9)((function(e){return e.SystemCvesStore.selectedCves})),K=(0,w.v9)((function(e){return e.SystemCvesStore.expandedRows})),G=(0,w.v9)((function(e){return e.SystemCvesStore.isAllExpanded})),J=(0,ce.lg)(N,(function(e){return P((0,c.ke)(e))})),Q=(0,a.Z)(J,2),U=Q[0],X=Q[1],$=(0,i.useMemo)((function(){return(0,T.l3)(o.id,V,N,E)}),[V,V.isLoading,o.id,N]),W=(0,O.H1)(k.kO),Y=(0,a.Z)(W,2),re=Y[0],oe=Y[1],ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,O.pX)(e);P((0,c.KV)(t))};return(0,i.useEffect)((function(){if(ae(re),g){var e=g.map((function(e){return k.Vm.find((function(t){return t.key===e}))}));P((0,c.ke)(e))}}),[]),(0,i.useEffect)((function(){H?(p&&(document.title="".concat(o.display_name,"\n                - ").concat(l.formatMessage(d.Z.systemsHeader)," - ").concat(l.formatMessage(d.Z.pageTitleSuffix))),F(!1)):(P((0,c.E8)(pe(pe({},z),{},{system:o.id}))),oe(pe({},z)))}),[z]),(0,i.useEffect)((function(){return function(){P((0,c.jS)())}}),[P]),V.payload.errors?(t=V.payload.errors.status,n=parseInt(t),o.insights_id?s().createElement(te.Z,{code:n}):s().createElement(se,{titleText:l.formatMessage(d.Z.notConnectedTitleText),bodyText:l.formatMessage(d.Z.notConnectedBodyText),buttonText:l.formatMessage(d.Z.notConnectedButtonText)})):s().createElement(fe.Provider,{value:{cves:$,systemCVEs:V,parameters:z,selectedCves:q,expandedRows:K,isAllExpanded:G,canEditPairStatus:y,methods:{apply:ae,downloadReport:function(e){var t=pe(pe({},z),{},{system:o.id});R.Z.exec(c.E8,t,e,"system-cves",(function(e){return P((0,ne.wN)(e))}),(function(){return P((0,ne.L1)())}))},selectCves:function(e,t){Array.isArray(t)?t=t.map((function(e){return pe(pe(pe({},e),e.attributes),{},{attributes:void 0})})):delete(t=pe(pe({},t),t.attributes)).attributes,P((0,c.TT)(t))},openCves:function(e,t,n){P((0,c.pJ)({isOpen:e,cves:t,isAllExpanded:n}))},showStatusModal:function(e,t){var n=e.map((function(e){return pe({id:e.id,cve_status_id:e.cve_status_id,status_id:e.status_id,justification:e.status_text,cve_justification:e.cve_status_text},(0,r.Z)(e,le))}));j((function(){return function(){return s().createElement(B.Z,{cveList:n,updateRef:function(){F(!0),P((0,c.jS)()),(0,O.$)(t?pe(pe({},$.meta),{},{page:1}):$.meta,z,ae)},inventoryList:[{id:o.id,display_name:o.display_name}],type:"systemDetail"})}}))},setColumnManagementModalOpen:X,bulkFetchResource:function(e){return(0,c.Bq)(pe(pe({},e),{},{system:o.id}))}}}},s().createElement(Z,null),U,s().createElement(D.K,{hasGutter:!0},u&&s().createElement(M.v,null,s().createElement(A.D,null,s().createElement(I.x,{component:I.q.h2},l.formatMessage(d.Z.cvesHeader)))),s().createElement(M.v,null,s().createElement(ee,{entity:o.id,canExport:f,customAction:m,canSelect:v,canManageColumns:b,filters:h}))),s().createElement(x,{header:N.filter((function(e){var t;return null!==(t=e.isShown)&&void 0!==t?t:e.isShownByDefault})),entity:o.id,canSelect:v}))};me.defaultProps={allowedCveActions:[],showHeaderLabel:!1,setPageTitle:!1,canSelect:!0,canManageColumns:!0,canEditPairStatus:!0,linkToCustomerPortal:!1},me.propTypes={entity:u().object,intl:u().any,showHeaderLabel:u().bool,setPageTitle:u().bool,canExport:u().bool,customAction:u().oneOf([u().node,u().func]),canSelect:u().bool,canEditPairStatus:u().bool,canManageColumns:u().bool,defaultColumns:u().arrayOf(u().string),filters:u().arrayOf(u().string),linkToCustomerPortal:u().bool};var ve=(0,j.ZP)(me),ye=function(e){var t=e.customItnlProvider,n=e.customIntlProvider,o=(0,r.Z)(e,ue),a=t||n?_.Z:i.Fragment;return s().createElement(a,(t||n)&&{locale:navigator.language.slice(0,2),messages:d.Z},s().createElement(ve,o))};ye.propTypes={customItnlProvider:u().bool,customIntlProvider:u().bool,customRouter:u().bool},ye.defaultProps={customItnlProvider:!1,customIntlProvider:!1,customRouter:!1};const be=4174==n.j?ye:null},69199:(e,t,n)=>{var r=n(89881),o=n(98612);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}}}]);
//# sourceMappingURL=../sourcemaps/7277.4418bf9fe3f2226cea4f188d83ccf8eb.js.map