(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["Systems"],{

/***/ "./node_modules/reselect/lib/index.js":
/*!********************************************!*\
  !*** ./node_modules/reselect/lib/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;
exports.defaultMemoize = defaultMemoize;
exports.createSelectorCreator = createSelectorCreator;
exports.createStructuredSelector = createStructuredSelector;
function defaultEqualityCheck(a, b) {
  return a === b;
}

function areArgumentsShallowlyEqual(equalityCheck, prev, next) {
  if (prev === null || next === null || prev.length !== next.length) {
    return false;
  }

  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.
  var length = prev.length;
  for (var i = 0; i < length; i++) {
    if (!equalityCheck(prev[i], next[i])) {
      return false;
    }
  }

  return true;
}

function defaultMemoize(func) {
  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;

  var lastArgs = null;
  var lastResult = null;
  // we reference arguments instead of spreading them for performance reasons
  return function () {
    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {
      // apply arguments instead of spreading for performance.
      lastResult = func.apply(null, arguments);
    }

    lastArgs = arguments;
    return lastResult;
  };
}

function getDependencies(funcs) {
  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;

  if (!dependencies.every(function (dep) {
    return typeof dep === 'function';
  })) {
    var dependencyTypes = dependencies.map(function (dep) {
      return typeof dep;
    }).join(', ');
    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));
  }

  return dependencies;
}

function createSelectorCreator(memoize) {
  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    memoizeOptions[_key - 1] = arguments[_key];
  }

  return function () {
    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      funcs[_key2] = arguments[_key2];
    }

    var recomputations = 0;
    var resultFunc = funcs.pop();
    var dependencies = getDependencies(funcs);

    var memoizedResultFunc = memoize.apply(undefined, [function () {
      recomputations++;
      // apply arguments instead of spreading for performance.
      return resultFunc.apply(null, arguments);
    }].concat(memoizeOptions));

    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.
    var selector = defaultMemoize(function () {
      var params = [];
      var length = dependencies.length;

      for (var i = 0; i < length; i++) {
        // apply arguments instead of spreading and mutate a local list of params for performance.
        params.push(dependencies[i].apply(null, arguments));
      }

      // apply arguments instead of spreading for performance.
      return memoizedResultFunc.apply(null, params);
    });

    selector.resultFunc = resultFunc;
    selector.recomputations = function () {
      return recomputations;
    };
    selector.resetRecomputations = function () {
      return recomputations = 0;
    };
    return selector;
  };
}

var createSelector = exports.createSelector = createSelectorCreator(defaultMemoize);

function createStructuredSelector(selectors) {
  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;

  if (typeof selectors !== 'object') {
    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));
  }
  var objectKeys = Object.keys(selectors);
  return selectorCreator(objectKeys.map(function (key) {
    return selectors[key];
  }), function () {
    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      values[_key3] = arguments[_key3];
    }

    return values.reduce(function (composition, value, index) {
      composition[objectKeys[index]] = value;
      return composition;
    }, {});
  });
}

/***/ }),

/***/ "./src/Components/SmartComponents/Systems/Systems.js":
/*!***********************************************************!*\
  !*** ./src/Components/SmartComponents/Systems/Systems.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ "./node_modules/@babel/runtime/helpers/objectWithoutProperties.js");
/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @patternfly/react-core */ "./node_modules/@patternfly/react-core/dist/esm/index.js");
/* harmony import */ var _patternfly_react_icons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @patternfly/react-icons */ "./node_modules/@patternfly/react-icons/dist/esm/index.js");
/* harmony import */ var _patternfly_react_table__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @patternfly/react-table */ "./node_modules/@patternfly/react-table/dist/esm/index.js");
/* harmony import */ var _redhat_cloud_services_frontend_components__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @redhat-cloud-services/frontend-components */ "./node_modules/@redhat-cloud-services/frontend-components/index.js");
/* harmony import */ var _redhat_cloud_services_frontend_components__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_redhat_cloud_services_frontend_components__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _redhat_cloud_services_frontend_components_notifications__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @redhat-cloud-services/frontend-components-notifications */ "./node_modules/@redhat-cloud-services/frontend-components-notifications/index.js");
/* harmony import */ var _redhat_cloud_services_frontend_components_notifications__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_redhat_cloud_services_frontend_components_notifications__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _redhat_cloud_services_frontend_components_utilities_files_helpers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @redhat-cloud-services/frontend-components-utilities/files/helpers */ "./node_modules/@redhat-cloud-services/frontend-components-utilities/files/helpers.js");
/* harmony import */ var _redhat_cloud_services_frontend_components_utilities_files_helpers__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_redhat_cloud_services_frontend_components_utilities_files_helpers__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lodash/debounce */ "./node_modules/lodash/debounce.js");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! query-string */ "./node_modules/query-string/index.js");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _Helpers_MiscHelper__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../Helpers/MiscHelper */ "./src/Helpers/MiscHelper.js");
/* harmony import */ var _Store_Actions_Actions__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../Store/Actions/Actions */ "./src/Store/Actions/Actions.js");
/* harmony import */ var _Store_Reducers_InventoryEntitiesReducer__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../Store/Reducers/InventoryEntitiesReducer */ "./src/Store/Reducers/InventoryEntitiesReducer.js");
/* harmony import */ var _Store_Selectors_CVESelectors__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../Store/Selectors/CVESelectors */ "./src/Store/Selectors/CVESelectors.js");
/* harmony import */ var _Utilities_ReducerRegistry__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../Utilities/ReducerRegistry */ "./src/Utilities/ReducerRegistry.js");
/* harmony import */ var _VulnerabilityHeader_VulnerabilityHeader__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../VulnerabilityHeader/VulnerabilityHeader */ "./src/Components/SmartComponents/VulnerabilityHeader/VulnerabilityHeader.js");
/* harmony import */ var _PresentationalComponents_DownloadReportKebab_BaseKebab__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../PresentationalComponents/DownloadReportKebab/BaseKebab */ "./src/Components/PresentationalComponents/DownloadReportKebab/BaseKebab.js");
/* harmony import */ var _PresentationalComponents_DownloadReportKebab_KebabItems__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../PresentationalComponents/DownloadReportKebab/KebabItems */ "./src/Components/PresentationalComponents/DownloadReportKebab/KebabItems.js");
/* harmony import */ var _Systems_scss__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./Systems.scss */ "./src/Components/SmartComponents/Systems/Systems.scss");
/* harmony import */ var _Systems_scss__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(_Systems_scss__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var _PresentationalComponents_SelectAllCheckbox__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../PresentationalComponents/SelectAllCheckbox */ "./src/Components/PresentationalComponents/SelectAllCheckbox.js");
/* harmony import */ var _Helpers_constants__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../Helpers/constants */ "./src/Helpers/constants.js");
/* harmony import */ var _PresentationalComponents_Filters_FilterChips__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../PresentationalComponents/Filters/FilterChips */ "./src/Components/PresentationalComponents/Filters/FilterChips.js");
/* harmony import */ var _PresentationalComponents_Filters_SearchFilter__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../PresentationalComponents/Filters/SearchFilter */ "./src/Components/PresentationalComponents/Filters/SearchFilter.js");










function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }




























/*eslint camelcase: 0*/

var Systems =
/*#__PURE__*/
function (_React$Component) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default()(Systems, _React$Component);

  function Systems(props) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this, Systems);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Systems).call(this, props));

    _this.downloadReport = function (format) {
      var _this$state = _this.state,
          opt_out = _this$state.opt_out,
          filter = _this$state.filter;

      var _fetchSystems = Object(_Store_Actions_Actions__WEBPACK_IMPORTED_MODULE_22__["fetchSystems"])({
        opt_out: opt_out,
        filter: filter,
        data_format: format,
        page: 1,
        page_size: Number.MAX_SAFE_INTEGER
      }),
          payload = _fetchSystems.payload;

      payload && payload.then(function (_ref) {
        var response = _ref.data;
        var data = format === 'json' ? JSON.stringify(response) : response;
        return Object(_redhat_cloud_services_frontend_components_utilities_files_helpers__WEBPACK_IMPORTED_MODULE_14__["downloadFile"])(data, "systems-".concat(new Date().toISOString()), format);
      });
    };

    _this.apply = function () {
      var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _this.setState(_objectSpread({}, _this.state, {}, config), _this.sendRequest);
    };

    _this.sendRequest = function () {
      var fetchData = _this.props.fetchData;
      fetchData(_objectSpread({}, _this.state));

      _this.createUrlParams(_this.state);
    };

    _this.createUrlParams = function (allParams) {
      var params = _objectSpread({}, allParams);

      var allowedParams = ['filter', 'page', 'page_size'];
      Object.keys(allParams).forEach(function (key) {
        return (params[key] === undefined || params[key] === '' || !allowedParams.includes(key) || params[key] === false) && delete params[key];
      });
      var queryString = query_string__WEBPACK_IMPORTED_MODULE_17___default.a.stringify(params);

      _this.props.history.push('?' + queryString);
    };

    _this.addFilter = function (param, value, type) {
      var newFilter;

      if (type === 'radio' || param === 'show_all') {
        newFilter = _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({}, param, value);
      } else {
        newFilter = _this.state[param] ? _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({}, param, "".concat(_this.state[param], ",").concat(value)) : _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({}, param, value);
      }

      _this.apply(_objectSpread({}, newFilter, {
        page: 1
      }));
    };

    _this.doOptOut = function () {
      if (_this.state.selected.size > 0) {
        _this.props.optOutSystems(_this.state.selected, !_this.state.opt_out).then(function () {
          _this.props.fetchData(_objectSpread({}, _this.params(), {
            page: 1
          }));

          _this.state.opt_out === false ? _this.props.addNotification({
            variant: 'success',
            title: _this.state.selected.size + ' systems successfully excluded from vulnerability analysis'
          }) : _this.props.addNotification({
            variant: 'success',
            title: _this.state.selected.size + ' systems successfully resumed vulnerability analysis',
            description: 'There may be 24 hours before data is available'
          });

          _this.setState({
            selected: new Set()
          });
        });
      }
    };

    _this.onSelect = function (payload) {
      var selected;

      if (!payload.data || Array.isArray(payload.data)) {
        selected = new Set(payload.data);
      } else {
        selected = _this.state.selected;
        payload.data.selected ? selected.add(payload.data.id) : selected["delete"](payload.data.id);
      }

      _this.setState({
        selected: selected
      }, _this.props.selectMultiple);
    };

    _this.getSelected = function () {
      return _this.state.selected;
    };

    _this.params = function () {
      var _this$state2 = _this.state,
          filter = _this$state2.filter,
          opt_out = _this$state2.opt_out,
          page = _this$state2.page,
          page_size = _this$state2.page_size;
      return {
        filter: filter,
        opt_out: opt_out,
        page: page,
        page_size: page_size
      };
    };

    _this.handleFilterChange = lodash_debounce__WEBPACK_IMPORTED_MODULE_15___default()(function (value) {
      var meta = _this.props.systems.meta;
      var page_size = meta.page_size;

      _this.apply({
        filter: value,
        page_size: page_size,
        page: 1
      });
    }, 400);

    _this.handleRefresh = function (_ref4) {
      var page = _ref4.page,
          perPage = _ref4.per_page;
      var meta = _this.props.systems.meta;
      var fetchData = _this.props.fetchData;

      if (meta.page !== page || meta.page_size !== perPage) {
        var config = {
          page: page,
          page_size: perPage || meta.page_size,
          filter: _this.state.filter,
          opt_out: _this.state.opt_out
        };
        fetchData(config);

        _this.createUrlParams(config);
      }
    };

    _this.handleOptOut = function () {
      _this.setState({
        opt_out: !_this.state.opt_out,
        selected: new Set(),
        page: 1
      }, _this.sendRequest);
    };

    _this.handleKebabToggle = function (isKebabOpen) {
      _this.setState({
        isKebabOpen: isKebabOpen
      });
    };

    _this.handleKebabSelect = function () {
      _this.setState({
        isKebabOpen: !_this.state.isKebabOpen
      });
    };

    _this.state = {
      InventoryCmp: function InventoryCmp() {
        return react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("div", null, "Loading...");
      },
      filter: undefined,
      removeListener: function removeListener() {},
      columns: [{
        key: 'display_name',
        title: 'Name',
        composed: ['facts.os_release', 'display_name']
      }, {
        key: 'cve_count',
        title: 'Applicable CVEs'
      }, {
        key: 'updated',
        title: 'Last seen',
        isTime: true
      }],
      opt_out: false,
      isKebabOpen: false,
      selectListener: _Utilities_ReducerRegistry__WEBPACK_IMPORTED_MODULE_25__["middlewareListener"].addNew({
        on: 'SELECT_ENTITY',
        callback: function callback(payload) {
          return _this.onSelect(payload);
        }
      }),
      selectAllListener: _Utilities_ReducerRegistry__WEBPACK_IMPORTED_MODULE_25__["middlewareListener"].addNew({
        on: 'SELECT_ENTITIES',
        callback: function callback(payload) {
          return _this.onSelect(payload);
        }
      }),
      selected: new Set()
    };
    return _this;
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(Systems, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var queryObject = query_string__WEBPACK_IMPORTED_MODULE_17___default.a.parse(this.props.location.search);
      queryObject.show_irrelevant = queryObject.show_irrelevant === 'true';

      if (queryObject.show_irrelevant) {
        queryObject.show_all = undefined;
      }

      this.fetchInventory();
      this.apply(_objectSpread({}, queryObject));
    }
  }, {
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps) {
      return !nextProps.systems.isLoading;
    }
  }, {
    key: "fetchInventory",
    value: function () {
      var _fetchInventory = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {
        var _ref5, inventoryConnector, mergeWithEntities, mergeWithDetail;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return insights.loadInventory({
                  react: react__WEBPACK_IMPORTED_MODULE_18___default.a,
                  reactRouterDom: react_router_dom__WEBPACK_IMPORTED_MODULE_20__,
                  reactCore: _patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__,
                  reactIcons: _patternfly_react_icons__WEBPACK_IMPORTED_MODULE_10__,
                  pfReactTable: _patternfly_react_table__WEBPACK_IMPORTED_MODULE_11__
                });

              case 2:
                _ref5 = _context.sent;
                inventoryConnector = _ref5.inventoryConnector;
                mergeWithEntities = _ref5.mergeWithEntities;
                mergeWithDetail = _ref5.mergeWithDetail;
                _Utilities_ReducerRegistry__WEBPACK_IMPORTED_MODULE_25__["default"].register(_objectSpread({}, mergeWithEntities(Object(_Store_Reducers_InventoryEntitiesReducer__WEBPACK_IMPORTED_MODULE_23__["inventoryEntitiesReducer"])(this.state.columns, this.getSelected)), {}, mergeWithDetail()));
                this.setState({
                  InventoryCmp: inventoryConnector().InventoryTable
                });
                this.state.removeListener();

              case 9:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function fetchInventory() {
        return _fetchInventory.apply(this, arguments);
      }

      return fetchInventory;
    }()
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$state3 = this.state,
          InventoryCmp = _this$state3.InventoryCmp,
          filter = _this$state3.filter;
      var _this$props$systems = this.props.systems,
          data = _this$props$systems.data,
          meta = _this$props$systems.meta;
      var items = data.map(function (item) {
        var _item$attributes = item.attributes,
            cve_count = _item$attributes.cve_count,
            rest = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_item$attributes, ["cve_count"]);

        return _objectSpread({
          cve_count: meta.opt_out && 'Excluded' || cve_count,
          id: item.attributes.inventory_id
        }, rest);
      });
      var kebabOptions = [Object(_PresentationalComponents_DownloadReportKebab_KebabItems__WEBPACK_IMPORTED_MODULE_28__["kebabItemExcludeSystemAnalysis"])(this.doOptOut, this.state.opt_out, {
        isDisabled: !this.getSelected().size
      }), Object(_PresentationalComponents_DownloadReportKebab_KebabItems__WEBPACK_IMPORTED_MODULE_28__["kebabItemToggleExcludeSystemDisplay"])(this.handleOptOut, this.state.opt_out), Object(_PresentationalComponents_DownloadReportKebab_KebabItems__WEBPACK_IMPORTED_MODULE_28__["kebabItemDownloadJSON"])(this.downloadReport), Object(_PresentationalComponents_DownloadReportKebab_KebabItems__WEBPACK_IMPORTED_MODULE_28__["kebabItemDownloadCSV"])(this.downloadReport)];
      return react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__["Page"], null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_VulnerabilityHeader_VulnerabilityHeader__WEBPACK_IMPORTED_MODULE_26__["default"], {
        showBreadcrumb: false
      }), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_redhat_cloud_services_frontend_components__WEBPACK_IMPORTED_MODULE_12__["Main"], null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(InventoryCmp, {
        hasCheckbox: data.length !== 0,
        page: meta.page,
        total: meta.total_items,
        perPage: meta.page_size,
        onRefresh: this.handleRefresh,
        items: items
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__["ToolbarGroup"], {
        className: "systems-toolbar"
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__["ToolbarItem"], null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_PresentationalComponents_SelectAllCheckbox__WEBPACK_IMPORTED_MODULE_30__["default"], {
        selectedItems: this.state.selected,
        selectorHandler: this.props.selectRows,
        items: this.props.systems,
        fetchResource: function fetchResource(ops) {
          return Object(_Store_Actions_Actions__WEBPACK_IMPORTED_MODULE_22__["fetchSystems"])(_objectSpread({}, _this2.params(), {}, ops));
        }
      })), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__["ToolbarItem"], null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_PresentationalComponents_Filters_SearchFilter__WEBPACK_IMPORTED_MODULE_33__["default"], {
        placeholder: "Filter by name",
        value: filter,
        apply: this.apply
      })), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__["ToolbarItem"], null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_PresentationalComponents_DownloadReportKebab_BaseKebab__WEBPACK_IMPORTED_MODULE_27__["default"], {
        dropdownItems: kebabOptions,
        disabled: data.length === 0
      }))), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_redhat_cloud_services_frontend_components__WEBPACK_IMPORTED_MODULE_12__["TableToolbar"], {
        className: "pf-u-pl-0 system-filter-chips"
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__["ToolbarGroup"], null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__["ToolbarItem"], null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_PresentationalComponents_Filters_FilterChips__WEBPACK_IMPORTED_MODULE_32__["default"], {
        filterValues: this.params(),
        filterCategories: [_Helpers_constants__WEBPACK_IMPORTED_MODULE_31__["filterSystemName"]],
        apply: this.apply
      })))))));
    }
  }]);

  return Systems;
}(react__WEBPACK_IMPORTED_MODULE_18___default.a.Component);

Systems.propTypes = {
  fetchData: prop_types__WEBPACK_IMPORTED_MODULE_16___default.a.func,
  systems: _Helpers_MiscHelper__WEBPACK_IMPORTED_MODULE_21__["dataShape"],
  optOutSystems: prop_types__WEBPACK_IMPORTED_MODULE_16___default.a.func,
  addNotification: prop_types__WEBPACK_IMPORTED_MODULE_16___default.a.func,
  selectRows: prop_types__WEBPACK_IMPORTED_MODULE_16___default.a.func,
  selectMultiple: prop_types__WEBPACK_IMPORTED_MODULE_16___default.a.func,
  history: prop_types__WEBPACK_IMPORTED_MODULE_16___default.a.object,
  location: prop_types__WEBPACK_IMPORTED_MODULE_16___default.a.object
};

function mapStateToProps(state) {
  return {
    systems: Object(_Store_Selectors_CVESelectors__WEBPACK_IMPORTED_MODULE_24__["sAllSystems"])(state)
  };
}

var mapDispatchToProps = function mapDispatchToProps(dispatch) {
  return {
    setHeader: function setHeader(header) {
      return dispatch(Object(_Store_Actions_Actions__WEBPACK_IMPORTED_MODULE_22__["setHeader"])(header));
    },
    fetchData: function fetchData(options) {
      return dispatch(Object(_Store_Actions_Actions__WEBPACK_IMPORTED_MODULE_22__["fetchSystems"])(options));
    },
    optOutSystems: function optOutSystems(systems, status) {
      return dispatch(Object(_Store_Actions_Actions__WEBPACK_IMPORTED_MODULE_22__["optOutSystemsAction"])(systems, status));
    },
    addNotification: function addNotification(notification) {
      return dispatch(Object(_redhat_cloud_services_frontend_components_notifications__WEBPACK_IMPORTED_MODULE_13__["addNotification"])(notification));
    },
    selectRows: function selectRows(value, ids) {
      return dispatch(Object(_Store_Actions_Actions__WEBPACK_IMPORTED_MODULE_22__["selectEntities"])(value, ids));
    },
    selectMultiple: function selectMultiple() {
      return dispatch({
        type: 'SELECT_MULTIPLE_ENTITIES'
      });
    }
  };
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_20__["withRouter"])(Object(react_redux__WEBPACK_IMPORTED_MODULE_19__["connect"])(mapStateToProps, mapDispatchToProps)(Systems)));

/***/ }),

/***/ "./src/Components/SmartComponents/Systems/Systems.scss":
/*!*************************************************************!*\
  !*** ./src/Components/SmartComponents/Systems/Systems.scss ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/Store/Reducers/InventoryEntitiesReducer.js":
/*!********************************************************!*\
  !*** ./src/Store/Reducers/InventoryEntitiesReducer.js ***!
  \********************************************************/
/*! exports provided: init, inventoryEntitiesReducer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "init", function() { return init; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inventoryEntitiesReducer", function() { return inventoryEntitiesReducer; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

// Initial State
var init = {
  columns: [],
  rows: [],
  entities: []
}; // Reducer

function modifyInventory(columns, state, getSelectedFunc) {
  // If a system does not have insights_id, it means it was deleted from inventory but somehow survived in Vuln backend
  if (state.loaded) {
    var selected = getSelectedFunc();
    return _objectSpread({}, state, {
      rows: state.rows.filter(function (item) {
        return item.insights_id;
      }).map(function (item) {
        return _objectSpread({}, item, {
          selected: selected.has(item.id)
        });
      }),
      columns: columns
    });
  }

  return state;
}

function selectEntities(state, getSelectedFunc) {
  var selected = getSelectedFunc();
  var myRows = state.rows.slice();

  var retval = _objectSpread({}, state, {
    rows: myRows.map(function (item) {
      var newValue = _objectSpread({}, item, {
        selected: selected.has(item.id)
      });

      return newValue;
    })
  });

  return retval;
}

var inventoryEntitiesReducer = function inventoryEntitiesReducer(columns, selected) {
  return function () {
    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : init;
    var action = arguments.length > 1 ? arguments[1] : undefined;

    switch (action.type) {
      case 'LOAD_ENTITIES_FULFILLED':
        return modifyInventory(columns, state, selected);

      case 'SELECT_MULTIPLE_ENTITIES':
        return selectEntities(state, selected);

      default:
        return state;
    }
  };
};

/***/ }),

/***/ "./src/Store/Selectors/CVESelectors.js":
/*!*********************************************!*\
  !*** ./src/Store/Selectors/CVESelectors.js ***!
  \*********************************************/
/*! exports provided: sCveDetailsPage, sExposedSystemsTable, sAllSystems */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sCveDetailsPage", function() { return sCveDetailsPage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sExposedSystemsTable", function() { return sExposedSystemsTable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sAllSystems", function() { return sAllSystems; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! reselect */ "./node_modules/reselect/lib/index.js");
/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(reselect__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Helpers_CVEHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Helpers/CVEHelper */ "./src/Helpers/CVEHelper.js");


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }




var cveListWithSystemsSelector = function cveListWithSystemsSelector(state, cve) {
  return _objectSpread({}, state.CVEStore.affectedSystemsByCVE, {
    cve: cve
  });
};

var systemsListAllSelector = function systemsListAllSelector(state) {
  return state.SystemsStore;
};

var cveDetailsPageSelector = function cveDetailsPageSelector(state) {
  return state.CVEStore.cveDetails;
};

var sCveDetailsPage = Object(reselect__WEBPACK_IMPORTED_MODULE_1__["createSelector"])([cveDetailsPageSelector], _Helpers_CVEHelper__WEBPACK_IMPORTED_MODULE_2__["createCveDetailsPage"]);
var sExposedSystemsTable = Object(reselect__WEBPACK_IMPORTED_MODULE_1__["createSelector"])([cveListWithSystemsSelector], _Helpers_CVEHelper__WEBPACK_IMPORTED_MODULE_2__["createExposedSystemsTable"]);
var sAllSystems = Object(reselect__WEBPACK_IMPORTED_MODULE_1__["createSelector"])([systemsListAllSelector], _Helpers_CVEHelper__WEBPACK_IMPORTED_MODULE_2__["createExposedSystemsTable"]);

/***/ })

}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map