(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1699:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(168),a=n.n(r),o=n(136),s=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u={columns:[],rows:[],entities:[],selectedRows:[]};function l(e,t){if(t.selectedRows||(t.selectedRows=[]),t.loaded){var n=t.columns.filter(function(e){return"updated"===e.key});return i({},t,{rows:t.rows.map(function(e){return i({},e,{selected:t.selectedRows.some(function(t){return t===e.id})})}),columns:[].concat(a()(e||[]),a()(n||[]))})}return t}function f(e,t){var n=e.rows.slice();return e.selectedRows||(e.selectedRows=[]),i({},e,{rows:n.map(function(e){return i({},e,{selected:t.some(function(t){return t===e.id})})}),selectedRows:a()(t)})}var p=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_ENTITIES_FULFILLED":return l(e,t);case"SELECT_MULTIPLE_ENTITIES":return f(t,n.payload);case"EXPAND_ROW":return i({},t,{rows:t.rows.map(function(e){return i({},e,{isOpen:e.id===n.payload.id?n.payload.isOpen:e.isOpen})})});default:return t}}}},1762:function(e,t,n){var r=n(1763);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(22)(r,a);r.locals&&(e.exports=r.locals)},1763:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n\n.system-filter-chips {\n  order: 6;\n  flex-basis: 100%; }\n",""])},1768:function(e,t,n){"use strict";n.r(t);var r=n(141),a=n.n(r),o=n(216),s=n.n(o),c=n(302),i=n.n(c),u=n(136),l=n.n(u),f=n(573),p=n.n(f),b=n(488),d=n.n(b),m=n(0),O=n.n(m),g=n(76),y=n(10),j=n(112),v=n(125),h=n(190),w=n(191),S=n(451),_=n(168),E=n.n(_),P=(n(1762),n(2)),D=n.n(P),R=n(160),k=n(343),x=n(1687),T=n(42),H=n(342),C=n(1692),N=n(189),I=n(1694),L=n(1695),M=n(1693);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var F=function(e){var t=Object(k.f)(T.s),n=i()(t,1)[0];H.b.addNew({on:"SELECT_ENTITY",callback:function(t){return function(t){var n=t.data.selected?[t.data.id].concat(E()(e.selectedHosts)):e.selectedHosts.filter(function(e){return e!==t.data.id});e.handleSelect(!1,n)}(t)}});var r=function(t,r){var a=t.page,o=t.page_size,s=t.filter,c=t.opt_out,i=e.systems.meta;if(i.page!==a||i.page_size!==o){var u={page:a,page_size:o||i.page_size,filter:s,opt_out:c||e.params().opt_out};if(n(u),e.setFilter(u.filter),r)return r(u)}},a=["",{label:e.params().opt_out?e.intl.formatMessage(y.a.kebabResumeAnalysis):e.intl.formatMessage(y.a.kebabExcludeVulnerabilityAnalysis),onClick:function(){return e.doOptOut()},props:{isDisabled:!e.selectedHosts.length}},{label:e.params().opt_out?e.intl.formatMessage(y.a.kebabHideExcludedSystems):e.intl.formatMessage(y.a.kebabShowExcludedSystems),onClick:function(){e.setOptOut(!e.params().opt_out),e.setSelectedHosts([]),e.setPage(1)}}],o=Object(C.a)({selectedItems:e.selectedHosts,selectorHandler:e.handleSelect,items:e.systems,fetchResource:function(e){return r(e,function(e){return Object(x.m)(e)})}});return D.a.createElement(N.PrimaryToolbar,{bulkSelect:{count:e.selectedHosts.length,items:o.items,isDisabled:0===e.systems.meta.total_items&&0===e.selectedHosts.length,checked:Boolean(e.selectedHosts.length),onSelect:function(){return o.handleOnCheckboxChange()}},actionsConfig:{actions:a,dropdownProps:{className:"custom-class"}},filterConfig:{items:[Object(I.a)(y.a.systemsSearchName,y.a.searchFilterByName,e.params().filter,function(t){return r(t,e.onRefresh)})]},activeFiltersConfig:{filters:Object(L.a)(e.parameters),onDelete:function(t,n){return Object(L.e)(n,function(t){return r(t,e.onRefresh)})}},exportConfig:Object(L.b)({downloadReport:function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.params);M.a.exec(x.m,n,t,"system-list")}})})};F.propTypes={systems:k.c,params:O.a.func,setPage:O.a.func,setFilter:O.a.func,setOptOut:O.a.func,selectedHosts:O.a.array,setSelectedHosts:O.a.func,doOptOut:O.a.func,onRefresh:O.a.any,parameters:O.a.object,handleSelect:O.a.func,intl:O.a.any};var A=Object(R.o)(Object(g.c)(F)),B=n(1691),W=n(574),J=n(303),U=n(1699);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=function(e){var t=e.intl,n=e.location,r=Object(P.useState)(function(){return function(){return D.a.createElement("div",null,"Loading...")}}),o=i()(r,2),c=o[0],u=o[1],l=Object(P.useState)(d.a.parse(n.search).filter),f=i()(l,2),b=f[0],m=f[1],O=Object(P.useState)(void 0),g=i()(O,2),_=g[0],E=g[1],R=Object(P.useState)(!1),k=i()(R,2),C=k[0],I=k[1],L=Object(P.useState)(1),M=i()(L,2),z=M[0],F=M[1],V=Object(P.useState)(10),Y=i()(V,1)[0],q=D.a.createRef(),G=Object(w.useDispatch)(),K=Object(w.useSelector)(function(e){return e.SystemsStore.payload}),Q=Object(w.useSelector)(function(e){return e.SystemsStore.params}),Z=Object(w.useSelector)(function(e){return e.SystemsStore.metadata}),$=Object(w.useSelector)(function(e){return e.SystemsStore.isLoading}),ee=Object(P.useMemo)(function(){return t=(e=K).data,n=e.meta,t&&t.map(function(e){var t=e.attributes,r=t.cve_count,a=p()(t,["cve_count"]);return X({cve_count:n.opt_out?"Excluded":r,id:e.attributes.inventory_id},a)})||[];var e,t,n},[K]),te=function(){return{filter:b,page_size:Y,opt_out:C,page:z}};Object(P.useEffect)(function(){0!==Object.keys(Q).length&&Q.constructor===Object&&G(Object(x.m)(Q))},[Q,G]);var ne=function(){var e=s()(a.a.mark(function e(){var t,n,r,o,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:D.a,reactRouterDom:j,reactCore:v,reactIcons:h,pfReactTable:S});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,o=t.mergeWithDetail,H.a.register(X({},r(Object(U.a)(T.v)),{},o())),s=n(H.a.getStore()),c=s.InventoryTable,u(function(){return c});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(P.useEffect)(function(){ne()},[]),Object(P.useEffect)(function(){_&&G(Object(x.r)(_))},[_,G]),Object(P.useEffect)(function(){$||G(Object(x.m)(X({},te())))},[C]);var re=function(e){var t=e.page,n=e.per_page,r=e.opt_out,a=e.filter;Z.page===t&&Z.page_size===n||G(Object(x.d)({page:t,per_page:n,opt_out:r||te().opt_out,filter:void 0===a?te().filter:a})),Z.total_items<=n&&q.current&&q.current.onRefreshData({page:t,perPage:n,opt_out:r||te().opt_out,filter:a})},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(_&&_.length>0||e)&&G(Object(x.p)(e||_,!C)).then(function(){G(Object(x.m)({filter:b,opt_out:C,page_size:Y,page:1})),G(!1===C?Object(J.addNotification)({variant:"success",title:t.formatMessage(y.a.systemsExcludedNotification,{count:e?1:_.length||0})}):Object(J.addNotification)({variant:"success",title:t.formatMessage(y.a.systemsResumedNotificationTitle,{count:e?1:_.length||0}),description:t.formatMessage(y.a.systemsResumedNotificationBody)})),E([])})};return D.a.createElement(P.Fragment,null,D.a.createElement(W.a,{showBreadcrumb:!1}),D.a.createElement(N.Main,null,c&&D.a.createElement(c,{ref:q,items:ee,page:Z&&Z.page||1,perPage:Z&&Z.page_size||20,total:Z&&Z.total_items||0,onRefresh:re,isLoaded:!$,hasCheckbox:0!==K.length,actions:Object(B.g)(ae,C)},K.data&&D.a.createElement(A,{params:te,systems:K,parameters:Q,selectedHosts:_||[],setSelectedHosts:E,setOptOut:I,setFilter:m,setPage:F,doOptOut:ae,onRefresh:re,handleSelect:function(e,t){t||(t=[]),E(t)}}))))};Y.propTypes={location:O.a.object,intl:O.a.any};t.default=Object(g.c)(Y)}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map