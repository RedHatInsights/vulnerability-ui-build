(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{297:function(e,t,n){"use strict";n.r(t);var a=n(36),s=n.n(a),r=n(128),i=n.n(r),c=n(45),o=n.n(c),u=n(23),p=n.n(u),l=n(24),h=n.n(l),m=n(25),f=n.n(m),v=n(26),y=n.n(v),d=n(27),b=n.n(d),g=n(83),k=n.n(g),I=n(121),L=n(182),_=n(152),w=n(43),E=n(309),S=n(1),j=n.n(S),C=n(2),D=n.n(C),O=n(11),R=n(22),z=n(68),T=n(127),x=n(160),H=n(132),M=n(196),A=n(154),F=n(28),J=n(44),N=n(153),P=function(e){function t(e){var n;return p()(this,t),(n=f()(this,y()(t).call(this,e))).checkItem=n.checkItem.bind(k()(k()(n))),n.onRefresh=n.onRefresh.bind(k()(k()(n))),n.state={InventoryCmp:function(){return D.a.createElement("div",null,"Loading...")},removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","fqdn"]},{key:"cve_count",title:"CVEs"},{key:"updated",title:"Last Seen",isTime:!0}]},n}return b()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.setHeader({breadcrumbs:[{title:"Vulnerability",to:J.b.vulnerabilities},{title:"Systems",isActive:!0}]}),this.props.fetchData(),this.setState({removeListener:F.b.addNew({on:"SYSTEMS_ALL_FULFILLED",callback:function(){return e.fetchInventory()}})})}},{key:"fetchInventory",value:function(){var e=o()(s.a.mark(function e(){var t,n,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:D.a,reactRouterDom:R,reactCore:I,reactIcons:_,pfReact:{PaginationRow:E.a}});case 2:t=e.sent,n=t.inventoryConnector,a=t.mergeWithEntities,r=t.mergeWithDetail,F.a.register(i()({},a(Object(M.a)(this.state.columns)),r())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkItem",value:function(e,t){var n=this.state.systemList;n[e].selected=t,this.setState({systemList:n})}},{key:"onRefresh",value:function(e){var t=e.page,n=e.per_page,a=this.props.systems.meta;a.page===t&&a.page_size===n||this.props.fetchData({page:a.page_size!==n?1:t,page_size:n})}},{key:"render",value:function(){var e=this.state.InventoryCmp,t=this.props.systems,n=t.data,a=t.meta;return D.a.createElement(L.a,null,D.a.createElement(N.a,{title:"Systems"}),D.a.createElement(w.Main,null,D.a.createElement(e,{hasCheckbox:!1,page:a.page,total:a.total_items,perPage:a.page_size,onRefresh:this.onRefresh,items:n.map(function(e){return i()({id:e.attributes.inventory_id},e.attributes)})})))}}]),t}(D.a.Component);P.propTypes={fetchData:j.a.func,setHeader:j.a.func,systems:x.a};t.default=Object(z.a)(Object(O.connect)(function(e){return{systems:Object(A.a)(e)}},function(){return{setHeader:function(e){return Object(T.a)(Object(H.f)(e))},fetchData:function(e){return Object(T.a)(Object(H.e)(e))}}})(P))}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map