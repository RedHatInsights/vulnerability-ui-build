(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{328:function(e,t,n){"use strict";n.r(t);var a=n(48),s=n.n(a),r=n(58),i=n.n(r),c=n(146),o=n.n(c),u=n(33),l=n.n(u),p=n(34),f=n.n(p),h=n(35),m=n.n(h),y=n(36),v=n.n(y),d=n(37),b=n.n(d),g=n(103),k=n.n(g),C=n(139),I=n(202),_=n(173),w=n(56),D=n(214),j=n.n(D),E=n(341),O=n(1),R=n.n(O),S=n(2),z=n.n(S),L=n(20),T=n(32),x=n(86),F=n(148),H=n(180),J=n(153),M=n(215),P=n(175),U=n(38),V=n(57),W=n(174),q=function(e){function t(e){var n;return l()(this,t),(n=m()(this,v()(t).call(this,e))).filterChange=j()(function(e){var t=n.props.systems.meta.page_size;n.setState(o()({},n.state,{filter:e}),function(){return n.props.fetchData({page_size:t,filter:n.state.filter})})},400),n.checkItem=n.checkItem.bind(k()(k()(n))),n.onRefresh=n.onRefresh.bind(k()(k()(n))),n.filterChange=n.filterChange.bind(k()(k()(n))),n.state={InventoryCmp:function(){return z.a.createElement("div",null,"Loading...")},filter:"",removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","fqdn"]},{key:"cve_count",title:"CVEs"},{key:"updated",title:"Last Seen",isTime:!0}]},n}return b()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.props.setHeader({breadcrumbs:[{title:"Vulnerability",to:V.b.vulnerabilities},{title:"Systems",isActive:!0}]}),this.props.fetchData(),this.fetchInventory()}},{key:"fetchInventory",value:function(){var e=i()(s.a.mark(function e(){var t,n,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:z.a,reactRouterDom:T,reactCore:C,reactIcons:_,pfReact:{PaginationRow:E.a}});case 2:t=e.sent,n=t.inventoryConnector,a=t.mergeWithEntities,r=t.mergeWithDetail,U.a.register(o()({},a(Object(M.a)(this.state.columns)),r())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkItem",value:function(e,t){var n=this.state.systemList;n[e].selected=t,this.setState({systemList:n})}},{key:"onRefresh",value:function(e){var t=e.page,n=e.per_page,a=this.props.systems.meta;a.page===t&&a.page_size===n||this.props.fetchData({page:a.page_size!==n?1:t,page_size:n,filter:this.state.filter})}},{key:"render",value:function(){var e=this.state.InventoryCmp,t=this.props.systems,n=t.data,a=t.meta;return z.a.createElement(I.a,null,z.a.createElement(W.a,{title:"Systems"}),z.a.createElement(w.Main,null,z.a.createElement(e,{hasCheckbox:!1,page:a.page,total:a.total_items,perPage:a.page_size,onRefresh:this.onRefresh,items:n.map(function(e){return o()({id:e.attributes.inventory_id},e.attributes)})},z.a.createElement(w.SimpleTableFilter,{onFilterChange:this.filterChange,buttonTitle:null,placeholder:"Find a system by UUID"}))))}}]),t}(z.a.Component);q.propTypes={fetchData:R.a.func,setHeader:R.a.func,systems:H.a};t.default=Object(x.a)(Object(L.connect)(function(e){return{systems:Object(P.a)(e)}},function(){return{setHeader:function(e){return Object(F.a)(Object(J.f)(e))},fetchData:function(e){return Object(F.a)(Object(J.e)(e))}}})(q))}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map