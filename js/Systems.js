(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{360:function(e,t,n){"use strict";n.r(t);var r=n(368),a=n(357),o=n(379),i=n(378),c=n(371),s=n(372),u=n(369),l=n(392),p=n(560),f=n(393),d=n(394),b=n(381),m=n(657),y=n(395),v=n(389),h=n(365);n.d(t,"ActionsColumn",function(){return r.a}),n.d(t,"Table",function(){return a.d}),n.d(t,"TableContext",function(){return a.a}),n.d(t,"TableGridBreakpoint",function(){return a.b}),n.d(t,"TableVariant",function(){return a.c}),n.d(t,"TableHeader",function(){return o.a}),n.d(t,"TableBody",function(){return i.a}),n.d(t,"BodyWrapper",function(){return c.a}),n.d(t,"RowWrapper",function(){return s.a}),n.d(t,"ExpandableRowContent",function(){return u.a}),n.d(t,"compoundExpand",function(){return l.a}),n.d(t,"sortable",function(){return p.a}),n.d(t,"headerCol",function(){return f.a}),n.d(t,"cellWidth",function(){return d.a}),n.d(t,"expandable",function(){return b.b}),n.d(t,"isRowExpanded",function(){return m.a}),n.d(t,"textCenter",function(){return y.a}),n.d(t,"classNames",function(){return v.b}),n.d(t,"Visibility",function(){return v.a}),n.d(t,"SortByDirection",function(){return h.a})},380:function(e,t,n){"use strict";var r=n(352),a=n.n(r),o=n(390),i=n(142),c=n(361),s=n(2),u=n.n(s),l=n(366);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e){var t=e.isLoading;if(!t){var n=e.payload.asMutable(),r=n.data,a=n.meta;return{data:r.map(function(t){return f({},t,{attributes:f({},t.attributes,{status:u.a.createElement("span",null,u.a.createElement(l.a,{currentStatusName:t.attributes.status_name,currentStatusId:t.attributes.status_id,systemId:t.id,cveName:e.cve,hasNotification:!0}))})})}),meta:a,isLoading:t}}return{data:e.payload&&e.payload.data||[],meta:{},isLoading:t}}function b(e){return u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cve.mitre.org/cgi-bin/cvename.cgi?name="+e},"MITRE Database ",u.a.createElement(i.a,null))}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}n.d(t,"b",function(){return y}),n.d(t,"c",function(){return v}),n.d(t,"a",function(){return h});var y=Object(o.createSelector)([function(e){return e.CVEStore.cveDetails}],function(e){var t,n=e.isLoading;if(!n){var r=e.payload.asMutable(),a=r.data,o=r.meta;return{data:a={impact:a.attributes.impact,public_date:Object(c.processDate)(a.attributes.public_date),description:a.attributes.description,synopsis:a.attributes.synopsis,package_list:a.attributes.package_list.map(function(e){return u.a.createElement("li",{key:e},e)}),rh_link:(t=a.attributes.synopsis,u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://access.redhat.com/security/cve/"+t},"View in Red Hat CVE database ",u.a.createElement(i.a,null))),mitre_link:b(a.attributes.synopsis),cvss3_score:a.attributes.cvss3_score,cvss2_score:a.attributes.cvss2_score,cvss2_metrics:a.attributes.cvss2_metrics,cvss3_metrics:a.attributes.cvss3_metrics},meta:o,isLoading:n}}return{data:[],meta:{},isLoading:n}}),v=Object(o.createSelector)([function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.CVEStore.affectedSystemsByCVE,{cve:t})}],d),h=Object(o.createSelector)([function(e){return e.SystemsStore}],d)},390:function(e,t,n){"use strict";function r(e,t){return e===t}function a(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return a(t,n,arguments)||(o=e.apply(null,arguments)),n=arguments,o}}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var c=0,s=r.pop(),u=i(r),l=e.apply(void 0,[function(){return c++,s.apply(null,arguments)}].concat(n)),p=o(function(){for(var e=[],t=u.length,n=0;n<t;n++)e.push(u[n].apply(null,arguments));return l.apply(null,e)});return p.resultFunc=s,p.recomputations=function(){return c},p.resetRecomputations=function(){return c=0},p}}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=c,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var s=t.createSelector=c(o)},391:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(352),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c={columns:[],rows:[],entities:[]};function s(e,t,n){if(t.loaded){var r=n();return i({},t,{rows:t.rows.filter(function(e){return e.insights_id}).map(function(e){return i({},e,{selected:r.has(e.id)})}),columns:e})}return t}var u=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOAD_ENTITIES_FULFILLED":return s(e,n,t);default:return n}}}},392:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),a=n.n(r),o=n(4),i=n(110),c=n(353),s=n.n(c);const u=(e,{rowIndex:t,columnIndex:n,rowData:r,column:c,property:u})=>{if(!e)return null;const{title:l,props:p}=e,{extraParams:{onExpand:f}}=c,d={rowIndex:t,columnIndex:n,column:c,property:u};return{className:Object(o.b)(s.a.tableCompoundExpansionToggle,p.isOpen&&s.a.modifiers.expanded),children:void 0!==p.isOpen&&a.a.createElement(i.a,{variant:"link",onClick:function(e){f&&f(e,t,n,p.isOpen,r,d)},"aria-expanded":p.isOpen,"aria-controls":p.ariaControls},l)}}},393:function(e,t,n){"use strict";var r=n(2),a=n.n(r);t.a=(e="simple-node")=>{return(t,{rowIndex:n}={})=>{const r="object"==typeof t?t.title:t;return{component:"th",children:a.a.createElement("div",{id:e+n},r)}}}},394:function(e,t,n){"use strict";var r=n(4),a=n(22),o=n(353),i=n.n(o);t.a=e=>()=>({className:Object(r.b)(Object(a.e)(i.a,`width-${e}`))})},395:function(e,t,n){"use strict";t.a=()=>({textCenter:!0})},650:function(e,t,n){"use strict";n.r(t);var r=n(129),a=n.n(r),o=n(106),i=n.n(o),c=n(125),s=n.n(c),u=n(352),l=n.n(u),p=n(75),f=n.n(p),d=n(76),b=n.n(d),m=n(77),y=n.n(m),v=n(78),h=n.n(v),O=n(79),g=n.n(O),w=n(208),j=n(64),_=n(178),E=n(93),S=n(155),k=n(141),P=n(12),x=n(360),D=n(354),C=n(73),I=n(361),T=n(387),N=n.n(T),L=n(1),R=n.n(L),F=n(2),z=n.n(F),A=n(72),K=n(121),V=n(348),M=n(362),B=n(364),W=n(358),H=n(391),J=n(380),U=n(80),G=n(373);n(651);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $=function(e){function t(e){var n;return f()(this,t),(n=y()(this,h()(t).call(this,e))).downloadReport=function(e){var t=n.state,r=t.opt_out,a=t.filter,o=Object(W.i)({opt_out:r,filter:a,data_format:e,page:1,page_size:Number.MAX_SAFE_INTEGER}).payload;o&&o.then(function(t){var n=t.data,r="json"===e?JSON.stringify(n):n;return Object(I.downloadFile)(r,"systems-".concat((new Date).toISOString()),e)})},n.apply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState(Y({},n.state,{},e),function(){n.props.fetchData(n.params())})},n.addFilter=function(e,t,r){var a;a="radio"===r||"show_all"===e?l()({},e,t):n.state[e]?l()({},e,"".concat(n.state[e],",").concat(t)):l()({},e,t),n.apply(Y({},a,{page:1}))},n.doOptOut=function(){n.state.selected.size>0&&n.props.optOutSystems(n.state.selected,!n.state.opt_out).then(function(){n.props.fetchData(n.params()),!1===n.state.opt_out?n.props.addNotification({variant:"success",title:n.state.selected.size+" systems successfully excluded from vulnerability analysis"}):n.props.addNotification({variant:"success",title:n.state.selected.size+" systems successfully resumed vulnerability analysis",description:"There may be 24 hours before data is available"}),n.setState({selected:new Set})})},n.onSelect=function(e){var t=n.state.selected;e.data.selected?t.add(e.data.id):t.delete(e.data.id),n.setState({selected:t})},n.getSelected=function(){return n.state.selected},n.params=function(){var e=n.state;return{filter:e.filter,opt_out:e.opt_out}},n.handleFilterChange=N()(function(e){var t=n.props.systems.meta.page_size;n.apply({filter:e,page_size:t})},400),n.handleRefresh=function(e){var t=e.page,r=e.per_page,a=n.props.systems.meta;a.page===t&&a.page_size===r||n.apply({page:a.page_size!==r?1:t,page_size:r,filter:n.state.filter})},n.handleOptOut=function(){n.setState({opt_out:!n.state.opt_out,selected:new Set}),n.handleFilterChange(n.state.filter)},n.handleKebabToggle=function(e){n.setState({isKebabOpen:e})},n.handleKebabSelect=function(){n.setState({isKebabOpen:!n.state.isKebabOpen})},n.state={InventoryCmp:function(){return z.a.createElement("div",null,"Loading...")},filter:"",removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","display_name"]},{key:"cve_count",title:"Number of CVEs"},{key:"updated",title:"Last Seen",isTime:!0}],opt_out:!1,isKebabOpen:!1,selectListener:U.b.addNew({on:"SELECT_ENTITY",callback:function(e){return n.onSelect(e)}}),selected:new Set},n}var n;return g()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.props.fetchData(),this.fetchInventory()}},{key:"fetchInventory",value:(n=s()(i.a.mark(function e(){var t,n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:z.a,reactRouterDom:K,reactCore:w,reactIcons:P,pfReactTable:x});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,a=t.mergeWithDetail,U.a.register(Y({},r(Object(H.a)(this.state.columns,this.getSelected)),{},a())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state.InventoryCmp,n=this.props.systems,r=n.data,o=n.meta,i=r.map(function(e){var t=e.attributes,n=t.cve_count,r=a()(t,["cve_count"]);return Y({cve_count:o.opt_out?"Excluded":n,id:e.attributes.inventory_id},r)});return z.a.createElement(j.a,null,z.a.createElement(G.a,null),z.a.createElement(D.Main,null,z.a.createElement(t,{hasCheckbox:0!==r.length,page:o.page,total:o.total_items,perPage:o.page_size,onRefresh:this.handleRefresh,items:i},z.a.createElement(_.a,{className:"systems-toolbar"},z.a.createElement("div",null,z.a.createElement(D.SimpleTableFilter,{onFilterChange:this.handleFilterChange,buttonTitle:null,placeholder:"Find a system by UUID"})),z.a.createElement("div",null,z.a.createElement(E.b,{onSelect:this.handleKebabSelect,toggle:z.a.createElement(S.a,{onToggle:this.handleKebabToggle}),isOpen:this.state.isKebabOpen,isPlain:!0,dropdownItems:[z.a.createElement(k.a,{key:"do_opt_out",component:"button",onClick:function(){return e.doOptOut()}},this.state.opt_out?"Resume analysis for system":"Exclude system from analysis"),z.a.createElement(k.a,{key:"opt_out",component:"button",onClick:function(){return e.handleOptOut()}},this.state.opt_out?"Hide systems excluded from analysis":"Show systems excluded from analysis"),z.a.createElement(k.a,{key:"csv",component:"button",onClick:function(){return e.downloadReport("csv")}},"Export as CSV"),z.a.createElement(k.a,{key:"json",component:"button",onClick:function(){return e.downloadReport("json")}},"Export as JSON")]}))))))}}]),t}(z.a.Component);$.propTypes={fetchData:R.a.func,systems:B.c,optOutSystems:R.a.func,addNotification:R.a.func};t.default=Object(V.a)(Object(A.connect)(function(e){return{systems:Object(J.a)(e)}},function(){return{setHeader:function(e){return Object(M.a)(Object(W.l)(e))},fetchData:function(e){return Object(M.a)(Object(W.i)(e))},optOutSystems:function(e,t){return Object(M.a)(Object(W.k)(e,t))},addNotification:function(e){return Object(M.a)(Object(C.addNotification)(e))}}})($))},651:function(e,t,n){var r=n(652);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,a);r.locals&&(e.exports=r.locals)},652:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n",""])}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map