(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{593:function(e,t,n){"use strict";n.r(t);var a=n(109),o=n.n(a),r=n(94),s=n.n(r),i=n(107),l=n.n(i),c=n(321),p=n.n(c),u=n(311),m=n.n(u),f=n(73),d=n.n(f),h=n(74),b=n.n(h),v=n(75),y=n.n(v),g=n(76),_=n.n(g),w=n(77),O=n.n(w),E=n(159),C=n(64),S=n(133),k=n(84),j=n(145),I=n(115),x=n(160),T=n(317),D=n(309),F=n(316),K=n(493),R=n.n(K),z=n(495),N=n.n(z),L=n(1),J=n.n(L),M=n(2),A=n.n(M),H=n(70),P=n(104),U=n(302),V=n(310),W=n(322),G=n(312),X=n(499),q=n(340),B=n(79),Q=n(318),Y=(n(594),function(e){function t(e){var n;return d()(this,t),(n=y()(this,_()(t).call(this,e))).downloadReport=function(e){var t=n.state,a=t.opt_out,o=t.filter,r=Object(G.g)({opt_out:a,filter:o,data_format:e,page:1,page_size:Number.MAX_SAFE_INTEGER}).payload;r&&r.then(function(t){var n=t.data,a="json"===e?JSON.stringify(n):n;return Object(F.downloadFile)(a,"systems-".concat((new Date).toISOString()),e)})},n.apply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState(m()({},n.state,e),function(){var e=N()(n.state,["InventoryCmp","columns","removeListener"]);n.props.fetchData(e)})},n.addFilter=function(e,t,a){var o;o="radio"===a||"show_all"===e?p()({},e,t):n.state[e]?p()({},e,"".concat(n.state[e],",").concat(t)):p()({},e,t),n.apply(m()({},o,{page:1}))},n.handleFilterChange=R()(function(e){var t=n.props.systems.meta.page_size;n.apply({filter:e,page_size:t})},400),n.handleRefresh=function(e){var t=e.page,a=e.per_page,o=n.props.systems.meta;o.page===t&&o.page_size===a||n.apply({page:o.page_size!==a?1:t,page_size:a,filter:n.state.filter})},n.handleOptOut=function(){n.setState({opt_out:!n.state.opt_out}),n.handleFilterChange(n.state.filter)},n.handleKebabToggle=function(e){n.setState({isKebabOpen:e})},n.handleKebabSelect=function(){n.setState({isKebabOpen:!n.state.isKebabOpen})},n.state={InventoryCmp:function(){return A.a.createElement("div",null,"Loading...")},filter:"",removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","display_name"]},{key:"cve_count",title:"Number of CVEs"},{key:"updated",title:"Last Seen",isTime:!0}],opt_out:!1,isKebabOpen:!1},n}return O()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.props.fetchData(),this.fetchInventory()}},{key:"fetchInventory",value:function(){var e=l()(s.a.mark(function e(){var t,n,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:A.a,reactRouterDom:P,reactCore:E,reactIcons:x,pfReactTable:T});case 2:t=e.sent,n=t.inventoryConnector,a=t.mergeWithEntities,o=t.mergeWithDetail,B.a.register(m()({},a(Object(X.a)(this.state.columns)),o())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.InventoryCmp,n=this.props.systems,a=n.data,r=n.meta,s=a.map(function(e){var t=e.attributes,n=t.cve_count,a=o()(t,["cve_count"]);return m()({cve_count:r.opt_out?"Excluded":n,id:e.attributes.inventory_id},a)});return A.a.createElement(C.a,null,A.a.createElement(Q.a,null),A.a.createElement(D.Main,null,A.a.createElement(t,{hasCheckbox:!1,page:r.page,total:r.total_items,perPage:r.page_size,onRefresh:this.handleRefresh,items:s},A.a.createElement(S.a,{className:"systems-toolbar"},A.a.createElement("div",null,A.a.createElement(D.SimpleTableFilter,{onFilterChange:this.handleFilterChange,buttonTitle:null,placeholder:"Find a system by UUID"})),A.a.createElement("div",null,A.a.createElement(k.a,{onSelect:this.handleKebabSelect,toggle:A.a.createElement(j.a,{onToggle:this.handleKebabToggle}),isOpen:this.state.isKebabOpen,isPlain:!0,dropdownItems:[A.a.createElement(I.a,{key:"opt_out",component:"button",onClick:function(){return e.handleOptOut()}},this.state.opt_out?"Hide systems excluded from analysis":"Show systems excluded from analysis"),A.a.createElement(I.a,{key:"csv",component:"button",onClick:function(){return e.downloadReport("csv")}},"Export as CSV"),A.a.createElement(I.a,{key:"json",component:"button",onClick:function(){return e.downloadReport("json")}},"Export as JSON")]}))))))}}]),t}(A.a.Component));Y.propTypes={fetchData:J.a.func,systems:W.b};t.default=Object(U.a)(Object(H.connect)(function(e){return{systems:Object(q.a)(e)}},function(){return{setHeader:function(e){return Object(V.a)(Object(G.i)(e))},fetchData:function(e){return Object(V.a)(Object(G.g)(e))}}})(Y))},594:function(e,t,n){var a=n(595);"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(a,o);a.locals&&(e.exports=a.locals)},595:function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n",""])}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map