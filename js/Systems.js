(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{365:function(e,t,n){"use strict";n.r(t);var r=n(366),o=n(373),a=n(389),c=n(378),i=n(376),u=n(384),s=n(374),l=n(390),f=n(379),p=n(377),d=n(372),b=n(383),y=n(367);n.d(t,"TableGridBreakpoint",function(){return r.d}),n.d(t,"TableVariant",function(){return r.e}),n.d(t,"SortByDirection",function(){return r.a}),n.d(t,"TableContext",function(){return r.c}),n.d(t,"Table",function(){return r.b}),n.d(t,"ActionsColumn",function(){return o.a}),n.d(t,"TableBody",function(){return a.a}),n.d(t,"BodyCell",function(){return c.a}),n.d(t,"BodyWrapper",function(){return i.a}),n.d(t,"CollapseColumn",function(){return u.a}),n.d(t,"ExpandableRowContent",function(){return s.a}),n.d(t,"TableHeader",function(){return l.a}),n.d(t,"HeaderCell",function(){return f.a}),n.d(t,"RowWrapper",function(){return p.a}),n.d(t,"SelectColumn",function(){return d.a}),n.d(t,"SortColumn",function(){return b.a}),n.d(t,"selectable",function(){return y.t}),n.d(t,"sortable",function(){return y.u}),n.d(t,"cellActions",function(){return y.c}),n.d(t,"cellWidth",function(){return y.e}),n.d(t,"cellHeightAuto",function(){return y.d}),n.d(t,"wrappable",function(){return y.w}),n.d(t,"textCenter",function(){return y.v}),n.d(t,"collapsible",function(){return y.g}),n.d(t,"expandedRow",function(){return y.m}),n.d(t,"expandable",function(){return y.l}),n.d(t,"compoundExpand",function(){return y.h}),n.d(t,"headerCol",function(){return y.n}),n.d(t,"classNames",function(){return y.f}),n.d(t,"Visibility",function(){return y.a}),n.d(t,"emptyTD",function(){return y.k}),n.d(t,"scopeColTransformer",function(){return y.s}),n.d(t,"emptyCol",function(){return y.j}),n.d(t,"parentId",function(){return y.r}),n.d(t,"mapProps",function(){return y.q}),n.d(t,"mapOpenedRows",function(){return y.p}),n.d(t,"calculateColumns",function(){return y.b}),n.d(t,"defaultTitle",function(){return y.i}),n.d(t,"isRowExpanded",function(){return y.o})},367:function(e,t,n){"use strict";var r=n(382);n.d(t,"a",function(){return r.a}),n.d(t,"c",function(){return r.b}),n.d(t,"d",function(){return r.c}),n.d(t,"e",function(){return r.d}),n.d(t,"f",function(){return r.e}),n.d(t,"g",function(){return r.f}),n.d(t,"h",function(){return r.g}),n.d(t,"j",function(){return r.h}),n.d(t,"k",function(){return r.i}),n.d(t,"l",function(){return r.j}),n.d(t,"m",function(){return r.k}),n.d(t,"n",function(){return r.l}),n.d(t,"q",function(){return r.m}),n.d(t,"r",function(){return r.n}),n.d(t,"s",function(){return r.o}),n.d(t,"t",function(){return r.p}),n.d(t,"u",function(){return r.q}),n.d(t,"v",function(){return r.r}),n.d(t,"w",function(){return r.s});var o=n(368);n.d(t,"b",function(){return o.a}),n.d(t,"p",function(){return o.b});var a=n(375);n.d(t,"i",function(){return a.a});var c=n(388);n.d(t,"o",function(){return c.a})},399:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l});var r=n(358),o=n.n(r),a=n(412),c=n(391);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var u=Object(a.createSelector)([function(e){return e.CVEStore.cveDetails}],c.a),s=Object(a.createSelector)([function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.CVEStore.affectedSystemsByCVE,{cve:t})}],c.b),l=Object(a.createSelector)([function(e){return e.SystemsStore}],c.b)},412:function(e,t,n){"use strict";function r(e,t){return e===t}function o(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,a=null;return function(){return o(t,n,arguments)||(a=e.apply(null,arguments)),n=arguments,a}}function c(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,u=r.pop(),s=c(r),l=e.apply(void 0,[function(){return i++,u.apply(null,arguments)}].concat(n)),f=a(function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return l.apply(null,e)});return f.resultFunc=u,f.recomputations=function(){return i},f.resetRecomputations=function(){return i=0},f}}t.__esModule=!0,t.defaultMemoize=a,t.createSelectorCreator=i,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var u=t.createSelector=i(a)},413:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(358),o=n.n(r);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var i={columns:[],rows:[],entities:[]};function u(e,t,n){if(t.loaded){var r=n();return c({},t,{rows:t.rows.filter(function(e){return e.insights_id}).map(function(e){return c({},e,{selected:r.has(e.id)})}),columns:e})}return t}function s(e,t){var n=t(),r=e.rows.slice();return c({},e,{rows:r.map(function(e){return c({},e,{selected:n.has(e.id)})})})}var l=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOAD_ENTITIES_FULFILLED":return u(e,n,t);case"SELECT_MULTIPLE_ENTITIES":return s(n,t);default:return n}}}},650:function(e,t,n){"use strict";n.r(t);var r=n(136),o=n.n(r),a=n(111),c=n.n(a),i=n(137),u=n.n(i),s=n(358),l=n.n(s),f=n(80),p=n.n(f),d=n(81),b=n.n(d),y=n(82),h=n.n(y),m=n(83),v=n.n(m),g=n(84),O=n.n(g),w=n(203),S=n(67),j=n(182),E=n(204),_=n(365),C=n(362),T=n(75),D=n(380),P=n(411),I=n.n(P),k=n(1),x=n.n(k),N=n(2),R=n.n(N),L=n(74),z=n(132),A=n(351),F=n(371),M=n(369),B=n(413),K=n(399),V=n(85),H=n(394),U=n(392),W=n(393),q=(n(651),n(398));function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=function(e){function t(e){var n;return p()(this,t),(n=h()(this,v()(t).call(this,e))).downloadReport=function(e){var t=n.state,r=t.opt_out,o=t.filter,a=Object(M.h)({opt_out:r,filter:o,data_format:e,page:1,page_size:Number.MAX_SAFE_INTEGER}).payload;a&&a.then(function(t){var n=t.data,r="json"===e?JSON.stringify(n):n;return Object(D.downloadFile)(r,"systems-".concat((new Date).toISOString()),e)})},n.apply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState(G({},n.state,{},e),function(){n.props.fetchData(n.params())})},n.addFilter=function(e,t,r){var o;o="radio"===r||"show_all"===e?l()({},e,t):n.state[e]?l()({},e,"".concat(n.state[e],",").concat(t)):l()({},e,t),n.apply(G({},o,{page:1}))},n.doOptOut=function(){n.state.selected.size>0&&n.props.optOutSystems(n.state.selected,!n.state.opt_out).then(function(){n.props.fetchData(G({},n.params(),{page:1})),!1===n.state.opt_out?n.props.addNotification({variant:"success",title:n.state.selected.size+" systems successfully excluded from vulnerability analysis"}):n.props.addNotification({variant:"success",title:n.state.selected.size+" systems successfully resumed vulnerability analysis",description:"There may be 24 hours before data is available"}),n.setState({selected:new Set})})},n.onSelect=function(e){var t;!e.data||Array.isArray(e.data)?t=new Set(e.data):(t=n.state.selected,e.data.selected?t.add(e.data.id):t.delete(e.data.id)),n.setState({selected:t},n.props.selectMultiple)},n.getSelected=function(){return n.state.selected},n.params=function(){var e=n.state;return{filter:e.filter,opt_out:e.opt_out,page:e.page,page_size:e.page_size}},n.handleFilterChange=I()(function(e){var t=n.props.systems.meta.page_size;n.apply({filter:e,page_size:t})},400),n.handleRefresh=function(e){var t=e.page,r=e.per_page,o=n.props.systems.meta;o.page===t&&o.page_size===r||n.apply({page:o.page_size!==r?1:t,page_size:r,filter:n.state.filter})},n.handleOptOut=function(){n.setState({opt_out:!n.state.opt_out,selected:new Set,page:1}),n.handleFilterChange(n.state.filter)},n.handleKebabToggle=function(e){n.setState({isKebabOpen:e})},n.handleKebabSelect=function(){n.setState({isKebabOpen:!n.state.isKebabOpen})},n.state={InventoryCmp:function(){return R.a.createElement("div",null,"Loading...")},filter:"",removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","display_name"]},{key:"cve_count",title:"Number of CVEs"},{key:"updated",title:"Last seen",isTime:!0}],opt_out:!1,isKebabOpen:!1,selectListener:V.b.addNew({on:"SELECT_ENTITY",callback:function(e){return n.onSelect(e)}}),selectAllListener:V.b.addNew({on:"SELECT_ENTITIES",callback:function(e){return n.onSelect(e)}}),selected:new Set},n}var n;return O()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.props.fetchData(),this.fetchInventory()}},{key:"fetchInventory",value:(n=u()(c.a.mark(function e(){var t,n,r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:R.a,reactRouterDom:z,reactCore:w,reactIcons:E,pfReactTable:_});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,o=t.mergeWithDetail,V.a.register(G({},r(Object(B.a)(this.state.columns,this.getSelected)),{},o())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state.InventoryCmp,n=this.props.systems,r=n.data,a=n.meta,c=this.state.selected.size,i=r.map(function(e){var t=e.attributes,n=t.cve_count,r=o()(t,["cve_count"]);return G({cve_count:a.opt_out?"Excluded":n,id:e.attributes.inventory_id},r)}),u=[Object(W.e)(this.doOptOut,this.state.opt_out,{isDisabled:!this.getSelected().size}),Object(W.f)(this.handleOptOut,this.state.opt_out),Object(W.b)(this.downloadReport),Object(W.a)(this.downloadReport)];return R.a.createElement(S.a,null,R.a.createElement(H.a,{showBreadcrumb:!1}),R.a.createElement(C.Main,null,R.a.createElement(t,{hasCheckbox:0!==r.length,page:a.page,total:a.total_items,perPage:a.page_size,onRefresh:this.handleRefresh,items:i},R.a.createElement(j.a,{className:"systems-toolbar"},R.a.createElement("div",null,R.a.createElement(q.a,{selectedItems:c,selectorHandler:this.props.selectRows,items:this.props.systems,fetchResource:function(t){return Object(M.h)(G({},e.params(),{},t))}})),R.a.createElement("div",null,R.a.createElement(C.SimpleTableFilter,{onFilterChange:this.handleFilterChange,buttonTitle:null,placeholder:"Find a system by UUID"})),R.a.createElement("div",null,R.a.createElement(U.a,{dropdownItems:u}))))))}}]),t}(R.a.Component);X.propTypes={fetchData:x.a.func,systems:F.c,optOutSystems:x.a.func,addNotification:x.a.func,selectRows:x.a.func,selectMultiple:x.a.func};t.default=Object(A.a)(Object(L.connect)(function(e){return{systems:Object(K.a)(e)}},function(e){return{setHeader:function(t){return e(Object(M.n)(t))},fetchData:function(t){return e(Object(M.h)(t))},optOutSystems:function(t,n){return e(Object(M.k)(t,n))},addNotification:function(t){return e(Object(T.addNotification)(t))},selectRows:function(t,n){return e(Object(M.m)(t,n))},selectMultiple:function(){return e({type:"SELECT_MULTIPLE_ENTITIES"})}}})(X))},651:function(e,t,n){var r=n(652);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(e.exports=r.locals)},652:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n",""])}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map