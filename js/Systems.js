(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1677:function(e,t,n){"use strict";var r=n(1664),a=n.n(r),o=n(9),s=n(11);t.a=function(e){var t=e.selectedItems,n=e.selectorHandler,r=e.items,c=e.fetchResource,i=e.multiRow,u=void 0!==i&&i,l=Array.from(t),f=l&&l.length,p=r.meta,d=r.data,b=Array.isArray(d)&&d.length&&u?d.length/2:d.length,m=function(){n(!1,[])},g=function(){var e=(c&&c({page_size:p.total_items,page:1})).payload;e&&e.then(function(e){var t=e.data.map(function(e){return e.id});n(!0,t)})};return{handleOnCheckboxChange:function(){0===f?g():m()},items:[{title:s.a.formatMessage(o.a.selectNone),onClick:m},{title:"".concat(s.a.formatMessage(o.a.selectPage,{count:b})),onClick:function(){var e=r.data,t=a()(e.filter(function(e){return e.id}).map(function(e){return e.id}),l);n(!0,t)}},{title:"".concat(s.a.formatMessage(o.a.selectAll,{count:p.total_items?p.total_items:0})),onClick:g}]}}},1678:function(e,t,n){"use strict";var r=n(296),a=n.n(r),o=n(294),s=n(11),c=n(9),i=n(909),u=n.n(i),l=n(2),f=n.n(l);t.a=function(e,t,n){var r=f.a.useState(),i=a()(r,2),l=i[0],p=i[1],d=f.a.useState(function(){return u()(function(e){void 0!==e&&n({filter:e,page:1})},400)}),b=a()(d,1)[0];return f.a.useEffect(function(){return p(t)},[t]),{type:o.conditionalFilterType.text,label:s.a.formatMessage(c.a.cve),filterValues:{onChange:function(e,t){p(t),b(t)},placeholder:e,value:l}}}},1679:function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return d}),n.d(t,"f",function(){return b});var r=n(2),a=n.n(r),o=n(9),s=n(103),c=n(410),i=n(11),u=function(e,t,n){return n({page:t})},l=function(e,t,n){return n({page_size:t,page:1})},f=function(e){return i.a.formatMessage(o.a.kebabExportAsJson),i.a.formatMessage(o.a.kebabExportAsCsv),{onSelect:function(t,n){return e.downloadReport(n)}}},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={color:n?"":"black"};return a.a.createElement(c.a,{variant:"link",isInline:!0,key:e,isDisabled:n,style:r,onClick:t},e)},d=function(e){var t=e.filter,n=Object.keys(s.g).reduce(function(t,n){if("show_all"!==n&&Object.keys(e).includes(n)&&!["",void 0].includes(e[n])){var r=e[n].split(","),a=r.reduce(function(e,t){return e.push(s.g[n].items.reduce(function(e,n){return t===n.value&&(e.name=n.label,e.value=n.value),e},{})),e},[]);t.push({key:n,paramValues:r,category:s.g[n].title,chips:a})}return t},[]);return t&&n.push({key:"filter",category:i.a.formatMessage(o.a.searchLabel),chips:[{name:t}]}),n},b=function(e,t){t(e.reduce(function(e,t){return"filter"===t.key||t.paramValues&&1===t.paramValues.length?e[t.key]="":e[t.key]=t.paramValues.filter(function(e){return!t.chips.some(function(t){return t.value===e})}).join(","),e},{}))}},1680:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(163),a=n.n(r),o=n(295),s=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u={columns:[],rows:[],entities:[],selectedRows:[]};function l(e,t){if(t.selectedRows||(t.selectedRows=[]),t.loaded){var n=t.columns.filter(function(e){return"updated"===e.key});return i({},t,{rows:t.rows.map(function(e){return i({},e,{selected:t.selectedRows.some(function(t){return t===e.id})})}),columns:[].concat(a()(e||[]),a()(n||[]))})}return t}function f(e,t){var n=e.rows.slice();return e.selectedRows||(e.selectedRows=[]),i({},e,{rows:n.map(function(e){return i({},e,{selected:t.some(function(t){return t===e.id})})}),selectedRows:a()(t)})}var p=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_ENTITIES_FULFILLED":return l(e,t);case"SELECT_MULTIPLE_ENTITIES":return f(t,n.payload);default:return t}}}},1764:function(e,t,n){var r=n(1765);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(22)(r,a);r.locals&&(e.exports=r.locals)},1765:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n\n.system-filter-chips {\n  order: 6;\n  flex-basis: 100%; }\n",""])},1770:function(e,t,n){"use strict";n.r(t);var r=n(135),a=n.n(r),o=n(206),s=n.n(o),c=n(296),i=n.n(c),u=n(295),l=n.n(u),f=n(552),p=n.n(f),d=n(1658),b=n.n(d),m=n(0),g=n.n(m),O=n(73),y=n(9),v=n(162),h=n(226),j=n(297),w=n(187),_=n(550),S=n(163),E=n.n(S),k=(n(1764),n(2)),P=n.n(k),R=n(154),C=n(334),x=n(1654),D=n(333),M=n(1677),H=n(294),T=n(1678),I=n(1679),L=n(1665);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=function(e){var t=Object(k.useState)(D.b.addNew({on:"SELECT_ENTITY",callback:function(t){return function(t){var n=t.data.selected?[t.data.id].concat(E()(e.selectedHosts)):e.selectedHosts.filter(function(e){return e!==t.data.id});e.handleSelect(!1,n)}(t)}})),n=(i()(t,1)[0],function(t,n){var r=t.page,a=t.page_size,o=t.filter,s=t.opt_out,c=e.systems.meta;if(c.page!==r||c.page_size!==a){var i={page:r,page_size:a||c.page_size,filter:o,opt_out:s||e.params().opt_out};if(function(t){var n=z({},t),r=["filter","page","page_size"];Object.keys(t).forEach(function(e){return(void 0===n[e]||""===n[e]||!r.includes(e)||!1===n[e])&&delete n[e]});var a=b.a.stringify(n);e.setFilter(t.filter),e.history.push("?"+a)}(i),n)return n(i)}}),r=["",Object(I.e)(e.params().opt_out?e.intl.formatMessage(y.a.kebabResumeAnalysis):e.intl.formatMessage(y.a.kebabExcludeVulnerabilityAnalysis),function(){return e.doOptOut()},!e.selectedHosts.length),Object(I.e)(e.params().opt_out?e.intl.formatMessage(y.a.kebabHideExcludedSystems):e.intl.formatMessage(y.a.kebabShowExcludedSystems),function(){return e.setOptOut(!e.params().opt_out),e.setSelectedHosts([]),void e.setPage(1)})],a=Object(M.a)({selectedItems:e.selectedHosts,selectorHandler:e.handleSelect,items:e.systems,fetchResource:function(e){return n(e,function(e){return Object(x.j)(e)})}});return P.a.createElement(H.PrimaryToolbar,{bulkSelect:{count:e.selectedHosts.length,items:a.items,checked:Boolean(e.selectedHosts.length),onSelect:function(){return a.handleOnCheckboxChange()}},actionsConfig:{actions:r,dropdownProps:{className:"custom-class"}},filterConfig:{items:[Object(T.a)(e.intl.formatMessage(y.a.searchLabel),e.params().filter,function(t){return n(t,e.onRefresh)})]},activeFiltersConfig:{filters:Object(I.a)(e.parameters),onDelete:function(t,r){return Object(I.f)(r,function(t){return n(t,e.onRefresh)})}},exportConfig:Object(I.b)({downloadReport:function(t){var n=z({},e.params);L.a.exec(x.j,n,t,"system-list")}})})};A.propTypes={systems:C.c,params:g.a.func,setPage:g.a.func,setFilter:g.a.func,setOptOut:g.a.func,selectedHosts:g.a.array,setSelectedHosts:g.a.func,doOptOut:g.a.func,onRefresh:g.a.any,parameters:g.a.object,handleSelect:g.a.func,history:g.a.object,intl:g.a.any};var F=Object(R.o)(Object(O.c)(A)),V=n(1662),B=n(553),J=n(298),U=n(1680);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q=function(e){var t=Object(k.useState)(function(){return function(){return P.a.createElement("div",null,"Loading...")}}),n=i()(t,2),r=n[0],o=n[1],c=Object(k.useState)(b.a.parse(e.location.search).filter),u=i()(c,2),l=u[0],f=u[1],d=Object(k.useState)(void 0),m=i()(d,2),g=m[0],O=m[1],S=Object(k.useState)(!1),E=i()(S,2),R=E[0],C=E[1],M=Object(k.useState)(1),T=i()(M,2),I=T[0],L=T[1],N=Object(k.useState)(10),z=i()(N,1)[0],A=P.a.createRef(),W=Object(w.useDispatch)(),q=Object(w.useSelector)(function(e){return e.SystemsStore.payload}),G=Object(w.useSelector)(function(e){return e.SystemsStore.params}),K=Object(w.useSelector)(function(e){return e.SystemsStore.metadata}),Q=Object(w.useSelector)(function(e){return e.SystemsStore.isLoading}),X=Object(k.useMemo)(function(){return t=(e=q).data,n=e.meta,t&&t.map(function(e){var t=e.attributes,r=t.cve_count,a=p()(t,["cve_count"]);return Y({cve_count:n.opt_out?"Excluded":r,id:e.attributes.inventory_id},a)})||[];var e,t,n},[q]),Z=[{key:"display_name",title:e.intl.formatMessage(y.a.systemsColumnHeaderName),composed:["facts.os_release","display_name"]},{key:"cve_count",title:e.intl.formatMessage(y.a.systemsColumnHeaderCveCount)}],$=function(){return{filter:l,page_size:z,opt_out:R,page:I}};Object(k.useEffect)(function(){0!==Object.keys(G).length&&G.constructor===Object&&W(Object(x.j)(G))},[G,W]);var ee=function(){var e=s()(a.a.mark(function e(){var t,n,r,s,c,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:P.a,reactRouterDom:v,reactCore:h,reactIcons:j,pfReactTable:_});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,s=t.mergeWithDetail,D.a.register(Y({},r(Object(U.a)(Z)),{},s())),c=n(D.a.getStore()),i=c.InventoryTable,o(function(){return i});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(k.useEffect)(function(){ee()},[]),Object(k.useEffect)(function(){g&&W(Object(x.p)(g))},[g,W]),Object(k.useEffect)(function(){Q||W(Object(x.j)(Y({},$())))},[R]);var te=function(e){var t=e.page,n=e.per_page,r=e.opt_out,a=e.filter;K.page===t&&K.page_size===n||W(Object(x.b)({page:t,per_page:n,opt_out:r||$().opt_out,filter:void 0===a?$().filter:a})),K.total_items<=n&&A.current&&A.current.onRefreshData({page:t,perPage:n,opt_out:r||$().opt_out,filter:a})},ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(g&&g.length>0||t)&&W(Object(x.m)(t||g,!R)).then(function(){W(Object(x.j)({filter:l,opt_out:R,page_size:z,page:1})),W(!1===R?Object(J.addNotification)({variant:"success",title:e.intl.formatMessage(y.a.systemsExcludedNotification,{count:g.length||t&&1||0})}):Object(J.addNotification)({variant:"success",title:e.intl.formatMessage(y.a.systemsResumedNotificationTitle,{count:g.length||t&&1||0}),description:e.intl.formatMessage(y.a.systemsResumedNotificationBody)})),O([])})};return P.a.createElement(k.Fragment,null,P.a.createElement(B.a,{showBreadcrumb:!1}),P.a.createElement(H.Main,null,r&&P.a.createElement(r,{ref:A,items:X,page:K&&K.page||1,perPage:K&&K.page_size||20,total:K&&K.total_items||0,onRefresh:te,isLoaded:!Q,hasCheckbox:0!==q.length,actions:Object(V.g)(ne,R)},q.data&&P.a.createElement(F,{params:$,systems:q,parameters:G,selectedHosts:g||[],setSelectedHosts:O,setOptOut:C,setFilter:f,setPage:L,doOptOut:ne,onRefresh:te,handleSelect:function(e,t){t||(t=[]),O(t)}}))))};q.propTypes={location:g.a.object,intl:g.a.any};t.default=Object(O.c)(q)}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map