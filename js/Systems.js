(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1662:function(e,t,n){"use strict";var r=n(1668),a=n.n(r),o=n(9),s=n(11);t.a=function(e){var t=e.selectedItems,n=e.selectorHandler,r=e.items,c=e.fetchResource,i=e.multiRow,u=void 0!==i&&i,l=Array.from(t),f=l&&l.length,p=r.meta,d=r.data,m=Array.isArray(d)&&d.length&&u?d.length/2:d.length,b=function(){n(!1,[])},g=function(){var e=(c&&c({page_size:p.total_items,page:1})).payload;e&&e.then(function(e){var t=e.data.map(function(e){return e.id});n(!0,t)})};return{handleOnCheckboxChange:function(){0===f?g():b()},items:[{title:s.a.formatMessage(o.a.selectNone),onClick:b},{title:"".concat(s.a.formatMessage(o.a.selectPage,{count:m})),onClick:function(){var e=r.data,t=a()(e.filter(function(e){return e.id}).map(function(e){return e.id}),l);n(!0,t)}},{title:"".concat(s.a.formatMessage(o.a.selectAll,{count:p.total_items?p.total_items:0})),onClick:g}]}}},1663:function(e,t,n){"use strict";var r=n(297),a=n.n(r),o=n(294),s=n(11),c=n(909),i=n.n(c),u=n(2),l=n.n(u);t.a=function(e,t,n,r){var c=l.a.useState(),u=a()(c,2),f=u[0],p=u[1],d=l.a.useState(function(){return i()(function(e){void 0!==e&&r({filter:e,page:1})},400)}),m=a()(d,1)[0];return l.a.useEffect(function(){return p(n)},[n]),{type:o.conditionalFilterType.text,label:s.a.formatMessage(e),filterValues:{onChange:function(e,t){p(t),m(t)},placeholder:s.a.formatMessage(t),value:f}}}},1664:function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return d}),n.d(t,"f",function(){return m});var r=n(2),a=n.n(r),o=n(9),s=n(103),c=n(410),i=n(11),u=function(e,t,n){return n({page:t})},l=function(e,t,n){return n({page_size:t,page:1})},f=function(e){return i.a.formatMessage(o.a.kebabExportAsJson),i.a.formatMessage(o.a.kebabExportAsCsv),{onSelect:function(t,n){return e.downloadReport(n)}}},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={color:n?"":"black"};return a.a.createElement(c.a,{variant:"link",isInline:!0,key:e,isDisabled:n,style:r,onClick:t},e)},d=function(e){var t=e.filter,n=Object.keys(s.g).reduce(function(t,n){if("show_all"!==n&&Object.keys(e).includes(n)&&!["",void 0].includes(e[n])){var r=e[n].split(","),a=r.reduce(function(e,t){return e.push(s.g[n].items.reduce(function(e,r){return t===r.value?(e.name=r.label,e.value=r.value):"security_rule"===n&&(e.name=t,e.value=t),e},{})),e},[]);t.push({key:n,paramValues:r,category:s.g[n].title,chips:a})}return t},[]);return t&&n.push({key:"filter",category:i.a.formatMessage(o.a.searchLabel),chips:[{name:t}]}),n},m=function(e,t){t(e.reduce(function(e,t){return"filter"===t.key||t.paramValues&&1===t.paramValues.length?e[t.key]="":e[t.key]=t.paramValues.filter(function(e){return!t.chips.some(function(t){return t.value===e})}).join(","),e},{}))}},1685:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(163),a=n.n(r),o=n(295),s=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u={columns:[],rows:[],entities:[],selectedRows:[]};function l(e,t){if(t.selectedRows||(t.selectedRows=[]),t.loaded){var n=t.columns.filter(function(e){return"updated"===e.key});return i({},t,{rows:t.rows.map(function(e){return i({},e,{selected:t.selectedRows.some(function(t){return t===e.id})})}),columns:[].concat(a()(e||[]),a()(n||[]))})}return t}function f(e,t){var n=e.rows.slice();return e.selectedRows||(e.selectedRows=[]),i({},e,{rows:n.map(function(e){return i({},e,{selected:t.some(function(t){return t===e.id})})}),selectedRows:a()(t)})}var p=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_ENTITIES_FULFILLED":return l(e,t);case"SELECT_MULTIPLE_ENTITIES":return f(t,n.payload);case"EXPAND_ROW":return i({},t,{rows:t.rows.map(function(e){return i({},e,{isOpen:e.id===n.payload.id?n.payload.isOpen:e.isOpen})})});default:return t}}}},1762:function(e,t,n){var r=n(1763);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(22)(r,a);r.locals&&(e.exports=r.locals)},1763:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n\n.system-filter-chips {\n  order: 6;\n  flex-basis: 100%; }\n",""])},1768:function(e,t,n){"use strict";n.r(t);var r=n(135),a=n.n(r),o=n(206),s=n.n(o),c=n(297),i=n.n(c),u=n(295),l=n.n(u),f=n(552),p=n.n(f),d=n(1659),m=n.n(d),b=n(0),g=n.n(b),y=n(73),O=n(9),v=n(162),h=n(226),j=n(296),w=n(187),_=n(550),S=n(163),k=n.n(S),E=(n(1762),n(2)),P=n.n(E),R=n(154),C=n(334),x=n(1654),D=n(333),M=n(1662),H=n(294),T=n(1663),N=n(1664),I=n(1669);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=function(e){var t=Object(E.useState)(D.b.addNew({on:"SELECT_ENTITY",callback:function(t){return function(t){var n=t.data.selected?[t.data.id].concat(k()(e.selectedHosts)):e.selectedHosts.filter(function(e){return e!==t.data.id});e.handleSelect(!1,n)}(t)}})),n=(i()(t,1)[0],function(t,n){var r=t.page,a=t.page_size,o=t.filter,s=t.opt_out,c=e.systems.meta;if(c.page!==r||c.page_size!==a){var i={page:r,page_size:a||c.page_size,filter:o,opt_out:s||e.params().opt_out};if(function(t){var n=z({},t),r=["filter","page","page_size"];Object.keys(t).forEach(function(e){return(void 0===n[e]||""===n[e]||!r.includes(e)||!1===n[e])&&delete n[e]});var a=m.a.stringify(n);e.setFilter(t.filter),e.history.push("?"+a)}(i),n)return n(i)}}),r=["",Object(N.e)(e.params().opt_out?e.intl.formatMessage(O.a.kebabResumeAnalysis):e.intl.formatMessage(O.a.kebabExcludeVulnerabilityAnalysis),function(){return e.doOptOut()},!e.selectedHosts.length),Object(N.e)(e.params().opt_out?e.intl.formatMessage(O.a.kebabHideExcludedSystems):e.intl.formatMessage(O.a.kebabShowExcludedSystems),function(){return e.setOptOut(!e.params().opt_out),e.setSelectedHosts([]),void e.setPage(1)})],a=Object(M.a)({selectedItems:e.selectedHosts,selectorHandler:e.handleSelect,items:e.systems,fetchResource:function(e){return n(e,function(e){return Object(x.k)(e)})}});return P.a.createElement(H.PrimaryToolbar,{bulkSelect:{count:e.selectedHosts.length,items:a.items,checked:Boolean(e.selectedHosts.length),onSelect:function(){return a.handleOnCheckboxChange()}},actionsConfig:{actions:r,dropdownProps:{className:"custom-class"}},filterConfig:{items:[Object(T.a)(O.a.systemsSearchName,O.a.searchFilterByName,e.params().filter,function(t){return n(t,e.onRefresh)})]},activeFiltersConfig:{filters:Object(N.a)(e.parameters),onDelete:function(t,r){return Object(N.f)(r,function(t){return n(t,e.onRefresh)})}},exportConfig:Object(N.b)({downloadReport:function(t){var n=z({},e.params);I.a.exec(x.k,n,t,"system-list")}})})};A.propTypes={systems:C.c,params:g.a.func,setPage:g.a.func,setFilter:g.a.func,setOptOut:g.a.func,selectedHosts:g.a.array,setSelectedHosts:g.a.func,doOptOut:g.a.func,onRefresh:g.a.any,parameters:g.a.object,handleSelect:g.a.func,history:g.a.object,intl:g.a.any};var F=Object(R.o)(Object(y.c)(A)),V=n(1665),B=n(553),J=n(298),W=n(1685);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){l()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=function(e){var t=Object(E.useState)(function(){return function(){return P.a.createElement("div",null,"Loading...")}}),n=i()(t,2),r=n[0],o=n[1],c=Object(E.useState)(m.a.parse(e.location.search).filter),u=i()(c,2),l=u[0],f=u[1],d=Object(E.useState)(void 0),b=i()(d,2),g=b[0],y=b[1],S=Object(E.useState)(!1),k=i()(S,2),R=k[0],C=k[1],M=Object(E.useState)(1),T=i()(M,2),N=T[0],I=T[1],L=Object(E.useState)(10),z=i()(L,1)[0],A=P.a.createRef(),U=Object(w.useDispatch)(),Y=Object(w.useSelector)(function(e){return e.SystemsStore.payload}),q=Object(w.useSelector)(function(e){return e.SystemsStore.params}),G=Object(w.useSelector)(function(e){return e.SystemsStore.metadata}),K=Object(w.useSelector)(function(e){return e.SystemsStore.isLoading}),Q=Object(E.useMemo)(function(){return t=(e=Y).data,n=e.meta,t&&t.map(function(e){var t=e.attributes,r=t.cve_count,a=p()(t,["cve_count"]);return X({cve_count:n.opt_out?"Excluded":r,id:e.attributes.inventory_id},a)})||[];var e,t,n},[Y]),Z=[{key:"display_name",title:e.intl.formatMessage(O.a.systemsColumnHeaderName),composed:["facts.os_release","display_name"]},{key:"cve_count",title:e.intl.formatMessage(O.a.systemsColumnHeaderCveCount)}],$=function(){return{filter:l,page_size:z,opt_out:R,page:N}};Object(E.useEffect)(function(){0!==Object.keys(q).length&&q.constructor===Object&&U(Object(x.k)(q))},[q,U]);var ee=function(){var e=s()(a.a.mark(function e(){var t,n,r,s,c,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:P.a,reactRouterDom:v,reactCore:h,reactIcons:j,pfReactTable:_});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,s=t.mergeWithDetail,D.a.register(X({},r(Object(W.a)(Z)),{},s())),c=n(D.a.getStore()),i=c.InventoryTable,o(function(){return i});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(E.useEffect)(function(){ee()},[]),Object(E.useEffect)(function(){g&&U(Object(x.p)(g))},[g,U]),Object(E.useEffect)(function(){K||U(Object(x.k)(X({},$())))},[R]);var te=function(e){var t=e.page,n=e.per_page,r=e.opt_out,a=e.filter;G.page===t&&G.page_size===n||U(Object(x.c)({page:t,per_page:n,opt_out:r||$().opt_out,filter:void 0===a?$().filter:a})),G.total_items<=n&&A.current&&A.current.onRefreshData({page:t,perPage:n,opt_out:r||$().opt_out,filter:a})},ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(g&&g.length>0||t)&&U(Object(x.n)(t||g,!R)).then(function(){U(Object(x.k)({filter:l,opt_out:R,page_size:z,page:1})),U(!1===R?Object(J.addNotification)({variant:"success",title:e.intl.formatMessage(O.a.systemsExcludedNotification,{count:g.length||t&&1||0})}):Object(J.addNotification)({variant:"success",title:e.intl.formatMessage(O.a.systemsResumedNotificationTitle,{count:g.length||t&&1||0}),description:e.intl.formatMessage(O.a.systemsResumedNotificationBody)})),y([])})};return P.a.createElement(E.Fragment,null,P.a.createElement(B.a,{showBreadcrumb:!1}),P.a.createElement(H.Main,null,r&&P.a.createElement(r,{ref:A,items:Q,page:G&&G.page||1,perPage:G&&G.page_size||20,total:G&&G.total_items||0,onRefresh:te,isLoaded:!K,hasCheckbox:0!==Y.length,actions:Object(V.g)(ne,R)},Y.data&&P.a.createElement(F,{params:$,systems:Y,parameters:q,selectedHosts:g||[],setSelectedHosts:y,setOptOut:C,setFilter:f,setPage:I,doOptOut:ne,onRefresh:te,handleSelect:function(e,t){t||(t=[]),y(t)}}))))};Y.propTypes={location:g.a.object,intl:g.a.any};t.default=Object(y.c)(Y)}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map