(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1615:function(e,t,n){"use strict";var r=n(334),a=n.n(r),o=n(298),i=n.n(o),c=n(534),s=n.n(c),l=n(501),u=n(514),p=n(0),f=n.n(p),d=n(2),m=n.n(d),b=function(e){var t=e.dropdownItems,n=e.disabled,r=s()(e,["dropdownItems","disabled"]),o=Object(d.useState)(!1),c=i()(o,2),p=c[0],f=c[1];return m.a.createElement("div",null,m.a.createElement(l.a,a()({onSelect:function(){f(!p)},toggle:m.a.createElement(u.a,{onToggle:function(e){f(e)},isDisabled:n}),isOpen:p,isPlain:!0,dropdownItems:t},r)))};b.propTypes={dropdownItems:f.a.array,disabled:f.a.bool},t.a=b},1616:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return d}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return b}),n.d(t,"g",function(){return y});var r=n(334),a=n.n(r),o=n(494),i=n(2),c=n.n(i),s=n(8),l=n(49),u=function(e,t){var n=a()({},t);return c.a.createElement(o.a,a()({key:"json",component:"button",onClick:function(){return e("json")}},n),c.a.createElement(l.a,s.a.kebabExportAsJson))},p=function(e,t){var n=a()({},t);return c.a.createElement(o.a,a()({key:"csv",component:"button",onClick:function(){return e("csv")}},n),c.a.createElement(l.a,s.a.kebabExportAsCsv))},f=function(e,t,n){var r=a()({},n);return c.a.createElement(o.a,a()({key:"editBusinessRisk",component:"button",onClick:function(){return e(t)}},r),c.a.createElement(l.a,s.a.kebabEditBusinessRisk))},d=function(e,t,n,r){var i=a()({},r);return c.a.createElement(o.a,a()({key:"editStatus",component:"button",onClick:function(){return e(t,n)}},i),c.a.createElement(l.a,s.a.kebabEditStatus))},m=function(e,t,n){var r=a()({},n);return c.a.createElement(o.a,a()({key:"toggleCveDescription",component:"button",onClick:function(){return e()}},r),t?c.a.createElement(l.a,s.a.kebabCollapseCves):c.a.createElement(l.a,s.a.kebabExpandCves))},b=function(e,t,n){var r=a()({},n);return c.a.createElement(o.a,a()({key:"do_opt_out",component:"button",onClick:function(){return e()}},r),t?c.a.createElement(l.a,s.a.kebabResumeAnalysis):c.a.createElement(l.a,s.a.kebabExcludeVulnerabilityAnalysis))},y=function(e,t,n){var r=a()({},n);return c.a.createElement(o.a,a()({key:"toggle_opt_out",component:"button",onClick:function(){return e()}},r),t?c.a.createElement(l.a,s.a.kebabHideExcludedSystems):c.a.createElement(l.a,s.a.kebabShowExcludedSystems))}},1620:function(e,t,n){"use strict";var r=n(298),a=n.n(r),o=n(159),i=n.n(o),c=n(297),s=n.n(c),l=n(2),u=n.n(l),p=n(372),f=n(558),d=n(373),m=n(289),b=n(0),y=n.n(b),v=n(8),g=n(49);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=function(e){var t=e.filterValues,n=e.filterCategories,r=e.apply,o=O({},t),c=i()(n);delete o.show_all;var l=c.map(function(e){var t=e.urlParam;return Object.entries(o).find(function(e){return a()(e,1)[0]===t})}).filter(function(e){return function(e){return e&&!e.includes(void 0)&&!e.includes("")}(e)});return l.length>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a,{withToolbar:!0},l.map(function(e){var n=a()(e,2),o=n[0],i=n[1],l=c.find(function(e){return e.urlParam===o}),p=l.title,m=l.urlParam,b=l.values;return u.a.createElement(f.a,{key:o,categoryName:p},i&&i.toString().split(",").map(function(e){var n=b.find(function(t){return-1!==t.value.indexOf(e)}),a=n?O({},n):{value:o,label:e},i=a.value,c=a.label;return u.a.createElement(d.a,{key:i,onClick:function(){return function(e,n){var a=n.split(","),o=s()({},e,t[e].split(",").filter(function(e){return!a.includes(e)}).join(","));if(0!==o[e].length)r(O({},o,{page:1}));else{var i=O({},t,s()({},e,void 0));r(O({},i,{page:1}))}}(m,e)}},c)}))})),u.a.createElement(m.a,{variant:"link",onClick:function(){return function(e){var t=e.reduce(function(e,t){return O({},e,s()({},t[0],void 0))},{});r(O({},t,{page:1}))}(l)}},u.a.createElement(g.a,v.a.filterChipsClear)))};E.propTypes={filterValues:y.a.object,filterCategories:y.a.array,apply:y.a.func},t.a=E},1621:function(e,t,n){"use strict";var r=n(298),a=n.n(r),o=n(296),i=n(869),c=n.n(i),s=n(0),l=n.n(s),u=n(2),p=n.n(u),f=function(e){var t=e.placeholder,n=e.value,r=e.apply,i=Object(u.useState)(n),s=a()(i,2),l=s[0],f=s[1],d=Object(u.useState)(function(){return c()(function(e){void 0!==e&&r({filter:e,page:1})},400)}),m=a()(d,1)[0];return Object(u.useEffect)(function(){return m(l)},[l,m]),Object(u.useEffect)(function(){return f(n)},[n]),p.a.createElement(o.ConditionalFilter,{placeholder:t,onChange:function(e,t){return f(t)},value:l})};f.propTypes={placeholder:l.a.string,value:l.a.string,apply:l.a.func},t.a=f},1622:function(e,t,n){"use strict";var r=n(298),a=n.n(r),o=n(494),i=n(501),c=n(554),s=n(557),l=n(0),u=n.n(l),p=n(2),f=n.n(p),d=n(1624),m=n.n(d),b=n(8),y=n(71),v=function(e){var t=Object(p.useState)(!1),n=a()(t,2),r=n[0],l=n[1],u=e.selectedItems,d=e.items,y=e.multiRow,v=Array.from(u),g=v&&v.length,h=d.meta,O=d.data,E=Boolean(g)&&"".concat(g," selected"),w=y?O.length/2:O.length,j=function(e){return e>1?"items":"item"},_=function(){(0,e.selectorHandler)(!1,void 0)},S=function(){var t=e.items.meta,n=e.selectorHandler,r=e.fetchResource,a=(r&&r({page_size:t.total_items,page:1})).payload;a&&a.then(function(e){var t=e.data.map(function(e){return e.id});n(!0,t)})},k=[f.a.createElement(o.a,{key:"none",onClick:_},e.intl.formatMessage(b.a.selectNone)),f.a.createElement(o.a,{key:"page",onClick:function(){var t=e.items.data;(0,e.selectorHandler)(!0,m()(t.filter(function(e){return e.id}).map(function(e){return e.id}),v))},isDisabled:0===h.total_items},e.intl.formatMessage(b.a.selectPage)," (",w," ",j(w),")"),f.a.createElement(o.a,{key:"all",onClick:S,isDisabled:0===h.total_items},e.intl.formatMessage(b.a.selectAll)," (",h.total_items," ",j(h.total_items),")")];return f.a.createElement(i.a,{onSelect:function(){l(!r)},toggle:f.a.createElement(c.a,{splitButtonItems:[f.a.createElement(s.a,{id:"selectAllcheckbox",key:"selectAllcheckbox",isChecked:0!==g&&(h.total_items===g||null),onChange:function(){0===g?S():_()}}),E],onToggle:function(e){l(e)},isDisabled:0===h.total_items&&0===g}),isOpen:r,dropdownItems:k})};v.propTypes={selectorHandler:u.a.func,fetchResource:u.a.func,selectedItems:u.a.oneOfType([u.a.array,u.a.object]),items:u.a.object,multiRow:u.a.bool,intl:u.a.any},v.defaultProps={impact:"Unknown",selectedItems:[],items:{},multiRow:!1},t.a=Object(y.c)(v)},1625:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u});var r=n(297),a=n.n(r),o=n(1636),i=n(1617);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var s=Object(o.createSelector)([function(e){return e.CVEStore.cveDetails}],i.a),l=Object(o.createSelector)([function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.CVEStore.affectedSystemsByCVE,{cve:t})}],i.b),u=Object(o.createSelector)([function(e){return e.SystemsStore}],i.c)},1636:function(e,t,n){"use strict";function r(e,t){return e===t}function a(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return a(t,n,arguments)||(o=e.apply(null,arguments)),n=arguments,o}}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var c=0,s=r.pop(),l=i(r),u=e.apply(void 0,[function(){return c++,s.apply(null,arguments)}].concat(n)),p=o(function(){for(var e=[],t=l.length,n=0;n<t;n++)e.push(l[n].apply(null,arguments));return u.apply(null,e)});return p.resultFunc=s,p.recomputations=function(){return c},p.resetRecomputations=function(){return c=0},p}}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=c,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var s=t.createSelector=c(o)},1637:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(159),a=n.n(r),o=n(297),i=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l={columns:[],rows:[],entities:[]};function u(e,t,n){if(t.loaded){var r=n(),o=t.columns.filter(function(e){return"updated"===e.key});return s({},t,{rows:t.rows.filter(function(e){return e.insights_id}).map(function(e){return s({},e,{selected:r.has(e.id)})}),columns:[].concat(a()(e||[]),a()(o||[]))})}return t}function p(e,t){var n=t(),r=e.rows.slice();return s({},e,{rows:r.map(function(e){return s({},e,{selected:n.has(e.id)})})})}var f=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOAD_ENTITIES_FULFILLED":return u(e,n,t);case"SELECT_MULTIPLE_ENTITIES":return p(n,t);case"EXPAND_ROW":return s({},n,{rows:n.rows.map(function(e){return s({},e,{isOpen:e.id===r.payload.id?r.payload.isOpen:e.isOpen})})});default:return n}}}},1716:function(e,t,n){"use strict";n.r(t);var r=n(534),a=n.n(r),o=n(134),i=n.n(o),c=n(217),s=n.n(c),l=n(297),u=n.n(l),p=n(181),f=n.n(p),d=n(182),m=n.n(d),b=n(183),y=n.n(b),v=n(184),g=n.n(v),h=n(185),O=n.n(h),E=n(118),w=n(268),j=n(577),_=n(576),S=n(299),k=n(532),C=n(296),P=n(300),D=n(1610),I=n(869),T=n.n(I),R=n(0),N=n.n(R),x=n(1623),A=n.n(x),M=n(2),L=n.n(M),z=n(186),F=n(158),H=n(150),B=n(335),U=n(1612),V=n(1637),K=n(1625),J=n(336),q=n(535),W=n(1615),X=n(1616),G=(n(1717),n(1622)),Y=n(99),Q=n(1620),Z=n(1621),$=n(8),ee=n(71),te=n(1617);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){u()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ae=function(e){function t(e){var n;return f()(this,t),(n=y()(this,g()(t).call(this,e))).downloadReport=function(e){var t=n.state,r=t.opt_out,a=t.filter,o=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",i=Object(U.i)({opt_out:r,filter:a,data_format:e,page:1,page_size:Number.MAX_SAFE_INTEGER}).payload;i&&i.then(function(t){var n=t.data,r="json"===e?JSON.stringify(n):n;return Object(D.downloadFile)(r,"vulnerability_systems--".concat(o),e)})},n.apply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState(re({},n.state,{},e),n.sendRequest)},n.sendRequest=function(){(0,n.props.fetchData)(re({},n.state)),n.createUrlParams(n.state)},n.createUrlParams=function(e){var t=re({},e),r=["filter","page","page_size"];Object.keys(e).forEach(function(e){return(void 0===t[e]||""===t[e]||!r.includes(e)||!1===t[e])&&delete t[e]});var a=A.a.stringify(t);n.props.history.push("?"+a)},n.addFilter=function(e,t,r){var a;a="radio"===r||"show_all"===e?u()({},e,t):n.state[e]?u()({},e,"".concat(n.state[e],",").concat(t)):u()({},e,t),n.apply(re({},a,{page:1}))},n.doOptOut=function(e){e.size>0&&n.props.optOutSystems(e,!n.state.opt_out).then(function(){n.props.fetchData(re({},n.params(),{page:1})),!1===n.state.opt_out?n.props.addNotification({variant:"success",title:n.props.intl.formatMessage($.a.systemsExcludedNotification,{count:e.size||0})}):n.props.addNotification({variant:"success",title:n.props.intl.formatMessage($.a.systemsResumedNotificationTitle,{count:e.size||0}),description:n.props.intl.formatMessage($.a.systemsResumedNotificationBody)}),n.setState({selected:new Set})})},n.onSelect=function(e){var t;!e.data||Array.isArray(e.data)?t=new Set(e.data):(t=n.state.selected,e.data.selected?t.add(e.data.id):t.delete(e.data.id)),n.setState({selected:t},n.props.selectMultiple)},n.getSelected=function(){return n.state.selected},n.params=function(){var e=n.state;return{filter:e.filter,opt_out:e.opt_out,page:e.page,page_size:e.page_size}},n.handleFilterChange=T()(function(e){var t=n.props.systems.meta.page_size;n.apply({filter:e,page_size:t,page:1})},400),n.handleRefresh=function(e){var t=e.page,r=e.per_page,a=n.props.systems.meta,o=n.props.fetchData;if(a.page!==t||a.page_size!==r){var i={page:t,page_size:r||a.page_size,filter:n.state.filter,opt_out:n.state.opt_out};o(i),n.createUrlParams(i)}a.total_items<=r&&n.inventory.current&&n.inventory.current.onRefreshData({page:t,per_page:r,perPage:r})},n.handleOptOut=function(){n.setState({opt_out:!n.state.opt_out,selected:new Set,page:1},n.sendRequest)},n.handleKebabToggle=function(e){n.setState({isKebabOpen:e})},n.handleKebabSelect=function(){n.setState({isKebabOpen:!n.state.isKebabOpen})},n.inventory=L.a.createRef(),n.state={InventoryCmp:function(){return L.a.createElement("div",null,"Loading...")},filter:void 0,removeListener:function(){},columns:[{key:"display_name",title:n.props.intl.formatMessage($.a.systemsColumnHeaderName),composed:["facts.os_release","display_name"]},{key:"cve_count",title:n.props.intl.formatMessage($.a.systemsColumnHeaderCveCount)}],opt_out:!1,isKebabOpen:!1,selectListener:J.b.addNew({on:"SELECT_ENTITY",callback:function(e){return n.onSelect(e)}}),selectAllListener:J.b.addNew({on:"SELECT_ENTITIES",callback:function(e){return n.onSelect(e)}}),selected:new Set},n}var n;return O()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=A.a.parse(this.props.location.search);e.show_irrelevant="true"===e.show_irrelevant,e.show_irrelevant&&(e.show_all=void 0),this.fetchInventory(),this.apply(re({},e))}},{key:"shouldComponentUpdate",value:function(e){return!e.systems.isLoading}},{key:"fetchInventory",value:(n=s()(i.a.mark(function e(){var t,n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:L.a,reactRouterDom:F,reactCore:E,reactIcons:S,pfReactTable:k});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,a=t.mergeWithDetail,J.a.register(re({},r(Object(V.a)(this.state.columns,this.getSelected)),{},a())),this.setState({InventoryCmp:n(J.a.getStore()).InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.InventoryCmp,r=t.filter,o=this.props.systems,i=o.data,c=o.meta,s=i.map(function(e){var t=e.attributes,n=t.cve_count,r=a()(t,["cve_count"]);return re({cve_count:c.opt_out?"Excluded":n,id:e.attributes.inventory_id},r)}),l=[Object(X.e)(function(){return e.doOptOut(e.state.selected)},this.state.opt_out,{isDisabled:!this.getSelected().size}),Object(X.g)(this.handleOptOut,this.state.opt_out),Object(X.b)(this.downloadReport,{isDisabled:0===i.length}),Object(X.a)(this.downloadReport,{isDisabled:0===i.length})];return L.a.createElement(w.a,null,L.a.createElement(q.a,{showBreadcrumb:!1}),L.a.createElement(C.Main,null,L.a.createElement(n,{ref:this.inventory,hasCheckbox:0!==i.length,page:c.page,total:c.total_items,perPage:c.page_size,onRefresh:this.handleRefresh,items:s,actions:Object(te.g)(this.doOptOut,this.state.opt_out)},L.a.createElement(j.a,{className:"systems-toolbar"},L.a.createElement(_.a,null,L.a.createElement(G.a,{selectedItems:this.state.selected,selectorHandler:this.props.selectRows,items:this.props.systems,fetchResource:function(t){return Object(U.i)(re({},e.params(),{},t))}})),L.a.createElement(_.a,null,L.a.createElement(Z.a,{placeholder:this.props.intl.formatMessage($.a.searchFilterByName),value:r,apply:this.apply})),L.a.createElement(_.a,null,L.a.createElement(W.a,{dropdownItems:l}))),L.a.createElement(C.TableToolbar,{className:"pf-u-pl-0 system-filter-chips"},L.a.createElement(j.a,null,L.a.createElement(_.a,null,L.a.createElement(Q.a,{filterValues:this.params(),filterCategories:[Y.x],apply:this.apply})))))))}}]),t}(L.a.Component);ae.propTypes={fetchData:N.a.func,systems:B.c,optOutSystems:N.a.func,addNotification:N.a.func,selectRows:N.a.func,selectMultiple:N.a.func,history:N.a.object,location:N.a.object,intl:N.a.any};t.default=Object(ee.c)(Object(H.o)(Object(z.connect)(function(e){return{systems:Object(K.a)(e)}},function(e){return{setHeader:function(t){return e(Object(U.o)(t))},fetchData:function(t){return e(Object(U.i)(t))},optOutSystems:function(t,n){return e(Object(U.l)(t,n))},addNotification:function(t){return e(Object(P.addNotification)(t))},selectRows:function(t,n){return e(Object(U.n)(t,n))},selectMultiple:function(){return e({type:"SELECT_MULTIPLE_ENTITIES"})}}})(ae)))},1717:function(e,t,n){var r=n(1718);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(22)(r,a);r.locals&&(e.exports=r.locals)},1718:function(e,t,n){(e.exports=n(21)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n\n.system-filter-chips {\n  order: 6;\n  flex-basis: 100%; }\n",""])}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map