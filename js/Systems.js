(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{356:function(t,e,n){"use strict";n.r(e);var r=n(357),a=n(377),o=n(385),i=n(374),c=n(371),s=n(380),u=n(369),l=n(386),f=n(375),p=n(372),d=n(368),b=n(379),m=n(367);n.d(e,"TableGridBreakpoint",function(){return r.d}),n.d(e,"TableVariant",function(){return r.e}),n.d(e,"SortByDirection",function(){return r.a}),n.d(e,"TableContext",function(){return r.c}),n.d(e,"Table",function(){return r.b}),n.d(e,"ActionsColumn",function(){return a.a}),n.d(e,"TableBody",function(){return o.a}),n.d(e,"BodyCell",function(){return i.a}),n.d(e,"BodyWrapper",function(){return c.a}),n.d(e,"CollapseColumn",function(){return s.a}),n.d(e,"ExpandableRowContent",function(){return u.a}),n.d(e,"TableHeader",function(){return l.a}),n.d(e,"HeaderCell",function(){return f.a}),n.d(e,"RowWrapper",function(){return p.a}),n.d(e,"SelectColumn",function(){return d.a}),n.d(e,"SortColumn",function(){return b.a}),n.d(e,"selectable",function(){return m.s}),n.d(e,"sortable",function(){return m.t}),n.d(e,"cellActions",function(){return m.c}),n.d(e,"cellWidth",function(){return m.d}),n.d(e,"wrappable",function(){return m.v}),n.d(e,"textCenter",function(){return m.u}),n.d(e,"collapsible",function(){return m.f}),n.d(e,"expandedRow",function(){return m.l}),n.d(e,"expandable",function(){return m.k}),n.d(e,"compoundExpand",function(){return m.g}),n.d(e,"headerCol",function(){return m.m}),n.d(e,"classNames",function(){return m.e}),n.d(e,"Visibility",function(){return m.a}),n.d(e,"emptyTD",function(){return m.j}),n.d(e,"scopeColTransformer",function(){return m.r}),n.d(e,"emptyCol",function(){return m.i}),n.d(e,"parentId",function(){return m.q}),n.d(e,"mapProps",function(){return m.p}),n.d(e,"mapOpenedRows",function(){return m.o}),n.d(e,"calculateColumns",function(){return m.b}),n.d(e,"defaultTitle",function(){return m.h}),n.d(e,"isRowExpanded",function(){return m.n})},367:function(t,e,n){"use strict";var r=n(378);n.d(e,"a",function(){return r.a}),n.d(e,"c",function(){return r.b}),n.d(e,"d",function(){return r.c}),n.d(e,"e",function(){return r.d}),n.d(e,"f",function(){return r.e}),n.d(e,"g",function(){return r.f}),n.d(e,"i",function(){return r.g}),n.d(e,"j",function(){return r.h}),n.d(e,"k",function(){return r.i}),n.d(e,"l",function(){return r.j}),n.d(e,"m",function(){return r.k}),n.d(e,"p",function(){return r.l}),n.d(e,"q",function(){return r.m}),n.d(e,"r",function(){return r.n}),n.d(e,"s",function(){return r.o}),n.d(e,"t",function(){return r.p}),n.d(e,"u",function(){return r.q}),n.d(e,"v",function(){return r.r});var a=n(364);n.d(e,"b",function(){return a.a}),n.d(e,"o",function(){return a.b});var o=n(370);n.d(e,"h",function(){return o.a});var i=n(384);n.d(e,"n",function(){return i.a})},387:function(t,e,n){"use strict";var r=n(348),a=n.n(r),o=n(420),i=n(139),c=n(355),s=n(2),u=n.n(s),l=n(362);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function d(t){var e=t.isLoading;if(!e){var n=t.payload.asMutable(),r=n.data,a=n.meta;return{data:r.map(function(e){return p({},e,{attributes:p({},e.attributes,{status:u.a.createElement("span",null,u.a.createElement(l.a,{currentStatusName:e.attributes.status_name,currentStatusId:e.attributes.status_id,systemId:e.id,cveName:t.cve,hasNotification:!0}))})})}),meta:a,isLoading:e}}return{data:t.payload&&t.payload.data||[],meta:{},isLoading:e}}function b(t){return u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cve.mitre.org/cgi-bin/cvename.cgi?name="+t},"MITRE Database ",u.a.createElement(i.a,null))}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}n.d(e,"b",function(){return y}),n.d(e,"c",function(){return v}),n.d(e,"a",function(){return h});var y=Object(o.createSelector)([function(t){return t.CVEStore.cveDetails}],function(t){var e,n=t.isLoading;if(!n){var r=t.payload.asMutable(),a=r.data,o=r.meta;return{data:a={impact:a.attributes.impact,public_date:Object(c.processDate)(a.attributes.public_date),description:a.attributes.description,synopsis:a.attributes.synopsis,rh_link:(e=a.attributes.synopsis,u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://access.redhat.com/security/cve/"+e},"View in Red Hat CVE database ",u.a.createElement(i.a,null))),mitre_link:b(a.attributes.synopsis),cvss3_score:a.attributes.cvss3_score,cvss2_score:a.attributes.cvss2_score,cvss2_metrics:a.attributes.cvss2_metrics,cvss3_metrics:a.attributes.cvss3_metrics,business_risk:a.attributes.business_risk,business_risk_justification:a.attributes.business_risk_text,business_risk_id:a.attributes.business_risk_id},meta:o,isLoading:n}}return{data:[],meta:{},isLoading:n}}),v=Object(o.createSelector)([function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t.CVEStore.affectedSystemsByCVE,{cve:e})}],d),h=Object(o.createSelector)([function(t){return t.SystemsStore}],d)},420:function(t,e,n){"use strict";function r(t,e){return t===e}function a(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,a=0;a<r;a++)if(!t(e[a],n[a]))return!1;return!0}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return a(e,n,arguments)||(o=t.apply(null,arguments)),n=arguments,o}}function i(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(t){return"function"==typeof t})){var n=e.map(function(t){return typeof t}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];var c=0,s=r.pop(),u=i(r),l=t.apply(void 0,[function(){return c++,s.apply(null,arguments)}].concat(n)),f=o(function(){for(var t=[],e=u.length,n=0;n<e;n++)t.push(u[n].apply(null,arguments));return l.apply(null,t)});return f.resultFunc=s,f.recomputations=function(){return c},f.resetRecomputations=function(){return c=0},f}}e.__esModule=!0,e.defaultMemoize=o,e.createSelectorCreator=c,e.createStructuredSelector=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if("object"!=typeof t)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);var n=Object.keys(t);return e(n.map(function(e){return t[e]}),function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(t,e,r){return t[n[r]]=e,t},{})})};var s=e.createSelector=c(o)},421:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(348),a=n.n(r);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var c={columns:[],rows:[],entities:[]};function s(t,e,n){if(e.loaded){var r=n();return i({},e,{rows:e.rows.filter(function(t){return t.insights_id}).map(function(t){return i({},t,{selected:r.has(t.id)})}),columns:t})}return e}var u=function(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOAD_ENTITIES_FULFILLED":return s(t,n,e);default:return n}}}},680:function(t,e,n){"use strict";n.r(e);var r=n(125),a=n.n(r),o=n(106),i=n.n(o),c=n(126),s=n.n(c),u=n(348),l=n.n(u),f=n(75),p=n.n(f),d=n(76),b=n.n(d),m=n(77),y=n.n(m),v=n(78),h=n.n(v),g=n(79),O=n.n(g),_=n(204),w=n(64),j=n(179),S=n(93),E=n(153),k=n(137),C=n(12),P=n(356),D=n(350),T=n(73),x=n(355),I=n(416),N=n.n(I),R=n(1),L=n.n(R),z=n(2),F=n.n(z),A=n(72),K=n(121),V=n(343),M=n(360),B=n(358),H=n(354),W=n(421),J=n(387),q=n(80),U=n(381);n(681);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(n,!0).forEach(function(e){l()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Y=function(t){function e(t){var n;return p()(this,e),(n=y()(this,h()(e).call(this,t))).downloadReport=function(t){var e=n.state,r=e.opt_out,a=e.filter,o=Object(H.i)({opt_out:r,filter:a,data_format:t,page:1,page_size:Number.MAX_SAFE_INTEGER}).payload;o&&o.then(function(e){var n=e.data,r="json"===t?JSON.stringify(n):n;return Object(x.downloadFile)(r,"systems-".concat((new Date).toISOString()),t)})},n.apply=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState(X({},n.state,{},t),function(){n.props.fetchData(n.params())})},n.addFilter=function(t,e,r){var a;a="radio"===r||"show_all"===t?l()({},t,e):n.state[t]?l()({},t,"".concat(n.state[t],",").concat(e)):l()({},t,e),n.apply(X({},a,{page:1}))},n.doOptOut=function(){n.state.selected.size>0&&n.props.optOutSystems(n.state.selected,!n.state.opt_out).then(function(){n.props.fetchData(X({},n.params(),{page:1})),!1===n.state.opt_out?n.props.addNotification({variant:"success",title:n.state.selected.size+" systems successfully excluded from vulnerability analysis"}):n.props.addNotification({variant:"success",title:n.state.selected.size+" systems successfully resumed vulnerability analysis",description:"There may be 24 hours before data is available"}),n.setState({selected:new Set})})},n.onSelect=function(t){var e=n.state.selected;t.data.selected?e.add(t.data.id):e.delete(t.data.id),n.setState({selected:e})},n.getSelected=function(){return n.state.selected},n.params=function(){var t=n.state;return{filter:t.filter,opt_out:t.opt_out,page:t.page,page_size:t.page_size}},n.handleFilterChange=N()(function(t){var e=n.props.systems.meta.page_size;n.apply({filter:t,page_size:e})},400),n.handleRefresh=function(t){var e=t.page,r=t.per_page,a=n.props.systems.meta;a.page===e&&a.page_size===r||n.apply({page:a.page_size!==r?1:e,page_size:r,filter:n.state.filter})},n.handleOptOut=function(){n.setState({opt_out:!n.state.opt_out,selected:new Set,page:1}),n.handleFilterChange(n.state.filter)},n.handleKebabToggle=function(t){n.setState({isKebabOpen:t})},n.handleKebabSelect=function(){n.setState({isKebabOpen:!n.state.isKebabOpen})},n.state={InventoryCmp:function(){return F.a.createElement("div",null,"Loading...")},filter:"",removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","display_name"]},{key:"cve_count",title:"Number of CVEs"},{key:"updated",title:"Last Seen",isTime:!0}],opt_out:!1,isKebabOpen:!1,selectListener:q.b.addNew({on:"SELECT_ENTITY",callback:function(t){return n.onSelect(t)}}),selected:new Set},n}var n;return O()(e,t),b()(e,[{key:"componentDidMount",value:function(){this.props.fetchData(),this.fetchInventory()}},{key:"fetchInventory",value:(n=s()(i.a.mark(function t(){var e,n,r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,insights.loadInventory({react:F.a,reactRouterDom:K,reactCore:_,reactIcons:C,pfReactTable:P});case 2:e=t.sent,n=e.inventoryConnector,r=e.mergeWithEntities,a=e.mergeWithDetail,q.a.register(X({},r(Object(W.a)(this.state.columns,this.getSelected)),{},a())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.state.InventoryCmp,n=this.props.systems,r=n.data,o=n.meta,i=r.map(function(t){var e=t.attributes,n=e.cve_count,r=a()(e,["cve_count"]);return X({cve_count:o.opt_out?"Excluded":n,id:t.attributes.inventory_id},r)});return F.a.createElement(w.a,null,F.a.createElement(U.a,{showBreadcrumb:!1}),F.a.createElement(D.Main,null,F.a.createElement(e,{hasCheckbox:0!==r.length,page:o.page,total:o.total_items,perPage:o.page_size,onRefresh:this.handleRefresh,items:i},F.a.createElement(j.a,{className:"systems-toolbar"},F.a.createElement("div",null,F.a.createElement(D.SimpleTableFilter,{onFilterChange:this.handleFilterChange,buttonTitle:null,placeholder:"Find a system by UUID"})),F.a.createElement("div",null,F.a.createElement(S.b,{onSelect:this.handleKebabSelect,toggle:F.a.createElement(E.a,{onToggle:this.handleKebabToggle}),isOpen:this.state.isKebabOpen,isPlain:!0,dropdownItems:[F.a.createElement(k.a,{key:"do_opt_out",component:"button",onClick:function(){return t.doOptOut()}},this.state.opt_out?"Resume analysis for system":"Exclude system from analysis"),F.a.createElement(k.a,{key:"opt_out",component:"button",onClick:function(){return t.handleOptOut()}},this.state.opt_out?"Hide systems excluded from analysis":"Show systems excluded from analysis"),F.a.createElement(k.a,{key:"csv",component:"button",onClick:function(){return t.downloadReport("csv")}},"Export as CSV"),F.a.createElement(k.a,{key:"json",component:"button",onClick:function(){return t.downloadReport("json")}},"Export as JSON")]}))))))}}]),e}(F.a.Component);Y.propTypes={fetchData:L.a.func,systems:B.c,optOutSystems:L.a.func,addNotification:L.a.func};e.default=Object(V.a)(Object(A.connect)(function(t){return{systems:Object(J.a)(t)}},function(){return{setHeader:function(t){return Object(M.a)(Object(H.m)(t))},fetchData:function(t){return Object(M.a)(Object(H.i)(t))},optOutSystems:function(t,e){return Object(M.a)(Object(H.k)(t,e))},addNotification:function(t){return Object(M.a)(Object(T.addNotification)(t))}}})(Y))},681:function(t,e,n){var r=n(682);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,a);r.locals&&(t.exports=r.locals)},682:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n",""])}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map