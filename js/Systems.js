(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{681:function(e,t,n){"use strict";n.r(t);var a=n(128),r=n.n(a),o=n(106),s=n.n(o),i=n(125),c=n.n(i),l=n(352),p=n.n(l),u=n(75),f=n.n(u),m=n(76),b=n.n(m),d=n(77),h=n.n(d),y=n(78),v=n.n(y),g=n(79),O=n.n(g),w=n(208),_=n(64),j=n(178),E=n(93),S=n(155),k=n(141),C=n(12),I=n(363),x=n(353),D=n(358),P=n(383),T=n.n(P),F=n(553),K=n.n(F),R=n(1),z=n.n(R),N=n(2),L=n.n(N),J=n(72),M=n(121),A=n(348),H=n(360),U=n(369),V=n(357),W=n(557),G=n(387),X=n(80),q=n(368);n(682);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){p()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=function(e){function t(e){var n;return f()(this,t),(n=h()(this,v()(t).call(this,e))).downloadReport=function(e){var t=n.state,a=t.opt_out,r=t.filter,o=Object(V.i)({opt_out:a,filter:r,data_format:e,page:1,page_size:Number.MAX_SAFE_INTEGER}).payload;o&&o.then(function(t){var n=t.data,a="json"===e?JSON.stringify(n):n;return Object(D.downloadFile)(a,"systems-".concat((new Date).toISOString()),e)})},n.apply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState(Q({},n.state,{},e),function(){var e=K()(n.state,["InventoryCmp","columns","removeListener"]);n.props.fetchData(e)})},n.addFilter=function(e,t,a){var r;r="radio"===a||"show_all"===e?p()({},e,t):n.state[e]?p()({},e,"".concat(n.state[e],",").concat(t)):p()({},e,t),n.apply(Q({},r,{page:1}))},n.handleFilterChange=T()(function(e){var t=n.props.systems.meta.page_size;n.apply({filter:e,page_size:t})},400),n.handleRefresh=function(e){var t=e.page,a=e.per_page,r=n.props.systems.meta;r.page===t&&r.page_size===a||n.apply({page:r.page_size!==a?1:t,page_size:a,filter:n.state.filter})},n.handleOptOut=function(){n.setState({opt_out:!n.state.opt_out}),n.handleFilterChange(n.state.filter)},n.handleKebabToggle=function(e){n.setState({isKebabOpen:e})},n.handleKebabSelect=function(){n.setState({isKebabOpen:!n.state.isKebabOpen})},n.state={InventoryCmp:function(){return L.a.createElement("div",null,"Loading...")},filter:"",removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","display_name"]},{key:"cve_count",title:"Number of CVEs"},{key:"updated",title:"Last Seen",isTime:!0}],opt_out:!1,isKebabOpen:!1},n}var n;return O()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.props.fetchData(),this.fetchInventory()}},{key:"fetchInventory",value:(n=c()(s.a.mark(function e(){var t,n,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:L.a,reactRouterDom:M,reactCore:w,reactIcons:C,pfReactTable:I});case 2:t=e.sent,n=t.inventoryConnector,a=t.mergeWithEntities,r=t.mergeWithDetail,X.a.register(Q({},a(Object(W.a)(this.state.columns)),{},r())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state.InventoryCmp,n=this.props.systems,a=n.data,o=n.meta,s=a.map(function(e){var t=e.attributes,n=t.cve_count,a=r()(t,["cve_count"]);return Q({cve_count:o.opt_out?"Excluded":n,id:e.attributes.inventory_id},a)});return L.a.createElement(_.a,null,L.a.createElement(q.a,null),L.a.createElement(x.Main,null,L.a.createElement(t,{hasCheckbox:!1,page:o.page,total:o.total_items,perPage:o.page_size,onRefresh:this.handleRefresh,items:s},L.a.createElement(j.a,{className:"systems-toolbar"},L.a.createElement("div",null,L.a.createElement(x.SimpleTableFilter,{onFilterChange:this.handleFilterChange,buttonTitle:null,placeholder:"Find a system by UUID"})),L.a.createElement("div",null,L.a.createElement(E.b,{onSelect:this.handleKebabSelect,toggle:L.a.createElement(S.a,{onToggle:this.handleKebabToggle}),isOpen:this.state.isKebabOpen,isPlain:!0,dropdownItems:[L.a.createElement(k.a,{key:"opt_out",component:"button",onClick:function(){return e.handleOptOut()}},this.state.opt_out?"Hide systems excluded from analysis":"Show systems excluded from analysis"),L.a.createElement(k.a,{key:"csv",component:"button",onClick:function(){return e.downloadReport("csv")}},"Export as CSV"),L.a.createElement(k.a,{key:"json",component:"button",onClick:function(){return e.downloadReport("json")}},"Export as JSON")]}))))))}}]),t}(L.a.Component);Y.propTypes={fetchData:z.a.func,systems:U.b};t.default=Object(A.a)(Object(J.connect)(function(e){return{systems:Object(G.a)(e)}},function(){return{setHeader:function(e){return Object(H.a)(Object(V.k)(e))},fetchData:function(e){return Object(H.a)(Object(V.i)(e))}}})(Y))},682:function(e,t,n){var a=n(683);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(6)(a,r);a.locals&&(e.exports=a.locals)},683:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n",""])}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map