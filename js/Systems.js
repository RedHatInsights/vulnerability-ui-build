(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{299:function(e,t,n){"use strict";n.r(t);var a=n(37),s=n.n(a),r=n(138),i=n.n(r),o=n(46),c=n.n(o),u=n(23),p=n.n(u),h=n(24),f=n.n(h),m=n(25),l=n.n(m),v=n(26),y=n.n(v),d=n(27),b=n.n(d),g=n(85),k=n.n(g),I=n(124),L=n(141),_=n(300),w=n(1),S=n.n(w),j=n(2),C=n.n(j),D=n(12),O=n(28),R=n(70),E=n(131),z=n(136),T=n(135),x=n(195),H=n(154),A=n(29),F=n(45),J=function(e){function t(e){var n;return p()(this,t),(n=l()(this,y()(t).call(this,e))).checkItem=n.checkItem.bind(k()(k()(n))),n.onRefresh=n.onRefresh.bind(k()(k()(n))),n.state={InventoryCmp:function(){return C.a.createElement("div",null,"Loading...")},removeListener:function(){},columns:[{key:"display_name",title:"Name",composed:["facts.os_release","fqdn"]},{key:"cve_count",title:"CVEs"},{key:"updated",title:"Last Seen",isTime:!0}]},n}return b()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.setHeader({title:"Systems",breadcrumbs:[{title:"Vulnerability",to:F.b.vulnerabilities},{title:"Systems",isActive:!0}]}),this.props.fetchData(),this.setState({removeListener:A.b.addNew({on:"SYSTEMS_ALL_FULFILLED",callback:function(){return e.fetchInventory()}})})}},{key:"fetchInventory",value:function(){var e=c()(s.a.mark(function e(){var t,n,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:C.a,reactRouterDom:O,reactCore:I,reactIcons:L,pfReact:{PaginationRow:_.a}});case 2:t=e.sent,n=t.inventoryConnector,a=t.mergeWithEntities,r=t.mergeWithDetail,A.a.register(i()({},a(Object(x.a)(this.state.columns)),r())),this.setState({InventoryCmp:n().InventoryTable}),this.state.removeListener();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkItem",value:function(e,t){var n=this.state.systemList;n[e].selected=t,this.setState({systemList:n})}},{key:"onRefresh",value:function(e){var t=e.page,n=e.per_page,a=this.props.systems.meta;a.page===t&&a.page_size===n||this.props.fetchData({page:a.page_size!==n?1:t,page_size:n})}},{key:"render",value:function(){var e=this.state.InventoryCmp,t=this.props.systems,n=t.data,a=t.meta;return C.a.createElement(e,{hasCheckbox:!1,page:a.page,total:a.total_items,perPage:a.page_size,onRefresh:this.onRefresh,items:n.map(function(e){return i()({id:e.attributes.inventory_id},e.attributes)})})}}]),t}(C.a.Component);J.propTypes={fetchData:S.a.func,setHeader:S.a.func,systems:z.a};t.default=Object(R.a)(Object(D.connect)(function(e){return{systems:Object(H.a)(e)}},function(){return{setHeader:function(e){return Object(E.a)(Object(T.f)(e))},fetchData:function(e){return Object(E.a)(Object(T.e)(e))}}})(J))}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map