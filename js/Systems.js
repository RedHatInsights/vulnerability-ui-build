(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1712:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(168),a=r.n(n),o=r(167),s=r.n(o);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){s()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u={columns:[],rows:[],entities:[],selectedRows:[]};function l(e,t){if(t.selectedRows||(t.selectedRows=[]),t.loaded){var r=t.columns.filter(function(e){return"updated"===e.key});return i({},t,{rows:t.rows.map(function(e){return i({},e,{selected:t.selectedRows.some(function(t){return t===e.id})})}),columns:[].concat(a()(e||[]),a()(r||[]))})}return t}function f(e,t){var r=e.rows.slice();return e.selectedRows||(e.selectedRows=[]),i({},e,{rows:r.map(function(e){return i({},e,{selected:t.some(function(t){return t===e.id})})}),selectedRows:a()(t)})}var p=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOAD_ENTITIES_FULFILLED":return l(e,t);case"SELECT_MULTIPLE_ENTITIES":return f(t,r.payload);case"EXPAND_ROW":return i({},t,{rows:t.rows.map(function(e){return i({},e,{isOpen:e.id===r.payload.id?r.payload.isOpen:e.isOpen})})});default:return t}}}},1765:function(e,t,r){var n=r(1766);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,a);n.locals&&(e.exports=n.locals)},1766:function(e,t,r){(e.exports=r(20)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n\n.system-filter-chips {\n  order: 6;\n  flex-basis: 100%; }\n",""])},1771:function(e,t,r){"use strict";r.r(t);var n=r(140),a=r.n(n),o=r(216),s=r.n(o),c=r(303),i=r.n(c),u=r(167),l=r.n(u),f=r(574),p=r.n(f),b=r(488),d=r.n(b),O=r(0),m=r.n(O),g=r(76),y=r(8),j=r(125),v=r(124),h=r(190),w=r(191),S=r(451),_=r(168),E=r.n(_),P=(r(1765),r(2)),R=r.n(P),D=r(159),k=r(342),x=r(1690),T=r(67),C=r(341),H=r(1695),N=r(189),I=r(1696),L=r(1697),M=r(1698);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var F=function(e){var t=Object(k.f)(e,T.p),r=i()(t,1)[0];C.b.addNew({on:"SELECT_ENTITY",callback:function(t){return function(t){var r=t.data.selected?[t.data.id].concat(E()(e.selectedHosts)):e.selectedHosts.filter(function(e){return e!==t.data.id});e.handleSelect(!1,r)}(t)}});var n=function(t,n){var a=t.page,o=t.page_size,s=t.filter,c=t.opt_out,i=e.systems.meta;if(i.page!==a||i.page_size!==o){var u={page:a,page_size:o||i.page_size,filter:s,opt_out:c||e.params().opt_out};if(r(u),e.setFilter(u.filter),n)return n(u)}},a=["",{label:e.params().opt_out?e.intl.formatMessage(y.a.kebabResumeAnalysis):e.intl.formatMessage(y.a.kebabExcludeVulnerabilityAnalysis),onClick:function(){return e.doOptOut()},props:{isDisabled:!e.selectedHosts.length}},{label:e.params().opt_out?e.intl.formatMessage(y.a.kebabHideExcludedSystems):e.intl.formatMessage(y.a.kebabShowExcludedSystems),onClick:function(){e.setOptOut(!e.params().opt_out),e.setSelectedHosts([]),e.setPage(1)}}],o=Object(H.a)({selectedItems:e.selectedHosts,selectorHandler:e.handleSelect,items:e.systems,fetchResource:function(e){return n(e,function(e){return Object(x.m)(e)})}});return R.a.createElement(N.PrimaryToolbar,{bulkSelect:{count:e.selectedHosts.length,items:o.items,checked:Boolean(e.selectedHosts.length),onSelect:function(){return o.handleOnCheckboxChange()}},actionsConfig:{actions:a,dropdownProps:{className:"custom-class"}},filterConfig:{items:[Object(I.a)(y.a.systemsSearchName,y.a.searchFilterByName,e.params().filter,function(t){return n(t,e.onRefresh)})]},activeFiltersConfig:{filters:Object(L.a)(e.parameters),onDelete:function(t,r){return Object(L.e)(r,function(t){return n(t,e.onRefresh)})}},exportConfig:Object(L.b)({downloadReport:function(t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach(function(t){l()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.params);M.a.exec(x.m,r,t,"system-list")}})})};F.propTypes={systems:k.c,params:m.a.func,setPage:m.a.func,setFilter:m.a.func,setOptOut:m.a.func,selectedHosts:m.a.array,setSelectedHosts:m.a.func,doOptOut:m.a.func,onRefresh:m.a.any,parameters:m.a.object,handleSelect:m.a.func,intl:m.a.any};var A=Object(D.o)(Object(g.c)(F)),B=r(1694),W=r(575),J=r(304),U=r(1712);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(r,!0).forEach(function(t){l()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Y=function(e){var t=e.intl,r=e.location,n=Object(P.useState)(function(){return function(){return R.a.createElement("div",null,"Loading...")}}),o=i()(n,2),c=o[0],u=o[1],l=Object(P.useState)(d.a.parse(r.search).filter),f=i()(l,2),b=f[0],O=f[1],m=Object(P.useState)(void 0),g=i()(m,2),_=g[0],E=g[1],D=Object(P.useState)(!1),k=i()(D,2),H=k[0],I=k[1],L=Object(P.useState)(1),M=i()(L,2),z=M[0],F=M[1],V=Object(P.useState)(10),Y=i()(V,1)[0],q=R.a.createRef(),G=Object(w.useDispatch)(),K=Object(w.useSelector)(function(e){return e.SystemsStore.payload}),Q=Object(w.useSelector)(function(e){return e.SystemsStore.params}),Z=Object(w.useSelector)(function(e){return e.SystemsStore.metadata}),$=Object(w.useSelector)(function(e){return e.SystemsStore.isLoading}),ee=Object(P.useMemo)(function(){return t=(e=K).data,r=e.meta,t&&t.map(function(e){var t=e.attributes,n=t.cve_count,a=p()(t,["cve_count"]);return X({cve_count:r.opt_out?"Excluded":n,id:e.attributes.inventory_id},a)})||[];var e,t,r},[K]),te=function(){return{filter:b,page_size:Y,opt_out:H,page:z}};Object(P.useEffect)(function(){0!==Object.keys(Q).length&&Q.constructor===Object&&G(Object(x.m)(Q))},[Q,G]);var re=function(){var e=s()(a.a.mark(function e(){var t,r,n,o,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:R.a,reactRouterDom:j,reactCore:v,reactIcons:h,pfReactTable:S});case 2:t=e.sent,r=t.inventoryConnector,n=t.mergeWithEntities,o=t.mergeWithDetail,C.a.register(X({},n(Object(U.a)(T.s)),{},o())),s=r(C.a.getStore()),c=s.InventoryTable,u(function(){return c});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(P.useEffect)(function(){re()},[]),Object(P.useEffect)(function(){_&&G(Object(x.r)(_))},[_,G]),Object(P.useEffect)(function(){$||G(Object(x.m)(X({},te())))},[H]);var ne=function(e){var t=e.page,r=e.per_page,n=e.opt_out,a=e.filter;Z.page===t&&Z.page_size===r||G(Object(x.d)({page:t,per_page:r,opt_out:n||te().opt_out,filter:void 0===a?te().filter:a})),Z.total_items<=r&&q.current&&q.current.onRefreshData({page:t,perPage:r,opt_out:n||te().opt_out,filter:a})},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(_&&_.length>0||e)&&G(Object(x.p)(e||_,!H)).then(function(){G(Object(x.m)({filter:b,opt_out:H,page_size:Y,page:1})),G(!1===H?Object(J.addNotification)({variant:"success",title:t.formatMessage(y.a.systemsExcludedNotification,{count:e?1:_.length||0})}):Object(J.addNotification)({variant:"success",title:t.formatMessage(y.a.systemsResumedNotificationTitle,{count:e?1:_.length||0}),description:t.formatMessage(y.a.systemsResumedNotificationBody)})),E([])})};return R.a.createElement(P.Fragment,null,R.a.createElement(W.a,{showBreadcrumb:!1}),R.a.createElement(N.Main,null,c&&R.a.createElement(c,{ref:q,items:ee,page:Z&&Z.page||1,perPage:Z&&Z.page_size||20,total:Z&&Z.total_items||0,onRefresh:ne,isLoaded:!$,hasCheckbox:0!==K.length,actions:Object(B.g)(ae,H)},K.data&&R.a.createElement(A,{params:te,systems:K,parameters:Q,selectedHosts:_||[],setSelectedHosts:E,setOptOut:I,setFilter:O,setPage:F,doOptOut:ae,onRefresh:ne,handleSelect:function(e,t){t||(t=[]),E(t)}}))))};Y.propTypes={location:m.a.object,intl:m.a.any};t.default=Object(g.c)(Y)}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map