(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1701:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(168),o=n.n(r),a=n(167),c=n.n(a);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={columns:[],rows:[],entities:[],selectedRows:[]};function l(e,t){if(t.selectedRows||(t.selectedRows=[]),t.loaded){var n=t.columns.filter((function(e){return"updated"===e.key}));return i({},t,{rows:t.rows.map((function(e){return i({},e,{selected:t.selectedRows.some((function(t){return t===e.id}))})})),columns:[].concat(o()(e||[]),o()(n||[]))})}return t}function p(e,t){var n=e.rows.slice();return e.selectedRows||(e.selectedRows=[]),i({},e,{rows:n.map((function(e){return i({},e,{selected:t.some((function(t){return t===e.id}))})})),selectedRows:o()(t)})}var f=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_ENTITIES_FULFILLED":return l(e,t);case"SELECT_MULTIPLE_ENTITIES":return p(t,n.payload);case"EXPAND_ROW":return i({},t,{rows:t.rows.map((function(e){return i({},e,{isOpen:e.id===n.payload.id?n.payload.isOpen:e.isOpen})}))});default:return t}}}},1763:function(e,t,n){var r=n(1764);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(22)(r,o);r.locals&&(e.exports=r.locals)},1764:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n\n.system-filter-chips {\n  order: 6;\n  flex-basis: 100%; }\n",""])},1769:function(e,t,n){"use strict";n.r(t);var r=n(140),o=n.n(r),a=n(217),c=n.n(a),s=n(213),i=n.n(s),u=n(167),l=n.n(u),p=n(569),f=n.n(p),b=n(0),d=n.n(b),m=n(76),O=n(10),y=n(113),g=n(125),j=n(190),v=n(191),h=n(449),w=n(168),S=n.n(w),E=(n(1763),n(2)),P=n.n(E),_=n(159),D=n(341),k=n(1688),R=n(342),x=n(1693),T=n(189),C=n(1695),I=n(1698),N=n(1694);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(e){var t=e.selectedHosts,n=e.intl,r=e.parameters,o=e.systems,a=e.methods,c=a.apply,s=a.handleSelect,i=a.doOptOut,u=a.setSelectedHosts;R.b.addNew({on:"SELECT_ENTITY",callback:function(e){return function(e){var n=e.data.selected?[e.data.id].concat(S()(t)):t.filter((function(t){return t!==e.data.id}));s(!1,n)}(e)}});var l=["",{label:r.opt_out?n.formatMessage(O.a.kebabResumeAnalysis):n.formatMessage(O.a.kebabExcludeVulnerabilityAnalysis),onClick:function(){return i()},props:{isDisabled:!t.length}},{label:r.opt_out?n.formatMessage(O.a.kebabHideExcludedSystems):n.formatMessage(O.a.kebabShowExcludedSystems),onClick:function(){c({opt_out:!r.opt_out,page:1}),u([])}}],p=Object(x.a)({selectedItems:t,selectorHandler:s,items:o,fetchResource:function(e){return Object(k.p)(M({},r,{},e))}});return P.a.createElement(T.PrimaryToolbar,{bulkSelect:{count:t.length,items:p.items,isDisabled:0===o.meta.total_items&&0===t.length,checked:Boolean(t.length),onSelect:function(){return p.handleOnCheckboxChange()}},actionsConfig:{actions:l},filterConfig:{items:[Object(C.a)(O.a.systemsSearchName,O.a.searchFilterByName,r.filter,c)]},activeFiltersConfig:{filters:Object(I.a)(r),onDelete:function(e,t){return Object(I.e)(t,c)}},exportConfig:M({isDisabled:0===o.meta.total_items},Object(I.b)({downloadReport:function(e){var t=M({},r);N.a.exec(k.p,t,e,"system-list")}}))})};H.propTypes={systems:D.d,parameters:d.a.object,selectedHosts:d.a.array,methods:d.a.shape({doOptOut:d.a.func,apply:d.a.func,handleSelect:d.a.func,setSelectedHosts:d.a.func}),intl:d.a.any};var F=Object(_.o)(Object(m.c)(H)),A=n(38),B=n(1692),z=n(571),W=n(303),J=n(1701);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t=e.intl,n=Object(E.useState)((function(){return function(){return P.a.createElement("div",null,"Loading...")}})),r=i()(n,2),a=r[0],s=r[1],u=Object(D.g)(A.s),l=i()(u,2),p=l[0],b=l[1],d=Object(E.useState)(!0),m=i()(d,2),w=m[0],S=m[1],_=Object(E.useState)(!1),x=i()(_,2),C=x[0],I=x[1],N=P.a.createRef(),L=Object(v.useDispatch)(),M=Object(v.useSelector)((function(e){return e.SystemsStore.payload})),H=Object(v.useSelector)((function(e){return e.SystemsStore.params})),U=Object(v.useSelector)((function(e){return e.SystemsStore.metadata})),X=Object(E.useState)(void 0),Y=i()(X,2),q=Y[0],G=Y[1],K=Object(v.useSelector)((function(e){return e.SystemsStore.isLoading})),Q=Object(E.useMemo)((function(){return t=(e=M).data,n=e.meta,t&&t.map((function(e){var t=e.attributes,r=t.cve_count,o=f()(t,["cve_count"]);return V({cve_count:n.opt_out?"Excluded":r,id:e.attributes.inventory_id},o)}))||[];var e,t,n}),[M]),Z=function(){var e=c()(o.a.mark((function e(){var t,n,r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:P.a,reactRouterDom:y,reactCore:g,reactIcons:j,pfReactTable:h});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,a=t.mergeWithDetail,R.a.register(V({},r(Object(J.a)(A.v)),{},a())),c=n(R.a.getStore()),i=c.InventoryTable,s((function(){return i}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.useEffect)((function(){return Z(),function(){L(Object(k.g)())}}),[]),Object(E.useEffect)((function(){q&&L(Object(k.u)(q))}),[q,L]);var $=function(e){L(Object(k.d)(e))};Object(E.useEffect)((function(){w?($(b),S(!1)):(L(Object(k.p)(H)),C&&p(V({},H))||I(!0))}),[H]);var ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(q&&q.length>0||e)&&L(Object(k.s)(e||q,!H.opt_out)).then((function(){L(Object(k.p)(V({},H,{page:1}))),!1===H.opt_out?L(Object(W.addNotification)({variant:"success",title:t.formatMessage(O.a.systemsExcludedNotification,{count:e?1:q.length||0})})):L(Object(W.addNotification)({variant:"success",title:t.formatMessage(O.a.systemsResumedNotificationTitle,{count:e?1:q.length||0}),description:t.formatMessage(O.a.systemsResumedNotificationBody)})),G([])}))};return P.a.createElement(E.Fragment,null,P.a.createElement(z.a,{showBreadcrumb:!1}),P.a.createElement(T.Main,null,a&&P.a.createElement(a,{ref:N,items:Q,page:U&&U.page||1,perPage:U&&U.page_size||20,total:U&&U.total_items||0,onRefresh:function(e){var t=e.page,n=e.per_page;U.page===t&&U.limit===n||$({page:t,page_size:n}),U&&U.total_items<=n&&N.current&&N.current.onRefreshData({page:t,page_size:n})},isLoaded:!K,hasCheckbox:0!==M.length,actions:Object(B.g)(ee,H.optOut)},M.data&&P.a.createElement(F,{parameters:H,systems:M,selectedHosts:q||[],methods:{doOptOut:ee,apply:$,handleSelect:function(e,t){t||(t=[]),G(t)},setSelectedHosts:G}}))))};X.propTypes={intl:d.a.any};t.default=Object(m.c)(X)}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map