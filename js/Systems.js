(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1712:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(167),a=r.n(n),o=r(212),s=r.n(o);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){s()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u={columns:[],rows:[],entities:[],selectedRows:[]};function l(e,t){if(t.selectedRows||(t.selectedRows=[]),t.loaded){var r=t.columns.filter(function(e){return"updated"===e.key});return i({},t,{rows:t.rows.map(function(e){return i({},e,{selected:t.selectedRows.some(function(t){return t===e.id})})}),columns:[].concat(a()(e||[]),a()(r||[]))})}return t}function f(e,t){var r=e.rows.slice();return e.selectedRows||(e.selectedRows=[]),i({},e,{rows:r.map(function(e){return i({},e,{selected:t.some(function(t){return t===e.id})})}),selectedRows:a()(t)})}var p=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOAD_ENTITIES_FULFILLED":return l(e,t);case"SELECT_MULTIPLE_ENTITIES":return f(t,r.payload);case"EXPAND_ROW":return i({},t,{rows:t.rows.map(function(e){return i({},e,{isOpen:e.id===r.payload.id?r.payload.isOpen:e.isOpen})})});default:return t}}}},1766:function(e,t,r){var n=r(1767);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,a);n.locals&&(e.exports=n.locals)},1767:function(e,t,r){(e.exports=r(20)(!1)).push([e.i,".systems-toolbar > div {\n  margin-right: var(--pf-global--spacer--sm); }\n\n.space-between-toolbar-items {\n  justify-content: space-between;\n  flex-wrap: nowrap; }\n  .space-between-toolbar-items > div {\n    flex-wrap: nowrap; }\n\n.vulnerability-toolbar-spacing {\n  justify-content: flex-start; }\n  .vulnerability-toolbar-spacing > div:not(:last-child) {\n    margin-right: var(--pf-global--spacer--sm); }\n\n.system-filter-chips {\n  order: 6;\n  flex-basis: 100%; }\n",""])},1772:function(e,t,r){"use strict";r.r(t);var n=r(140),a=r.n(n),o=r(215),s=r.n(o),c=r(303),i=r.n(c),u=r(212),l=r.n(u),f=r(573),p=r.n(f),b=r(1692),d=r.n(b),O=r(0),m=r.n(O),g=r(76),y=r(8),j=r(125),v=r(124),h=r(189),w=r(190),S=r(451),_=r(167),E=r.n(_),P=(r(1766),r(2)),R=r.n(P),D=r(159),k=r(345),x=r(1688),T=r(341),H=r(1694),N=r(188),I=r(1695),C=r(1696),L=r(1697);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(r,!0).forEach(function(t){l()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var F=function(e){var t=Object(P.useState)(T.b.addNew({on:"SELECT_ENTITY",callback:function(t){return function(t){var r=t.data.selected?[t.data.id].concat(E()(e.selectedHosts)):e.selectedHosts.filter(function(e){return e!==t.data.id});e.handleSelect(!1,r)}(t)}})),r=(i()(t,1)[0],function(t,r){var n=t.page,a=t.page_size,o=t.filter,s=t.opt_out,c=e.systems.meta;if(c.page!==n||c.page_size!==a){var i={page:n,page_size:a||c.page_size,filter:o,opt_out:s||e.params().opt_out};if(function(t){var r=z({},t),n=["filter","page","page_size"];Object.keys(t).forEach(function(e){return(void 0===r[e]||""===r[e]||!n.includes(e)||!1===r[e])&&delete r[e]});var a=d.a.stringify(r);e.setFilter(t.filter),e.history.push("?"+a)}(i),r)return r(i)}}),n=["",Object(C.e)(e.params().opt_out?e.intl.formatMessage(y.a.kebabResumeAnalysis):e.intl.formatMessage(y.a.kebabExcludeVulnerabilityAnalysis),function(){return e.doOptOut()},!e.selectedHosts.length),Object(C.e)(e.params().opt_out?e.intl.formatMessage(y.a.kebabHideExcludedSystems):e.intl.formatMessage(y.a.kebabShowExcludedSystems),function(){return e.setOptOut(!e.params().opt_out),e.setSelectedHosts([]),void e.setPage(1)})],a=Object(H.a)({selectedItems:e.selectedHosts,selectorHandler:e.handleSelect,items:e.systems,fetchResource:function(e){return r(e,function(e){return Object(x.m)(e)})}});return R.a.createElement(N.PrimaryToolbar,{bulkSelect:{count:e.selectedHosts.length,items:a.items,checked:Boolean(e.selectedHosts.length),onSelect:function(){return a.handleOnCheckboxChange()}},actionsConfig:{actions:n,dropdownProps:{className:"custom-class"}},filterConfig:{items:[Object(I.a)(y.a.systemsSearchName,y.a.searchFilterByName,e.params().filter,function(t){return r(t,e.onRefresh)})]},activeFiltersConfig:{filters:Object(C.a)(e.parameters),onDelete:function(t,n){return Object(C.f)(n,function(t){return r(t,e.onRefresh)})}},exportConfig:Object(C.b)({downloadReport:function(t){var r=z({},e.params);L.a.exec(x.m,r,t,"system-list")}})})};F.propTypes={systems:k.c,params:m.a.func,setPage:m.a.func,setFilter:m.a.func,setOptOut:m.a.func,selectedHosts:m.a.array,setSelectedHosts:m.a.func,doOptOut:m.a.func,onRefresh:m.a.any,parameters:m.a.object,handleSelect:m.a.func,history:m.a.object,intl:m.a.any};var A=Object(D.o)(Object(g.c)(F)),B=r(67),W=r(1693),J=r(574),U=r(304),V=r(1712);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(r,!0).forEach(function(t){l()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var q=function(e){var t=e.intl,r=e.location,n=Object(P.useState)(function(){return function(){return R.a.createElement("div",null,"Loading...")}}),o=i()(n,2),c=o[0],u=o[1],l=Object(P.useState)(d.a.parse(r.search).filter),f=i()(l,2),b=f[0],O=f[1],m=Object(P.useState)(void 0),g=i()(m,2),_=g[0],E=g[1],D=Object(P.useState)(!1),k=i()(D,2),H=k[0],I=k[1],C=Object(P.useState)(1),L=i()(C,2),M=L[0],z=L[1],F=Object(P.useState)(10),X=i()(F,1)[0],q=R.a.createRef(),G=Object(w.useDispatch)(),K=Object(w.useSelector)(function(e){return e.SystemsStore.payload}),Q=Object(w.useSelector)(function(e){return e.SystemsStore.params}),Z=Object(w.useSelector)(function(e){return e.SystemsStore.metadata}),$=Object(w.useSelector)(function(e){return e.SystemsStore.isLoading}),ee=Object(P.useMemo)(function(){return t=(e=K).data,r=e.meta,t&&t.map(function(e){var t=e.attributes,n=t.cve_count,a=p()(t,["cve_count"]);return Y({cve_count:r.opt_out?"Excluded":n,id:e.attributes.inventory_id},a)})||[];var e,t,r},[K]),te=function(){return{filter:b,page_size:X,opt_out:H,page:M}};Object(P.useEffect)(function(){0!==Object.keys(Q).length&&Q.constructor===Object&&G(Object(x.m)(Q))},[Q,G]);var re=function(){var e=s()(a.a.mark(function e(){var t,r,n,o,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:R.a,reactRouterDom:j,reactCore:v,reactIcons:h,pfReactTable:S});case 2:t=e.sent,r=t.inventoryConnector,n=t.mergeWithEntities,o=t.mergeWithDetail,T.a.register(Y({},n(Object(V.a)(B.p)),{},o())),s=r(T.a.getStore()),c=s.InventoryTable,u(function(){return c});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(P.useEffect)(function(){re()},[]),Object(P.useEffect)(function(){_&&G(Object(x.r)(_))},[_,G]),Object(P.useEffect)(function(){$||G(Object(x.m)(Y({},te())))},[H]);var ne=function(e){var t=e.page,r=e.per_page,n=e.opt_out,a=e.filter;Z.page===t&&Z.page_size===r||G(Object(x.d)({page:t,per_page:r,opt_out:n||te().opt_out,filter:void 0===a?te().filter:a})),Z.total_items<=r&&q.current&&q.current.onRefreshData({page:t,perPage:r,opt_out:n||te().opt_out,filter:a})},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(_&&_.length>0||e)&&G(Object(x.p)(e||_,!H)).then(function(){G(Object(x.m)({filter:b,opt_out:H,page_size:X,page:1})),G(!1===H?Object(U.addNotification)({variant:"success",title:t.formatMessage(y.a.systemsExcludedNotification,{count:_.length||e&&1||0})}):Object(U.addNotification)({variant:"success",title:t.formatMessage(y.a.systemsResumedNotificationTitle,{count:_.length||e&&1||0}),description:t.formatMessage(y.a.systemsResumedNotificationBody)})),E([])})};return R.a.createElement(P.Fragment,null,R.a.createElement(J.a,{showBreadcrumb:!1}),R.a.createElement(N.Main,null,c&&R.a.createElement(c,{ref:q,items:ee,page:Z&&Z.page||1,perPage:Z&&Z.page_size||20,total:Z&&Z.total_items||0,onRefresh:ne,isLoaded:!$,hasCheckbox:0!==K.length,actions:Object(W.g)(ae,H)},K.data&&R.a.createElement(A,{params:te,systems:K,parameters:Q,selectedHosts:_||[],setSelectedHosts:E,setOptOut:I,setFilter:O,setPage:z,doOptOut:ae,onRefresh:ne,handleSelect:function(e,t){t||(t=[]),E(t)}}))))};q.propTypes={location:m.a.object,intl:m.a.any};t.default=Object(g.c)(q)}}]);
//# sourceMappingURL=../sourcemaps/Systems.js.map