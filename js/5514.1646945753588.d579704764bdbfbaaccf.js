"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[5514],{67463:(e,t,n)=>{t.S3=void 0;const i=n(70655);i.__importStar(n(77865)),i.__importDefault(n(73631)),n(38296);var a;(a=t.S3||(t.S3={})).sm="sm",a.md="md",a.lg="lg",a.xl="xl"},63368:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(44612),a=n(78733),r=n(32132),s=n(30893);const o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.remediation,o=function(t){e({remediation:t.length>"0"&&t.filter((function(e){return","!==e})).join(",")||"",page:1})};return{label:r.N.formatMessage(s.Z.filterRemediation),type:i.Y.checkbox,urlParam:"remediation",key:"remediation",filterValues:{onChange:function(e,t){o(t)},items:a.Iv.map((function(e){return{label:e.label,value:e.value}})),value:n?n.split(","):[]}}}},66516:(e,t,n)=>{n.d(t,{Z:()=>Z});var i=n(29439),a=n(93149),r=n(83115),s=n(59775),o=n(49739),u=n(83826),c=n(87116),l=n(79851),d=n(35224),f=n(34512),v=n(91290),m=n(45697),p=n.n(m),y=n(77865),_=n.n(y),g=n(71478),b=n(91709),h=n(74806),E=n(30893),j=function(e){var t,n=e.cveList,m=e.updateRef,p=e.inventoryList,h=e.intl,j=e.type,Z=(0,b.fj)(A()),S=Z.JustificationInput,O=Z.justification,P=Z.setJustification,k=Z.setProps,N=(0,y.useState)(function(){switch(j){case"systemsExposed":if(p.every((function(e){var t,i;return e.status_id===(null===(t=n[0])||void 0===t?void 0:t.status_id)&&e.justification===(null===(i=n[0])||void 0===i?void 0:i.justification)})))return!0;break;case"systemDetail":var e=n.every((function(e,t,n){var i,a;return e.status_id===(null===(i=n[0])||void 0===i?void 0:i.status_id)&&e.justification===(null===(a=n[0])||void 0===a?void 0:a.justification)})),t=n.every((function(e){return e.status_id===e.cve_status_id&&e.justification===e.cve_justification}));if(e&&t)return!0}return!1}()),w=(0,i.Z)(N,2),x=w[0],D=w[1],M=(0,b.Hb)(J()),R=M.StatusSelect,C=M.statusId,I=M.setStatusId,T=M.setProps,U=p.map((function(e){return e.id||e.inventory_id})),L=p.map((function(e){return e.display_name}));function J(){switch(j){case"systemsExposed":return x?n[0].status_id:p.every((function(e,t,n){return e.status_id===n[0].status_id}))?null===(e=p[0])||void 0===e?void 0:e.status_id:"0";var e;case"systemDetail":var t,i;return x?n.every((function(e,t,n){return e.cve_status_id===n[0].cve_status_id}))?null===(t=n[0])||void 0===t?void 0:t.cve_status_id:"0":n.every((function(e,t,n){return e.status_id===n[0].status_id}))?null===(i=n[0])||void 0===i?void 0:i.status_id:"0"}}function A(){switch(j){case"systemsExposed":return x?n[0].justification:p.every((function(e,t,n){var i;return e.justification===(null===(i=n[0])||void 0===i?void 0:i.justification)}))&&(null===(e=p[0])||void 0===e?void 0:e.justification)||"";var e;case"systemDetail":var t,i;return x?n.every((function(e,t,n){var i;return e.cve_justification===(null===(i=n[0])||void 0===i?void 0:i.cve_justification)}))&&(null===(t=n[0])||void 0===t?void 0:t.cve_justification)||"":n.every((function(e,t,n){var i;return e.justification===(null===(i=n[0])||void 0===i?void 0:i.justification)}))&&(null===(i=n[0])||void 0===i?void 0:i.justification)||""}}(0,y.useEffect)((function(){T({isDisabled:x,ouiaId:"status-select"}),k({disabled:x}),I(J()),P(A())}),[x,T,k]);var F={variant:"success",title:"systemsExposed"===j?h.formatMessage(E.Z.notificationSystemStatusUpdateSuccessful,{count:p.length||0,systemName:L[0]}):h.formatMessage(E.Z.notificationStatusUpdateSuccessful,{count:n.length||0})},$={variant:"danger",autoDismiss:!1,title:h.formatMessage(E.Z.notificationStatusUpdateFailureTitle),description:h.formatMessage(E.Z.notificationStatusUpdateFailureBody)},q=h.formatMessage(E.Z.cvePairStatusModalTitle,{count:U.length*n.length});return _().createElement(b.ZP,{items:n,onSave:function(){var e=n.map((function(e){return e.id})),t=x?{cve:e,inventory_id:U}:{status_id:parseInt(C),cve:e,status_text:O,inventory_id:U};return(0,g.cr)(t).then(m)},onSuccessNotification:F,onFailureNotification:$,title:q,ouiaId:"status-modal"},_().createElement(o.K,{hasGutter:!0},function(){switch(j){case"systemsExposed":return p.some((function(e,t,n){var i;return e.status_id!==(null===(i=n[0])||void 0===i?void 0:i.status_id)}));case"systemDetail":return n.some((function(e,t,n){var i;return e.status_id!==(null===(i=n[0])||void 0===i?void 0:i.status_id)}))}}()&&_().createElement(u.v,null,_().createElement(c.b,{variant:"warning",isInline:!0,title:h.formatMessage(E.Z.cvePairStatusModalAlert)})),_().createElement(u.v,null,h.formatMessage(E.Z.cvePairStatusModalSelected,{cveCount:n.length||0,cveId:null===(t=n[0])||void 0===t?void 0:t.id,systemCount:p.length||0,systemName:L[0],b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _().createElement("b",null,t)}})),_().createElement(u.v,null,_().createElement(r.l,{key:"key"},_().createElement(s.c,{fieldId:"overall"},_().createElement(l.P,null,_().createElement(f.J,null,_().createElement(a.X,{label:h.formatMessage(E.Z.cvePairStatusModalUseOverallCheckbox),id:"alt-form-checkbox-1",name:"alt-form-checkbox-1",isChecked:x,onChange:function(e){return D(e)}})),_().createElement(f.J,null,_().createElement(d.u,{content:h.formatMessage(E.Z.cvePairStatusModalUseOverallTooltip)},_().createElement(v.ZP,{className:"pf-u-ml-xs",color:"var(--pf-global--Color--200)",style:{verticalAlign:"0"}}))))),R,S))))};j.propTypes={cveList:p().array,updateRef:p().func,inventoryList:p().array,intl:p().any,type:p().oneOf(["systemsExposed","systemDetail"])};const Z=(0,h.ZP)(j)},7092:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(93433),a=n(29439),r=n(77865),s=n.n(r),o=n(45697),u=n.n(o),c=n(83215),l=n(36873),d=n(28216),f=n(30893),v=n(44012),m=n(29648),p=n(2372),y=n(67463),_=n(4942),g=n(87462),b=n(45987),h=n(54025),E=n(52643),j=n(94184),Z=n.n(j);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,_.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.appName,n=e.scope,i=e.module,a=e.fallback,r=e.innerRef,o=e.className,u=e.component,c=(0,b.Z)(e,["appName","scope","module","fallback","innerRef","className","component"]);return s().createElement(u,{className:Z()(o,t)},s().createElement(h.ScalprumComponent,(0,g.Z)({className:o,appName:t,module:i,scope:n||t,ErrorComponent:a,ref:r,fallback:a},c)))},k=s().forwardRef((function(e,t){return s().createElement(P,(0,g.Z)({innerRef:t},e))}));k.propTypes={fallback:u().node,appName:u().string.isRequired,module:u().string.isRequired,scope:u().string,component:u().string},k.defaultProps={fallback:s().createElement(E.b,null,s().createElement(p.$,{size:"xl"})),component:"section"},P.propTypes=O(O({},k.propTypes),{},{innerRef:u().any});const N=k;var w=function(e){var t=e.cves,n=e.systems,r=e.manyRules,o=e.addNotification,u=e.isDisabled,c=function(e,t){return{id:"vulnerabilities:".concat(e),description:e,systems:[t]}};return s().createElement(N,{appName:"remediations",module:"./RemediationButton",fallback:s().createElement(p.$,{size:y.S3.lg}),isDisabled:u,dataProvider:function(){return function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[].concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),r=[].concat(e),s=[];if(t&&1===n.length){var o=(0,a.Z)(n,1)[0];s=r.reduce((function(e,t){var n,a=t.id,r=t.rule,s=c(o.id,a);return r&&(s.id="".concat(s.id,":").concat(null==r||null===(n=r.rule)||void 0===n?void 0:n.rule_id)),[].concat((0,i.Z)(e),[s])}),[]),s=(0,m.X8)(s,"systems")}if(!t&&1===(null==r?void 0:r.length)){var u=(0,a.Z)(r,1)[0];s=n.reduce((function(e,t){var n=t.id,a=t.attributes.rule,r=c(n,u);return null!=a&&a.rule_id&&(r.id="".concat(r.id,":").concat(a.rule_id)),[].concat((0,i.Z)(e),[r])}),[])}return!(!n.length||!r.length)&&{issues:s}}(t,n,r)},onRemediationCreated:function(e){return o(e.getNotification())}},s().createElement(v.Z,f.Z.remediateLabel))};w.propTypes={cves:u().oneOfType([u().array,u().string]),systems:u().oneOfType([u().array,u().string]),addNotification:u().func,manyRules:u().bool,isDisabled:u().bool};const x=(0,d.$j)(null,(function(e){return{addNotification:function(t){return e((0,c.wN)(t))}}}))((0,l.Z)(w))}}]);
//# sourceMappingURL=../sourcemaps/5514.fc41e186929024d4c038b529615b8d1d.js.map