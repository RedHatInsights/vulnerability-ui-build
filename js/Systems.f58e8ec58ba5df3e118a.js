(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_vulnerabilities||[]).push([[743],{72937:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r=n(63038),o=n.n(r),s=n(59713),a=n.n(s),c=n(6479),i=n.n(c),l=n(25558),u=n.n(l),f=n(45697),d=n.n(f),p=n(74806),m=n(18623),g=n(276),y=n(319),b=n.n(y),h=n(5977),v=n(81815),O=n(57721),S=n(51937),_=n(74268),E=n(98060),P=n(16721),j=n(25032),w=n(64739),D=n(66780),Z=n(16343),k=n(80712),C=n(11550),x=n(59912);const I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excluded,r=function(t){var n=[!1,!1];t.forEach((function(e){n[e]=!0}));var r=n.join(",");e({excluded:"false,false"===r?"":r,page:1})};return{label:C.N.formatMessage(m.Z.systemsIncludedInAnalysis),type:k.Yu.checkbox,urlParam:"excluded",filterValues:{onChange:function(e,t){r(t)},items:x._9.map((function(e){return{label:e.label,value:e.value}})),value:null==n?void 0:n.split(",").flatMap((function(e,t){return"true"===(null==e?void 0:e.toLowerCase())?t.toString():[]}))}}};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){var t=e.selectedHosts,n=e.intl,r=e.parameters,s=e.systems,a=e.methods,c=(0,l.useState)(!1),i=o()(c,2),f=i[0],d=i[1],p=a.apply,g=a.handleSelect,y=a.doOptOut;S.N.addNew({on:"SELECT_ENTITY",callback:function(e){return function(e){var n=e.data.selected?[e.data.id].concat(b()(t)):t.filter((function(t){return t!==e.data.id}));g(!1,n)}(e)}});var h=(0,l.useMemo)((function(){var e=null==s?void 0:s.data.filter((function(e){return t.includes(e.id)}));return{selectedExcluded:e.some((function(e){return!0===e.attributes.opt_out})),selectedIncluded:e.some((function(e){return!1===e.attributes.opt_out}))}}),[t,s]),v=["",{label:n.formatMessage(m.Z.systemKebabExcludeAnalysis,{count:t.length||0}),onClick:function(){return y(null,!0)},props:{isDisabled:!t.length||!h.selectedIncluded}},{label:n.formatMessage(m.Z.systemKebabIncludeAnalysis,{count:t.length||0}),onClick:function(){return y(null,!1)},props:{isDisabled:!t.length||!h.selectedExcluded}}],k=(0,_.Z)({selectedItems:t,selectorHandler:g,items:s,fetchResource:function(e){return(0,O.ip)(H(H({},r),e))}});return u().createElement(l.Fragment,null,u().createElement(E.U8,{bulkSelect:{count:t.length,items:k.items,isDisabled:0===s.meta.total_items&&0===t.length,checked:Boolean(t.length),ouiaId:"bulk-select",onSelect:function(){return k.handleOnCheckboxChange()}},actionsConfig:{actions:v,dropdownProps:{ouiaId:"toolbar-actions"}},filterConfig:{items:[(0,P.Z)("filter",m.Z.systemsSearchName,m.Z.searchFilterByName,r.filter,p),I(p,r)]},activeFiltersConfig:{filters:(0,j.DU)(r),onDelete:function(e,t){return(0,j.vH)(t,p)}},exportConfig:H({isDisabled:0===s.meta.total_items,extraItems:[(0,Z.Ec)(f,d)],ouiaId:"export"},(0,j.HV)({downloadReport:function(e){var t=H({},r);w.Z.exec(O.lc,t,e,"system-list")}}))}),f&&u().createElement(D.Z,{type:"systems",showButton:!1,params:r,filters:(0,j.DU)(r),onSuccess:function(){return d(!1)}}))};M.propTypes={systems:v.nE,parameters:d().object,selectedHosts:d().array,methods:d().shape({doOptOut:d().func,apply:d().func,handleSelect:d().func}),intl:d().any};const R=(0,h.EN)((0,p.ZP)(M));var B=n(44510),F=n(52906),L=n(91067),T=n(83215),A=n(25413),z=n(58135),V=n(55409);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){var t=e.intl,n=(0,l.useState)(void 0),r=o()(n,2),s=r[0],a=r[1],c=(0,v.H1)(x.IV),f=o()(c,2),d=f[0],p=f[1],y=u().createRef(),b=(0,g.useDispatch)(),h=(0,g.useSelector)((function(e){return e.SystemsPageStore.payload})),_=(0,g.useSelector)((function(e){return e.SystemsPageStore.params})),E=(0,g.useSelector)((function(e){return e.SystemsPageStore.metadata})),P=(0,g.useSelector)((function(e){return e.SystemsPageStore.error})),j=P.hasError,w=P.errorCode,D=(0,g.useSelector)((function(e){return e.SystemsPageStore.isLoading})),Z=(0,l.useMemo)((function(){return(null==(e=h.data)?void 0:e.map((function(e){var t=e.attributes,n=t.cve_count,r=i()(t,["cve_count"]);return U({cve_count:n,id:e.attributes.inventory_id},r)})))||[];var e}),[h]);(0,l.useEffect)((function(){return function(){b((0,O.re)()),b((0,O.r5)())}}),[b]),(0,l.useEffect)((function(){s&&b((0,O.lA)(s))}),[s,b]);var k=function(e){b((0,O.SF)(e))};(0,l.useEffect)((function(){b((0,T.L1)())}),[j,b]),(0,l.useEffect)((function(){y.current?(b((0,O.lc)(_)),p(U({},_))):k(d)}),[_]);var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;(s&&s.length>0||e)&&b((0,O.R0)(e||s,n)).then((function(){b((0,O.lc)(U(U({},_),{},{page:1}))),!1===_.opt_out?b((0,T.wN)({variant:"success",title:t.formatMessage(m.Z.systemsExcludedNotification,{count:e?1:s.length||0})})):b((0,T.wN)({variant:"success",title:t.formatMessage(m.Z.systemsResumedNotificationTitle,{count:e?1:s.length||0}),description:t.formatMessage(m.Z.systemsResumedNotificationBody)})),a([])}))};return u().createElement(l.Fragment,null,u().createElement(L.Z,{title:t.formatMessage(m.Z.systemsHeader),showBreadcrumb:!1}),u().createElement(B.o,null,u().createElement(l.Fragment,null,j?u().createElement(V.Z,{code:w}):u().createElement(z.e_,{onLoad:function(e){var t=e.mergeWithEntities,n=e.mergeWithDetail;S.Z.register(U(U({},t((0,A.K)(x.Bi))),n()))},tableProps:{isStickyHeader:!0,canSelectAll:!1,onSort:Z.length>0&&function(e,t,n){return(0,v.L6)(t,n,x.d$,d.sort,k)},sortBy:Z.length>0&&(0,v.hO)(x.d$,E.sort),actionResolver:function(e){return(0,F.zs)(e,C)}},showTags:!0,isFullView:!0,ref:y,items:Z,page:E&&E.page||1,perPage:E&&E.page_size||20,total:E&&E.total_items||0,onRefresh:function(e){var t=e.page,n=e.per_page;E.page===t&&E.limit===n||k({page:t,page_size:n}),E&&E.total_items<=n&&y.current&&y.current.onRefreshData({page:t,page_size:n})},isLoaded:!D,hasCheckbox:0!==h.length},h.data&&u().createElement(R,{parameters:_,systems:h,selectedHosts:s||[],methods:{doOptOut:C,apply:k,handleSelect:function(e,t){t||(t=[]),a(t)},setSelectedHosts:a},actions:!0})))))};W.propTypes={intl:d().any};const Y=(0,p.ZP)(W)}}]);
//# sourceMappingURL=Systems.f58e8ec58ba5df3e118a.js.map